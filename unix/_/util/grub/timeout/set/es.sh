#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVzLnNoCiMhL2Jpbi9iYXNoCl9NU0dfU0VUVElOR19HUlVCX1RJTUVPVVQ9IiIKX01TR19HUlVCX0ZJTEVfTk9UX0ZPVU5EPSIiCklOREVOVF9TVFJJTkc9IiIKX05FV19USU1FT1VUPSIxMCIKX0NPTkZJR19GSUxFUEFUSD0iL2V0Yy9kZWZhdWx0L2dydWIiCmZ1bmN0aW9uIHVzYWdlIHsKICAgIGNhdCA8PEhFTFBfVVNBR0UKVXNhZ2U6IHVuaXgvXy91dGlsL2dydWIvdGltZW91dC9zZXQvJF9TQ1JJUFRfRklMRU5BTUUgWy1oXSBbLWkgU1RSSU5HXSBbLXQgVElNRU9VVF0gWy1mIENPTkZJR19GSUxFXQoKICAgRGVmaW5lcyBhIG5ldyB0aW1lb3V0IGZvciBHUlVCIGJvb3QgcHJvbXB0LgoKT3B0aW9uczoKICAtaCwgLS1oZWxwICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyB0aGlzIGhlbHAgbWVzc2FnZSBhbmQgZXhpdC4KICAtaSBTVFJJTkcsIC0taW5kZW50IFNUUklORyAgICAgICAgRWFjaCBsaW5lIG9mIHRoZSBzY3JpcHQgb3V0cHV0IHdpbGwgYmUgcHJlY2VkZWQgd2l0aCB0aGUgc3RyaW5nIGRlZmluZWQgaW4gdGhpcyBwYXJhbWV0ZXIuCiAgLXQgVElNRU9VVCwgLS10aW1lb3V0IFRJTUVPVVQgICAgIE5ldyB0aW1lb3V0IGZvciB0aGUgR1JVQiBib290IHByb21wdCwgYnkgZGVmYXVsdCAkX05FV19USU1FT1VULgogIC1mIEZJTEVQQVRILCAtLWNvbmZpZy1maWxlcGF0aCBGSUxFUEFUSAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXRoIG9mIHRoZSBHUlVCIGNvbmZpZ3VyYXRpb24gZmlsZSwgYnkgZGVmYXVsdCAnJF9DT05GSUdfRklMRVBBVEgnLgoKSEVMUF9VU0FHRQogICAgZXhpdCAxCn0KZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLWl8LS1pbmRlbnQpCiAgICBJTkRFTlRfU1RSSU5HPSIkMiIKICAgIHNoaWZ0IDIKICAgIDs7CiAgICAtaHwtLWhlbHApCiAgICBzaGlmdAogICAgdXNhZ2UKICAgIDs7ICAgIAogICAgLXR8LS10aW1lb3V0KQogICAgc2hpZnQKICAgIF9ORVdfVElNRU9VVD0iJChwcmludGYgIiVzIiAiJDEiIHwgc2VkIC1lICdzL1tbOnNwYWNlOl1dKi8vZycpIgogICAgc2hpZnQKICAgIDs7CiAgICAtZnwtLWNvbmZpZy1maWxlcGF0aCkKICAgIHNoaWZ0CiAgICBfQ09ORklHX0ZJTEVQQVRIPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CmZ1bmN0aW9uIGNoZWNrR3J1YkZpbGVFeGlzdHMoKSB7CiAgaWYgWyAhIC1mICIkX0NPTkZJR19GSUxFUEFUSCIgXTsgdGhlbgogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiJXMgKCVzKSIgIiRfTVNHX0dSVUJfRklMRV9OT1RfRk9VTkQiICIkX0NPTkZJR19GSUxFUEFUSCIgPiYyCiAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICBleGl0IDEKICBmaTsKfQpmdW5jdGlvbiBzZXROZXdHcnViVGltZW91dCgpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiJXMgKCVzKS4uLiIgIiRfTVNHX1NFVFRJTkdfR1JVQl9USU1FT1VUIiAiJF9ORVdfVElNRU9VVCIKICBfR1JVQl9USU1FT1VUX0NPTkZJR19FWElTVFM9IiQoIGdyZXAgIkdSVUJfVElNRU9VVD0iIDwgIiRfQ09ORklHX0ZJTEVQQVRIIikiCiAgaWYgWyAiJF9HUlVCX1RJTUVPVVRfQ09ORklHX0VYSVNUUyIgPSAiIiBdOyB0aGVuCiAgICBwcmludGYgIlxuR1JVQl9USU1FT1VUPSVzXG4iICIkX05FV19USU1FT1VUIiA+PiAiJF9DT05GSUdfRklMRVBBVEgiCiAgZWxzZQogICAgX0NVUlJFTlRfVElNRU9VVD0iJCgKICAgICAgKGdyZXAgIkdSVUJfVElNRU9VVD0iIHwgY3V0IC1kJz0nIC1mMikgPCAiJF9DT05GSUdfRklMRVBBVEgiICkiCiAgICBpZiBbICIkX0NVUlJFTlRfVElNRU9VVCIgIT0gIiRfTkVXX1RJTUVPVVQiIF07IHRoZW4KICAgICAgc2VkIC1pICJzL0dSVUJfVElNRU9VVD1bMC05XSovR1JVQl9USU1FT1VUPSRfTkVXX1RJTUVPVVQvIiAiJF9DT05GSUdfRklMRVBBVEgiCiAgICBmaTsKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBtYWluKCkgewogIGNoZWNrR3J1YkZpbGVFeGlzdHMKICBzZXROZXdHcnViVGltZW91dAp9CmlmIChyZXR1cm4gMCAyPi9kZXYvbnVsbCk7IHRoZW4KICBleHBvcnRWYXJpYWJsZXMKZWxzZQogIG1haW4KZmk7'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
