#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVzLnNoCiMhL2Jpbi9iYXNoCl9NU0dfU0VUVElOR19HUlVCX1RJTUVPVVQ9IkRlZmluaWVuZG8gdGllbXBvIGRlIGV4cGlyYWNpw7NuIGRlIGFycmFucXVlIHBhcmEgR3J1YiIKX01TR19HUlVCX0ZJTEVfTk9UX0ZPVU5EPSJBcmNoaXZvIGRlIGNvbmZpZ3VyYWNpw7NuIGRlIEdydWIgbm8gZW5jb250cmFkbyIKSU5ERU5UX1NUUklORz0iIgpTRVRYPTAKX05FV19USU1FT1VUPSIxMCIKX0NPTkZJR19GSUxFUEFUSD0iL2V0Yy9kZWZhdWx0L2dydWIiCmZ1bmN0aW9uIHVzYWdlIHsKICAgIGNhdCA8PEhFTFBfVVNBR0UKVXNhZ2U6IHVuaXgvXy91dGlsL2dydWIvdGltZW91dC9zZXQvJF9TQ1JJUFRfRklMRU5BTUUgWy1oXSBbLWkgU1RSSU5HXSBbLXQgVElNRU9VVF0gWy1mIENPTkZJR19GSUxFXQoKICBEZWZpbmUgdW4gbnVldm8gdGllbXBvIGRlIGV4cGlyYWNpw7NuIHBhcmEgZWwgaW5kaWNhZG9yIGRlIGFycmFucXVlIGRlIEdSVUIuCgpPcHRpb25zOgogIC1oLCAtLWhlbHAgICAgICAgICAgICAgICAgICAgICAgICBTaG93IHRoaXMgaGVscCBtZXNzYWdlIGFuZCBleGl0LgogIC1pIFNUUklORywgLS1pbmRlbnQgU1RSSU5HICAgICAgICBFYWNoIGxpbmUgb2YgdGhlIHNjcmlwdCBvdXRwdXQgd2lsbCBiZSBwcmVjZWRlZCB3aXRoIHRoZSBzdHJpbmcgZGVmaW5lZCBpbiB0aGlzIHBhcmFtZXRlci4KICAtLXNldC14ICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0cyB0aGUgLXggb3B0aW9uIGluIEJhc2ggdG8gcHJpbnQgb3V0IHRoZSBzdGF0ZW1lbnRzIGFzIHRoZXkgYXJlIGJlaW5nIGV4ZWN1dGVkLiBVc2VmdWwgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy4KICAtdCBUSU1FT1VULCAtLXRpbWVvdXQgVElNRU9VVCAgICAgTmV3IHRpbWVvdXQgZm9yIHRoZSBHUlVCIGJvb3QgcHJvbXB0LCBpbiBzZWNvbmRzLiBCeSBkZWZhdWx0ICRfTkVXX1RJTUVPVVQgc2Vjb25kcy4KICAtZiBGSUxFUEFUSCwgLS1jb25maWctZmlsZXBhdGggRklMRVBBVEgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF0aCBvZiB0aGUgR1JVQiBjb25maWd1cmF0aW9uIGZpbGUsIGJ5IGRlZmF1bHQgJyRfQ09ORklHX0ZJTEVQQVRIJy4KCkhFTFBfVVNBR0UKICAgIGV4aXQgMQp9CmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC1pfC0taW5kZW50KQogICAgSU5ERU5UX1NUUklORz0iJDIiCiAgICBzaGlmdCAyCiAgICA7OwogICAgLWh8LS1oZWxwKQogICAgc2hpZnQKICAgIHVzYWdlCiAgICA7OyAgICAtLXNldC14KQogICAgU0VUWD0xCiAgICBzaGlmdAogICAgOzsgICAgCiAgICAtdHwtLXRpbWVvdXQpCiAgICBzaGlmdAogICAgX05FV19USU1FT1VUPSIkKHByaW50ZiAiJXMiICIkMSIgfCBzZWQgLWUgJ3MvW1s6c3BhY2U6XV0qLy9nJykiCiAgICBzaGlmdAogICAgOzsKICAgIC1mfC0tY29uZmlnLWZpbGVwYXRoKQogICAgc2hpZnQKICAgIF9DT05GSUdfRklMRVBBVEg9JDEKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KaWYgWyAiJFNFVFgiIC1lcSAxIF07IHRoZW4gc2V0IC14OyBmaQpmdW5jdGlvbiBjaGVja0dydWJGaWxlRXhpc3RzKCkgewogIGlmIFsgISAtZiAiJF9DT05GSUdfRklMRVBBVEgiIF07IHRoZW4KICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiVzICglcykiICIkX01TR19HUlVCX0ZJTEVfTk9UX0ZPVU5EIiAiJF9DT05GSUdfRklMRVBBVEgiID4mMgogICAgcHJpbnRmICIgXGVbOTFtXHhFMlx4OUNceDk1XGVbMzltXG4iID4mMgogICAgZXhpdCAxCiAgZmk7Cn0KZnVuY3Rpb24gc2V0TmV3R3J1YlRpbWVvdXQoKSB7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiVzICglcykuLi4iICIkX01TR19TRVRUSU5HX0dSVUJfVElNRU9VVCIgIiRfTkVXX1RJTUVPVVQiCiAgX0dSVUJfVElNRU9VVF9DT05GSUdfRVhJU1RTPSIkKCBncmVwICJHUlVCX1RJTUVPVVQ9IiA8ICIkX0NPTkZJR19GSUxFUEFUSCIpIgogIGlmIFsgIiRfR1JVQl9USU1FT1VUX0NPTkZJR19FWElTVFMiID0gIiIgXTsgdGhlbgogICAgcHJpbnRmICJcbkdSVUJfVElNRU9VVD0lc1xuIiAiJF9ORVdfVElNRU9VVCIgPj4gIiRfQ09ORklHX0ZJTEVQQVRIIgogIGVsc2UKICAgIF9DVVJSRU5UX1RJTUVPVVQ9IiQoCiAgICAgIChncmVwICJHUlVCX1RJTUVPVVQ9IiB8IGN1dCAtZCc9JyAtZjIpIDwgIiRfQ09ORklHX0ZJTEVQQVRIIiApIgogICAgaWYgWyAiJF9DVVJSRU5UX1RJTUVPVVQiICE9ICIkX05FV19USU1FT1VUIiBdOyB0aGVuCiAgICAgIHNlZCAtaSAicy9HUlVCX1RJTUVPVVQ9WzAtOV0qL0dSVUJfVElNRU9VVD0kX05FV19USU1FT1VULyIgIiRfQ09ORklHX0ZJTEVQQVRIIgogICAgZmk7CiAgZmk7CiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gbWFpbigpIHsKICBjaGVja0dydWJGaWxlRXhpc3RzCiAgc2V0TmV3R3J1YlRpbWVvdXQKfQppZiAocmV0dXJuIDAgMj4vZGV2L251bGwpOyB0aGVuCiAgZXhwb3J0VmFyaWFibGVzCmVsc2UKICBtYWluCmZpOwppZiBbICIkU0VUWCIgLWVxIDEgXTsgdGhlbiBzZXQgK3g7IGZp'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
