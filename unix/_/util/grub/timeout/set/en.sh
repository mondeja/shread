#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVuLnNoCiMhL2Jpbi9iYXNoCl9NU0dfU0VUVElOR19HUlVCX1RJTUVPVVQ9IlNldHRpbmcgYm9vdCB0aW1lb3V0IGZvciBHcnViIgpfTVNHX0dSVUJfRklMRV9OT1RfRk9VTkQ9IkdydWIgY29uZmlndXJhdGlvbiBmaWxlIG5vdCBmb3VuZCIKSU5ERU5UX1NUUklORz0iIgpfTkVXX1RJTUVPVVQ9IjEwIgpfQ09ORklHX0ZJTEVQQVRIPSIvZXRjL2RlZmF1bHQvZ3J1YiIKZnVuY3Rpb24gdXNhZ2UgewogICAgY2F0IDw8SEVMUF9VU0FHRQpVc2FnZTogc3JjL3VuaXgvXy91dGlsL2dydWIvdGltZW91dC9zZXQgWy1oXSBbLWldIFstdCBUSU1FT1VUXSBbLWYgQ09ORklHX0ZJTEVdCgogIERlZmluZXMgYSBuZXcgdGltZW91dCBmb3IgR1JVQiBib290IHByb21wdC4KCk9wdGlvbnM6CiAgLWgsIC0taGVscCAgICAgICAgICAgICAgICAgICAgICAgIFNob3cgdGhpcyBoZWxwIG1lc3NhZ2UgYW5kIGV4aXQuCiAgLWksIC0taW5kZW50IFNUUklORyAgICAgICAgICAgICAgIEVhY2ggbGluZSBvZiB0aGUgc2NyaXB0IG91dHB1dCB3aWxsIGJlIHByZWNlZGVkIHdpdGggdGhlIHN0cmluZyBkZWZpbmVkIGluIHRoaXMgcGFyYW1ldGVyLgogIC10LCAtLXRpbWVvdXQgVElNRU9VVCAgICAgICAgICAgICBOZXcgdGltZW91dCBmb3IgdGhlIEdSVUIgYm9vdCBwcm9tcHQsIGJ5IGRlZmF1bHQgJF9ORVdfVElNRU9VVC4KICAtZiwgLS1jb25maWctZmlsZXBhdGggRklMRVBBVEggICAgUGF0aCBvZiB0aGUgR1JVQiBjb25maWd1cmF0aW9uIGZpbGUsIGJ5IGRlZmF1bHQgJyRfQ09ORklHX0ZJTEVQQVRIJy4KCkhFTFBfVVNBR0UKICAgIGV4aXQgMQp9CmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC1pfC0taW5kZW50KQogICAgc2hpZnQKICAgIElOREVOVF9TVFJJTkc9JDEKICAgIHNoaWZ0CiAgICA7OwogICAgLWh8LS1oZWxwKQogICAgc2hpZnQKICAgIHVzYWdlCiAgICA7OwogICAgLXR8LS10aW1lb3V0KQogICAgc2hpZnQKICAgIF9ORVdfVElNRU9VVD0iJChwcmludGYgIiVzIiAiJDEiIHwgc2VkIC1lICdzL1tbOnNwYWNlOl1dKi8vZycpIgogICAgc2hpZnQKICAgIDs7CiAgICAtZnwtLWNvbmZpZy1maWxlcGF0aCkKICAgIHNoaWZ0CiAgICBfQ09ORklHX0ZJTEVQQVRIPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CmZ1bmN0aW9uIGNoZWNrR3J1YkZpbGVFeGlzdHMoKSB7CiAgaWYgWyAhIC1mICIkX0NPTkZJR19GSUxFUEFUSCIgXTsgdGhlbgogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiJXMgKCVzKSIgIiRfTVNHX0dSVUJfRklMRV9OT1RfRk9VTkQiICIkX0NPTkZJR19GSUxFUEFUSCIgPiYyCiAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICBleGl0IDEKICBmaTsKfQpmdW5jdGlvbiBzZXROZXdHcnViVGltZW91dCgpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiJXMgKCVzKS4uLiIgIiRfTVNHX1NFVFRJTkdfR1JVQl9USU1FT1VUIiAiJF9ORVdfVElNRU9VVCIKICBfR1JVQl9USU1FT1VUX0NPTkZJR19FWElTVFM9IiQoIGdyZXAgIkdSVUJfVElNRU9VVD0iIDwgIiRfQ09ORklHX0ZJTEVQQVRIIikiCiAgaWYgWyAiJF9HUlVCX1RJTUVPVVRfQ09ORklHX0VYSVNUUyIgPSAiIiBdOyB0aGVuCiAgICBwcmludGYgIlxuR1JVQl9USU1FT1VUPSVzXG4iICIkX05FV19USU1FT1VUIiA+PiAiJF9DT05GSUdfRklMRVBBVEgiCiAgZWxzZQogICAgX0NVUlJFTlRfVElNRU9VVD0iJCgKICAgICAgKGdyZXAgIkdSVUJfVElNRU9VVD0iIHwgY3V0IC1kJz0nIC1mMikgPCAiJF9DT05GSUdfRklMRVBBVEgiICkiCiAgICBpZiBbICIkX0NVUlJFTlRfVElNRU9VVCIgIT0gIiRfTkVXX1RJTUVPVVQiIF07IHRoZW4KICAgICAgc2VkIC1pICJzL0dSVUJfVElNRU9VVD1bMC05XSovR1JVQl9USU1FT1VUPSRfTkVXX1RJTUVPVVQvIiAiJF9DT05GSUdfRklMRVBBVEgiCiAgICBmaTsKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBtYWluKCkgewogIGNoZWNrR3J1YkZpbGVFeGlzdHMKICBzZXROZXdHcnViVGltZW91dAp9CmlmIChyZXR1cm4gMCAyPi9kZXYvbnVsbCk7IHRoZW4KICBleHBvcnRWYXJpYWJsZXMKZWxzZQogIG1haW4KZmk7'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
