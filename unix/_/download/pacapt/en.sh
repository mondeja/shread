#!/bin/bash
source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0NIRUNLSU5HX1BBQ0FQVD0iQ2hlY2tpbmcgcGFjYXB0IgpfTVNHX1JFVFJJRVZJTkdfTEFTVEVTVF9WRVJTSU9OPSJSZXRyaWV2aW5nIGxhdGVzdCB2ZXJzaW9uIgpfTVNHX0lOU1RBTExFRD0iSW5zdGFsbGVkIgpfTVNHX0ZPVU5EX0lOU1RBTExFRD0iRm91bmQgaW5zdGFsbGVkIgpfTVNHX1VQREFURUQ9IlVwZGF0ZWQiCl9NU0dfREVTVF9FWElTVFM9IkRlc3RpbmF0aW9uIGZpbGUgZXhpc3RzIgpfTVNHX0lORElDQVRFX0FOT1RIRVJfREVTVF9XSVRIX1BBUkFNPSJJbmRpY2F0ZSBhbm90aGVyIGRlc3RpbmF0aW9uIGZvciBwYWNhcHQgd2l0aCBwYXJhbWV0ZXIiCklOREVOVF9TVFJJTkc9IiIKX0RFU1RfUEFUSD0iL3Vzci9sb2NhbC9iaW4vcGFjYXB0Igpmb3IgYXJnIGluICIkQCI7IGRvCiAgY2FzZSAkYXJnIGluCiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICAgIC0tZGVzdC1wYXRoKQogICAgc2hpZnQKICAgIF9ERVNUX1BBVEg9JDEKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KaWYgWyAhIC1kICIvdXNyL2xvY2FsL2JpbiIgXTsgdGhlbgogIGlmIFsgLWQgIi91c3IvYmluIiBdOyB0aGVuCiAgICBfREVTVF9QQVRIPSIvYmluL3BhY2FwdCIKICBlbHNlCiAgICBfREVTVF9QQVRIPSIvdXNyL2Jpbi9wYWNhcHQiCiAgZmk7CmZpOwppZiBbWyAiJChzdWRvIGRwa2cgLXMgY3VybCAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogIHN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IC1xcXEgY3VybCA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CmZpOwpQQUNBUFRfRE9XTkxPQURfTElOSz0iaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2ljeS9wYWNhcHQvbmcvcGFjYXB0IgpmdW5jdGlvbiBnZXRQYWNBcHRMYXN0ZXN0VmVyc2lvbiB7CiAgcm0gLWYgL3RtcC9wYWNhcHQKICBjdXJsIC1zTCAiJFBBQ0FQVF9ET1dOTE9BRF9MSU5LIiAtLW91dHB1dCAiL3RtcC9wYWNhcHQiCiAgX1BBQ0FQVF9MQVNURVNUX1ZFUlNJT049IiQoPCAiL3RtcC9wYWNhcHQiIGdyZXAgIgp9CmZ1bmN0aW9uIGdldFBhY0FwdEN1cnJlbnRWZXJzaW9uIHsKICBfUEFDQVBUX0NVUlJFTlRfVkVSU0lPTj0iIgogIFBBQ0FQVF9CSU5BUllfUEFUSD0iJChjb21tYW5kIC12IHBhY2FwdCkiCiAgaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXSAmJiBbICIkKGNvbW1hbmQgLXYgcGFjYXB0KSIgIT0gIiIgXTsgdGhlbgogICAgc3VkbyBjcCAiJChjb21tYW5kIC12IHBhY2FwdCkiICIkKGNvbW1hbmQgLXYgcGFjbWFuKSIKICAgIFBBQ0FQVF9CSU5BUllfUEFUSD0iJChjb21tYW5kIC12IHBhY21hbikiCiAgZmk7CiAgaWYgWyAtbiAiJFBBQ0FQVF9CSU5BUllfUEFUSCIgXTsgdGhlbgogICAgX1BBQ0FQVF9DVVJSRU5UX1ZFUlNJT049JCgKICAgICAgPCAiJFBBQ0FQVF9CSU5BUllfUEFUSCIgZ3JlcCAiVmVyc2lvbjoiIHwgY3V0IC1kJyAnIC1mMykKICBmaTsKfQpmdW5jdGlvbiBpbnN0YWxsUGFjQXB0IHsKICBzdWRvIGNwICIvdG1wL3BhY2FwdCIgIiRfREVTVF9QQVRIIgogIHN1ZG8gY2htb2QgNzU1ICIkX0RFU1RfUEFUSCIKICBpZiBbIC1mICIvdXNyL2xvY2FsL2Jpbi9wYWNtYW4iIF07IHRoZW4KICAgIHN1ZG8gcm0gLWYgIi91c3IvbG9jYWwvYmluL3BhY21hbiIKICBmaTsKICBzdWRvIGxuIC1zdiAiJF9ERVNUX1BBVEgiICIvdXNyL2xvY2FsL2Jpbi9wYWNtYW4iID4gL2Rldi9udWxsIHx8IHRydWUKICBpZiBbIC1mICIvdG1wL3BhY2FwdCIgXTsgdGhlbgogICAgcm0gLWYgIi90bXAvcGFjYXB0IgogIGZpOwp9CmZ1bmN0aW9uIG1haW4gewogIGlmIFsgLWYgIiRfREVTVF9QQVRIIiBdIHx8IFsgLWQgIiRfREVTVF9QQVRIIiBdOyB0aGVuCiAgICBfUEFDQVBUX0dSRVBfU09VUkNFPSIkKDwgIiRfREVTVF9QQVRIIiBncmVwICIKICAgIGlmIFsgIiRfUEFDQVBUX0dSRVBfU09VUkNFIiAhPSAiaHR0cDovL2dpdGh1Yi5jb20vaWN5L3BhY2FwdC8iIF07IHRoZW4KICAgICAgcHJpbnRmICIlcyAoJXMpXG4iICIkX01TR19ERVNUX0VYSVNUUyIgIiRfREVTVF9QQVRIIiA+JjIKICAgICAgcHJpbnRmICIlcyAnLS1kZXN0LXBhdGgnLlxuIiAiJF9NU0dfSU5ESUNBVEVfQU5PVEhFUl9ERVNUX1dJVEhfUEFSQU0iID4mMgogICAgICBleGl0IDEKICAgIGZpOwogIGZpOwogIHByaW50SW5kZW50CiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfUEFDQVBULi4uIgogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzIiAiJF9NU0dfUkVUUklFVklOR19MQVNURVNUX1ZFUlNJT04uLi4iCiAgZ2V0UGFjQXB0TGFzdGVzdFZlcnNpb24KICBwcmludGYgIiAodiVzKSIgIiRfUEFDQVBUX0xBU1RFU1RfVkVSU0lPTiIKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBnZXRQYWNBcHRDdXJyZW50VmVyc2lvbgogIGlmIFsgLXogIiRfUEFDQVBUX0NVUlJFTlRfVkVSU0lPTiIgXTsgdGhlbgogICAgaW5zdGFsbFBhY0FwdAogICAgcHJpbnRmICIgICVzICh2JXMpIiAiJF9NU0dfSU5TVEFMTEVEIiAiJF9QQUNBUFRfTEFTVEVTVF9WRVJTSU9OIgogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZWxpZiBbICIkX1BBQ0FQVF9DVVJSRU5UX1ZFUlNJT04iID0gIiRfUEFDQVBUX0xBU1RFU1RfVkVSU0lPTiIgXTsgdGhlbgogICAgcHJpbnRmICIgICVzIiAiJF9NU0dfRk9VTkRfSU5TVEFMTEVEIgogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZWxzZQogICAgcHJpbnRmICIgICVzICh2JXMgLT4gdiVzKSIgXAogICAgICAiJF9NU0dfVVBEQVRFRCIgIiRfUEFDQVBUX0NVUlJFTlRfVkVSU0lPTiIgIiRfUEFDQVBUX0xBU1RFU1RfVkVSU0lPTiIKICAgIHN1ZG8gcm0gLWYgIiRQQUNBUFRfQklOQVJZX1BBVEgiCiAgICBpbnN0YWxsUGFjQXB0CiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBmaTsKfQohIChyZXR1cm4gMCAyPi9kZXYvbnVsbCkgJiYgbWFpbgo=' | base64 -d)
