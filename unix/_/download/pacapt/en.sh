#!/bin/bash
source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVuLnNoCl9NU0dfQ0hFQ0tJTkdfUEFDQVBUPSJDaGVja2luZyBwYWNhcHQiCl9NU0dfUkVUUklFVklOR19MQVNURVNUX1ZFUlNJT049IlJldHJpZXZpbmcgbGF0ZXN0IHZlcnNpb24iCl9NU0dfSU5TVEFMTEVEPSJJbnN0YWxsZWQiCl9NU0dfRk9VTkRfSU5TVEFMTEVEPSJGb3VuZCBpbnN0YWxsZWQiCl9NU0dfVVBEQVRFRD0iVXBkYXRlZCIKX01TR19ERVNUX0VYSVNUUz0iRGVzdGluYXRpb24gZmlsZSBleGlzdHMiCl9NU0dfSU5ESUNBVEVfQU5PVEhFUl9ERVNUX1dJVEhfUEFSQU09IkluZGljYXRlIGFub3RoZXIgZGVzdGluYXRpb24gZm9yIHBhY2FwdCB3aXRoIHBhcmFtZXRlciIKSU5ERU5UX1NUUklORz0iIgpfREVTVF9QQVRIPSIvdXNyL2xvY2FsL2Jpbi9wYWNhcHQiCmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC0taW5kZW50KQogICAgc2hpZnQKICAgIElOREVOVF9TVFJJTkc9JDEKICAgIHNoaWZ0CiAgICA7OwogICAgLS1kZXN0LXBhdGgpCiAgICBzaGlmdAogICAgX0RFU1RfUEFUSD0kMQogICAgc2hpZnQKICAgIDs7CiAgZXNhYwpkb25lCmZ1bmN0aW9uIHByaW50SW5kZW50KCkgewogIHByaW50ZiAiJXMiICIkSU5ERU5UX1NUUklORyIKfQppZiBbICEgLWQgIi91c3IvbG9jYWwvYmluIiBdOyB0aGVuCiAgaWYgWyAhIC1kICIvdXNyL2JpbiIgXTsgdGhlbgogICAgaWYgWyAhIC1kICIvYmluIiBdOyB0aGVuCiAgICAgIElGUz0nOicgcmVhZCAtcmEgX1BBVEggPDw8ICIkUEFUSCIKICAgICAgZm9yIGkgaW4gIiR7X1BBVEhbQF19IjsgZG8KICAgICAgICAgIF9ERVNUX1BBVEg9IiRpL3BhY2FwdCIKICAgICAgICAgIGJyZWFrCiAgICAgIGRvbmUKICAgIGVsc2UKICAgICAgX0RFU1RfUEFUSD0iL2Jpbi9wYWNhcHQiCiAgICBmaTsKICBlbHNlCiAgICBfREVTVF9QQVRIPSIvdXNyL2Jpbi9wYWNhcHQiCiAgZmk7CmZpOwppZiBbWyAiJChzdWRvIGRwa2cgLXMgY3VybCAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogIHN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IC1xcXEgY3VybCA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CmZpOwpQQUNBUFRfRE9XTkxPQURfTElOSz0iaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2ljeS9wYWNhcHQvbmcvcGFjYXB0IgpmdW5jdGlvbiBnZXRQYWNBcHRMYXN0ZXN0VmVyc2lvbiB7CiAgcm0gLWYgL3RtcC9wYWNhcHQKICBjdXJsIC1zTCAiJFBBQ0FQVF9ET1dOTE9BRF9MSU5LIiAtLW91dHB1dCAiL3RtcC9wYWNhcHQiCiAgX1BBQ0FQVF9MQVNURVNUX1ZFUlNJT049IiQoPCAiL3RtcC9wYWNhcHQiIGdyZXAgIgp9CmZ1bmN0aW9uIGdldFBhY0FwdEN1cnJlbnRWZXJzaW9uIHsKICBfUEFDQVBUX0NVUlJFTlRfVkVSU0lPTj0iIgogIFBBQ0FQVF9CSU5BUllfUEFUSD0iJChjb21tYW5kIC12IHBhY2FwdCkiCiAgaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXSAmJiBbICIkKGNvbW1hbmQgLXYgcGFjYXB0KSIgIT0gIiIgXTsgdGhlbgogICAgc3VkbyBjcCAiJChjb21tYW5kIC12IHBhY2FwdCkiICIkKGNvbW1hbmQgLXYgcGFjbWFuKSIKICAgIFBBQ0FQVF9CSU5BUllfUEFUSD0iJChjb21tYW5kIC12IHBhY21hbikiCiAgZmk7CiAgaWYgWyAtbiAiJFBBQ0FQVF9CSU5BUllfUEFUSCIgXTsgdGhlbgogICAgX1BBQ0FQVF9DVVJSRU5UX1ZFUlNJT049JCgKICAgICAgPCAiJFBBQ0FQVF9CSU5BUllfUEFUSCIgZ3JlcCAiVmVyc2lvbjoiIHwgY3V0IC1kJyAnIC1mMykKICBmaTsKfQpmdW5jdGlvbiBpbnN0YWxsUGFjQXB0IHsKICBzdWRvIGNwICIvdG1wL3BhY2FwdCIgIiRfREVTVF9QQVRIIgogIHN1ZG8gY2htb2QgNzU1ICIkX0RFU1RfUEFUSCIKICBpZiBbIC1mICIvdXNyL2xvY2FsL2Jpbi9wYWNtYW4iIF07IHRoZW4KICAgIHN1ZG8gcm0gLWYgIi91c3IvbG9jYWwvYmluL3BhY21hbiIKICBmaTsKICBzdWRvIGxuIC1zdiAiJF9ERVNUX1BBVEgiICIvdXNyL2xvY2FsL2Jpbi9wYWNtYW4iID4gL2Rldi9udWxsIHx8IHRydWUKICBpZiBbIC1mICIvdG1wL3BhY2FwdCIgXTsgdGhlbgogICAgcm0gLWYgIi90bXAvcGFjYXB0IgogIGZpOwp9CmZ1bmN0aW9uIG1haW4gewogIGlmIFsgLWYgIiRfREVTVF9QQVRIIiBdIHx8IFsgLWQgIiRfREVTVF9QQVRIIiBdOyB0aGVuCiAgICBfUEFDQVBUX0dSRVBfU09VUkNFPSIkKDwgIiRfREVTVF9QQVRIIiBncmVwICcgU291cmNlJyB8IGN1dCAtZCcgJyAtZjQpIgogICAgaWYgWyAiJF9QQUNBUFRfR1JFUF9TT1VSQ0UiICE9ICJodHRwOi8vZ2l0aHViLmNvbS9pY3kvcGFjYXB0LyIgXTsgdGhlbgogICAgICBwcmludGYgIiVzICglcylcbiIgIiRfTVNHX0RFU1RfRVhJU1RTIiAiJF9ERVNUX1BBVEgiID4mMgogICAgICBwcmludGYgIiVzICctLWRlc3QtcGF0aCcuXG4iICIkX01TR19JTkRJQ0FURV9BTk9USEVSX0RFU1RfV0lUSF9QQVJBTSIgPiYyCiAgICAgIGV4aXQgMQogICAgZmk7CiAgZmk7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiVzXG4iICIkX01TR19DSEVDS0lOR19QQUNBUFQuLi4iCiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMiICIkX01TR19SRVRSSUVWSU5HX0xBU1RFU1RfVkVSU0lPTi4uLiIKICBnZXRQYWNBcHRMYXN0ZXN0VmVyc2lvbgogIHByaW50ZiAiICh2JXMpIiAiJF9QQUNBUFRfTEFTVEVTVF9WRVJTSU9OIgogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGdldFBhY0FwdEN1cnJlbnRWZXJzaW9uCiAgaWYgWyAteiAiJF9QQUNBUFRfQ1VSUkVOVF9WRVJTSU9OIiBdOyB0aGVuCiAgICBpbnN0YWxsUGFjQXB0CiAgICBwcmludGYgIiAgJXMgKHYlcykiICIkX01TR19JTlNUQUxMRUQiICIkX1BBQ0FQVF9MQVNURVNUX1ZFUlNJT04iCiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBlbGlmIFsgIiRfUEFDQVBUX0NVUlJFTlRfVkVSU0lPTiIgPSAiJF9QQUNBUFRfTEFTVEVTVF9WRVJTSU9OIiBdOyB0aGVuCiAgICBwcmludGYgIiAgJXMiICIkX01TR19GT1VORF9JTlNUQUxMRUQiCiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBlbHNlCiAgICBwcmludGYgIiAgJXMgKHYlcyAtPiB2JXMpIiBcCiAgICAgICIkX01TR19VUERBVEVEIiAiJF9QQUNBUFRfQ1VSUkVOVF9WRVJTSU9OIiAiJF9QQUNBUFRfTEFTVEVTVF9WRVJTSU9OIgogICAgc3VkbyBybSAtZiAiJFBBQ0FQVF9CSU5BUllfUEFUSCIKICAgIGluc3RhbGxQYWNBcHQKICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGZpOwp9CiEgKHJldHVybiAwIDI+L2Rldi9udWxsKSAmJiBtYWluCg==' | base64 -d)
