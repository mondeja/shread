#!/bin/bash
_SCRIPT_FILENAME="$(basename "$0")" source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iRXN0ZSBzY3JpcHQgbmVjZXNpdGEgc2VyIGVqZWN1dGFkbyBjb21vIHN1cGVydXN1YXJpby4iCl9NU0dfQ0hFQ0tJTkdfRFJPUEJPWF9FTlY9IkNvbXByb2JhbmRvIGVudG9ybm8gRHJvcGJveC4uLiIKX01TR19EUk9QQk9YX0ZPVU5EX0lOU1RBTExFRD0iRW5jb250cmFkbyBEcm9wYm94IGluc3RhbGFkbyBlbiBlbCBzaXN0ZW1hIgpfTVNHX0NIRUNLSU5HX0lGX0lTX1VQREFURUQ9IkNvbXByb2JhbmRvIHNpIGVzdMOhIGFjdHVhbGl6YWRvLi4uIgpfTVNHX1VQREFUSU5HX0RST1BCT1g9IkFjdHVhbGl6YW5kbyBEcm9wYm94IgpfTVNHX1JFVFJJRVZJTkdfTEFTVF9EUk9QQk9YX1ZFUlNJT049Ik9idGVuaWVuZG8gbGEgw7psdGltYSB2ZXJzacOzbiBkZSBEcm9wYm94Li4uIgpfTVNHX0RPV05MT0FESU5HX0RST1BCT1g9IkRlc2NhcmdhbmRvIERyb3Bib3giCl9NU0dfSU5TVEFMTElOR19EUk9QQk9YPSJJbnN0YWxhbmRvIERyb3Bib3giCmlmIFtbICQoL3Vzci9iaW4vaWQgLXUpIC1uZSAwIF1dOyB0aGVuCiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSIiA+JjIKICBleGl0IDEKZmk7Cl9VUERBVEU9MQpJTkRFTlRfU1RSSU5HPSIiCmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC0taW5kZW50KQogICAgc2hpZnQKICAgIElOREVOVF9TVFJJTkc9JDEKICAgIHNoaWZ0CiAgICA7OwogICAgLS1uby11cGRhdGUpCiAgICBfVVBEQVRFPTAKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KcHJpbnRJbmRlbnQKcHJpbnRmICIlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfRFJPUEJPWF9FTlYiCmlmIFsgIiQoY29tbWFuZCAtdiBwYWNtYW4pIiA9ICIiIF07IHRoZW4KICBpZiBbICIkX1NDUklQVF9GSUxFTkFNRSIgPSAibWFpbi5zaCIgXTsgdGhlbgogICAgZmlsZXBhdGg9InNyYy91bml4L18vZG93bmxvYWQvcGFjYXB0L21haW4uc2giCiAgICBiYXNoICIkZmlsZXBhdGgiID4gL2Rldi9udWxsCiAgZWxzZQogICAgdXJsPSJodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vZG93bmxvYWQvcGFjYXB0LyRfU0NSSVBUX0ZJTEVOQU1FIgogICAgY3VybCAtc0wgIiR1cmwiIHwgc3VkbyBiYXNoIC0gPiAvZGV2L251bGwKICBmaTsKZmk7CmlmIFtbICIkKHN1ZG8gcGFjbWFuIC1RaSBjdXJsIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgc3VkbyBwYWNtYW4gLVMgY3VybCA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CmZpOwpmdW5jdGlvbiBnZXREcm9wYm94TGFzdFZlcnNpb24oKSB7CiAgX0RST1BCT1hfTEFTVF9ERUI9JCgKICAgIGN1cmwgLXNMIGh0dHBzOi8vbGludXguZHJvcGJveC5jb20vcGFja2FnZXMvZGViaWFuLyB8IFwKICAgIGdyZXAgYW1kNjQuZGViIHwgXAogICAgdGFpbCAtbiAxIHwgXAogICAgY3V0IC1kJyInIC1mMikKICBfRFJPUEJPWF9DTURfTEFTVF9WRVJTSU9OPSIkKGVjaG8gIiRfRFJPUEJPWF9MQVNUX0RFQiIgfCBjdXQgLWQnXycgLWYyKSIKfQpmdW5jdGlvbiBkb3dubG9hZERyb3Bib3goKSB7CiAgX0RST1BCT1hfRE9XTkxPQURfVVJMPSJodHRwczovL2xpbnV4LmRyb3Bib3guY29tL3BhY2thZ2VzL2RlYmlhbi8kX0RST1BCT1hfTEFTVF9ERUIiCiAgY3VybCAtc0wgLW8gIiRfRFJPUEJPWF9MQVNUX0RFQiIgIiRfRFJPUEJPWF9ET1dOTE9BRF9VUkwiCn0KZnVuY3Rpb24gaW5zdGFsbERyb3Bib3goKSB7CiAgc3VkbyBkcGtnIC1pICIkX0RST1BCT1hfTEFTVF9ERUIiID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICBzdWRvIHJtIC1mICIkX0RST1BCT1hfTEFTVF9ERUIiCn0KX0RST1BCT1hfQklOQVJZX1BBVEg9IiQoY29tbWFuZCAtdiBkcm9wYm94KSIKaWYgWyAiJF9EUk9QQk9YX0JJTkFSWV9QQVRIIiAhPSAiIiBdOyB0aGVuCiAgX0RST1BCT1hfSU5TVEFMTEVEX1ZFUlNJT049JChkcm9wYm94IHZlcnNpb24gfCB0YWlsIC1uIDEgfCBjdXQgLWQnICcgLWY1KQogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzICh2JXMpIiAiJF9NU0dfRFJPUEJPWF9GT1VORF9JTlNUQUxMRUQiIFwKICAgICIkX0RST1BCT1hfSU5TVEFMTEVEX1ZFUlNJT04iCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgaWYgWyAkX1VQREFURSAtZXEgMCBdOyB0aGVuCiAgICBleGl0IDAKICBmaTsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyIgIiRfTVNHX0NIRUNLSU5HX0lGX0lTX1VQREFURUQiCiAgZ2V0RHJvcGJveExhc3RWZXJzaW9uCiAgaWYgWyAiJF9EUk9QQk9YX0NNRF9MQVNUX1ZFUlNJT04iID0gIiRfRFJPUEJPWF9JTlNUQUxMRURfVkVSU0lPTiIgXTsgdGhlbgogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgICBleGl0IDAKICBlbHNlCiAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIKICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiAgJXMgKHYlcyAtPiB2JXMpLi4uIiAiJF9NU0dfVVBEQVRJTkdfRFJPUEJPWCIgXAogICAgICAiJF9EUk9QQk9YX0lOU1RBTExFRF9WRVJTSU9OIiAiJF9EUk9QQk9YX0NNRF9MQVNUX1ZFUlNJT04iCiAgICBkb3dubG9hZERyb3Bib3gKICAgIGluc3RhbGxEcm9wYm94CiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBmaTsKZWxzZQogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzIiAiJF9NU0dfUkVUUklFVklOR19MQVNUX0RST1BCT1hfVkVSU0lPTiIKICBnZXREcm9wYm94TGFzdFZlcnNpb24KICBwcmludGYgIiAodiVzKSIgIiRfRFJPUEJPWF9DTURfTEFTVF9WRVJTSU9OIgogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzICh2JXMpLi4uIiAiJF9NU0dfRE9XTkxPQURJTkdfRFJPUEJPWCIgIiRfRFJPUEJPWF9DTURfTEFTVF9WRVJTSU9OIgogIGRvd25sb2FkRHJvcGJveAogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzICh2JXMpLi4uIiAiJF9NU0dfSU5TVEFMTElOR19EUk9QQk9YIiAiJF9EUk9QQk9YX0NNRF9MQVNUX1ZFUlNJT04iCiAgaW5zdGFsbERyb3Bib3gKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKZmk7Cg==' | base64 -d)
