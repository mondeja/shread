#!/bin/bash
_SCRIPT_FILENAME="$(basename "$0")" source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iVGhpcyBzY3JpcHQgbmVlZHMgdG8gYmUgZXhlY3V0ZWQgYXMgc3VwZXJ1c2VyLiIKX01TR19DSEVDS0lOR19EUk9QQk9YX0VOVj0iQ2hlY2tpbmcgRHJvcGJveCBlbnZpcm9ubWVudC4uLiIKX01TR19EUk9QQk9YX0ZPVU5EX0lOU1RBTExFRD0iRHJvcGJveCBmb3VuZCBpbnN0YWxsZWQgaW4gdGhlIHN5c3RlbSIKX01TR19DSEVDS0lOR19JRl9JU19VUERBVEVEPSJDaGVja2luZyBpZiBpcyB1cGRhdGVkLi4uIgpfTVNHX1VQREFUSU5HX0RST1BCT1g9IlVwZGF0aW5nIERyb3Bib3giCl9NU0dfUkVUUklFVklOR19MQVNUX0RST1BCT1hfVkVSU0lPTj0iUmV0cmlldmluZyBsYXN0IERyb3Bib3ggdmVyc2lvbi4uLiIKX01TR19ET1dOTE9BRElOR19EUk9QQk9YPSJEb3dubG9hZGluZyBEcm9wYm94IgpfTVNHX0lOU1RBTExJTkdfRFJPUEJPWD0iSW5zdGFsbGluZyBEcm9wYm94IgppZiBbWyAkKC91c3IvYmluL2lkIC11KSAtbmUgMCBdXTsgdGhlbgogIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUiIgPiYyCiAgZXhpdCAxCmZpOwpfVVBEQVRFPTEKSU5ERU5UX1NUUklORz0iIgpmb3IgYXJnIGluICIkQCI7IGRvCiAgY2FzZSAkYXJnIGluCiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICAgIC0tbm8tdXBkYXRlKQogICAgX1VQREFURT0wCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CnByaW50SW5kZW50CnByaW50ZiAiJXNcbiIgIiRfTVNHX0NIRUNLSU5HX0RST1BCT1hfRU5WIgppZiBbICIkKGNvbW1hbmQgLXYgcGFjbWFuKSIgPSAiIiBdOyB0aGVuCiAgaWYgWyAiJF9TQ1JJUFRfRklMRU5BTUUiID0gIm1haW4uc2giIF07IHRoZW4KICAgIGZpbGVwYXRoPSJzcmMvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC9tYWluLnNoIgogICAgYmFzaCAiJGZpbGVwYXRoIiA+IC9kZXYvbnVsbAogIGVsc2UKICAgIHVybD0iaHR0cHM6Ly9tb25kZWphLmdpdGh1Yi5pby9zaHJlYWQvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC8kX1NDUklQVF9GSUxFTkFNRSIKICAgIGN1cmwgLXNMICIkdXJsIiB8IHN1ZG8gYmFzaCAtID4gL2Rldi9udWxsCiAgZmk7CmZpOwppZiBbWyAiJChzdWRvIHBhY21hbiAtUWkgY3VybCAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogIHN1ZG8gcGFjbWFuIC1TIGN1cmwgPiAvZGV2L251bGwgfHwgZXhpdCAkPwpmaTsKZnVuY3Rpb24gZ2V0RHJvcGJveExhc3RWZXJzaW9uKCkgewogIF9EUk9QQk9YX0xBU1RfREVCPSQoCiAgICBjdXJsIC1zTCBodHRwczovL2xpbnV4LmRyb3Bib3guY29tL3BhY2thZ2VzL2RlYmlhbi8gfCBcCiAgICBncmVwIGFtZDY0LmRlYiB8IFwKICAgIHRhaWwgLW4gMSB8IFwKICAgIGN1dCAtZCciJyAtZjIpCiAgX0RST1BCT1hfQ01EX0xBU1RfVkVSU0lPTj0iJChlY2hvICIkX0RST1BCT1hfTEFTVF9ERUIiIHwgY3V0IC1kJ18nIC1mMikiCn0KZnVuY3Rpb24gZG93bmxvYWREcm9wYm94KCkgewogIF9EUk9QQk9YX0RPV05MT0FEX1VSTD0iaHR0cHM6Ly9saW51eC5kcm9wYm94LmNvbS9wYWNrYWdlcy9kZWJpYW4vJF9EUk9QQk9YX0xBU1RfREVCIgogIGN1cmwgLXNMIC1vICIkX0RST1BCT1hfTEFTVF9ERUIiICIkX0RST1BCT1hfRE9XTkxPQURfVVJMIgp9CmZ1bmN0aW9uIGluc3RhbGxEcm9wYm94KCkgewogIHN1ZG8gZHBrZyAtaSAiJF9EUk9QQk9YX0xBU1RfREVCIiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgc3VkbyBybSAtZiAiJF9EUk9QQk9YX0xBU1RfREVCIgp9Cl9EUk9QQk9YX0JJTkFSWV9QQVRIPSIkKGNvbW1hbmQgLXYgZHJvcGJveCkiCmlmIFsgIiRfRFJPUEJPWF9CSU5BUllfUEFUSCIgIT0gIiIgXTsgdGhlbgogIF9EUk9QQk9YX0lOU1RBTExFRF9WRVJTSU9OPSQoZHJvcGJveCB2ZXJzaW9uIHwgdGFpbCAtbiAxIHwgY3V0IC1kJyAnIC1mNSkKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyAodiVzKSIgIiRfTVNHX0RST1BCT1hfRk9VTkRfSU5TVEFMTEVEIiBcCiAgICAiJF9EUk9QQk9YX0lOU1RBTExFRF9WRVJTSU9OIgogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGlmIFsgJF9VUERBVEUgLWVxIDAgXTsgdGhlbgogICAgZXhpdCAwCiAgZmk7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMiICIkX01TR19DSEVDS0lOR19JRl9JU19VUERBVEVEIgogIGdldERyb3Bib3hMYXN0VmVyc2lvbgogIGlmIFsgIiRfRFJPUEJPWF9DTURfTEFTVF9WRVJTSU9OIiA9ICIkX0RST1BCT1hfSU5TVEFMTEVEX1ZFUlNJT04iIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogICAgZXhpdCAwCiAgZWxzZQogICAgcHJpbnRmICIgXGVbOTFtXHhFMlx4OUNceDk1XGVbMzltXG4iCiAgICBwcmludEluZGVudAogICAgcHJpbnRmICIgICVzICh2JXMgLT4gdiVzKS4uLiIgIiRfTVNHX1VQREFUSU5HX0RST1BCT1giIFwKICAgICAgIiRfRFJPUEJPWF9JTlNUQUxMRURfVkVSU0lPTiIgIiRfRFJPUEJPWF9DTURfTEFTVF9WRVJTSU9OIgogICAgZG93bmxvYWREcm9wYm94CiAgICBpbnN0YWxsRHJvcGJveAogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZmk7CmVsc2UKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyIgIiRfTVNHX1JFVFJJRVZJTkdfTEFTVF9EUk9QQk9YX1ZFUlNJT04iCiAgZ2V0RHJvcGJveExhc3RWZXJzaW9uCiAgcHJpbnRmICIgKHYlcykiICIkX0RST1BCT1hfQ01EX0xBU1RfVkVSU0lPTiIKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyAodiVzKS4uLiIgIiRfTVNHX0RPV05MT0FESU5HX0RST1BCT1giICIkX0RST1BCT1hfQ01EX0xBU1RfVkVSU0lPTiIKICBkb3dubG9hZERyb3Bib3gKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyAodiVzKS4uLiIgIiRfTVNHX0lOU1RBTExJTkdfRFJPUEJPWCIgIiRfRFJPUEJPWF9DTURfTEFTVF9WRVJTSU9OIgogIGluc3RhbGxEcm9wYm94CiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCmZpOwo=' | base64 -d)
