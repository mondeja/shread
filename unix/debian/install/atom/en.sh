#!/bin/bash
_SCRIPT_FILENAME="$(basename "$0")" source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iVGhpcyBzY3JpcHQgbmVlZHMgdG8gYmUgZXhlY3V0ZWQgYXMgc3VwZXJ1c2VyLiIKX01TR19BTFJFQURZX0lOU1RBTExFRD0iaXMgYWxyZWFkeSBpbnN0YWxsZWQiCl9NU0dfQ0hFQ0tJTkdfQVRPTT0iQ2hlY2tpbmcgQXRvbS4uLiIKX01TR19FUlJPUl9PQlRBSU5JTkdfQVRPTV9QVUJMSUNfS0VZPSJBbiBlcnJvciBoYXBwZW4gcmVyaWV2aW5nIEF0b20gcHVibGljIGtleToiCl9NU0dfQURESU5HX1JFUE89IkFkZGluZyByZXBvc2l0b3J5Li4uIgpfTVNHX1VQREFUSU5HX1BBQ0tBR0VTPSJVcGRhdGluZyBwYWNrYWdlcy4uLiIKX01TR19BVE9NX0ZPVU5EPSJBdG9tIGZvdW5kIgpfTVNHX1JVTk5JTkdfSU5TVEFMTEFUSU9OX1NDUklQVD0iUnVubmluZyBpbnN0YWxsYXRpb24gc2NyaXB0Li4uIgpfTVNHX0VSUk9SX0lOU1RBTExJTkdfQVRPTT0iQW4gZXJyb3IgaGFwcGVuIGluc3RhbGxpbmcgQXRvbSIKaWYgW1sgJCgvdXNyL2Jpbi9pZCAtdSkgLW5lIDAgXV07IHRoZW4KICBwcmludGYgIiVzXG4iICIkX01TR19FWEVDVVRFRF9BU19TVVBFUlVTRVIiID4mMgogIGV4aXQgMQpmaTsKSU5ERU5UX1NUUklORz0iIgpmb3IgYXJnIGluICIkQCI7IGRvCiAgY2FzZSAkYXJnIGluCiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CnByaW50SW5kZW50CkFUT01fQklOQVJZX1BBVEg9IiQoY29tbWFuZCAtdiBhdG9tKSIKaWYgWyAiJEFUT01fQklOQVJZX1BBVEgiICE9ICIiIF07IHRoZW4KICBBVE9NX1ZFUlNJT049JCgKICAgIGFwbSAtdiB8IFwKICAgIHNlZCAtbiA0cCB8IFwKICAgIGN1dCAtZCcgJyAtZjIgfCBcCiAgICBzZWQgLXIgInMvXHgxQlxbKFswLTldezEsMn0oO1swLTldezEsMn0pPyk/W21HS10vL2ciKQogIHByaW50ZiAiQXRvbSB2JXMgJXMiICIkQVRPTV9WRVJTSU9OIiAiJF9NU0dfQUxSRUFEWV9JTlNUQUxMRUQiCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCmVsc2UKICBwcmludGYgIiVzXG4iICIkX01TR19DSEVDS0lOR19BVE9NIgogIGlmIFsgIiQoY29tbWFuZCAtdiBwYWNtYW4pIiA9ICIiIF07IHRoZW4KICAgIGlmIFsgIiRfU0NSSVBUX0ZJTEVOQU1FIiA9ICJtYWluLnNoIiBdOyB0aGVuCiAgICAgIGZpbGVwYXRoPSJzcmMvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC9tYWluLnNoIgogICAgICBiYXNoICIkZmlsZXBhdGgiID4gL2Rldi9udWxsCiAgICBlbHNlCiAgICAgIHVybD0iaHR0cHM6Ly9tb25kZWphLmdpdGh1Yi5pby9zaHJlYWQvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC8kX1NDUklQVF9GSUxFTkFNRSIKICAgICAgY3VybCAtc0wgIiR1cmwiIHwgc3VkbyBiYXNoIC0gPiAvZGV2L251bGwKICAgIGZpOwogIGZpOwogIElOU1RBTExBVElPTl9ERVBFTkRFTkNJRVM9KAogICAgIndnZXQiCiAgICAianEiCiAgKQogIGZvciBERVAgaW4gIiR7SU5TVEFMTEFUSU9OX0RFUEVOREVOQ0lFU1tAXX0iOyBkbwogICAgaWYgW1sgIiQoc3VkbyBwYWNtYW4gLVFpICIkREVQIiAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogICAgICBzdWRvIHBhY21hbiAtUyAiJERFUCIgPiAvZGV2L251bGwgfHwgZXhpdCAkPwogICAgZmk7CiAgZG9uZTsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcy4uLiIgIiRfTVNHX0FERElOR19SRVBPIgogIFNJR05fQVRPTV9HUEdfS0VZX1NUREVSUj0kKAogICAgd2dldCAtcU8gLSBodHRwczovL3BhY2thZ2VjbG91ZC5pby9BdG9tRWRpdG9yL2F0b20vZ3Bna2V5IHwgXAogICAgc3VkbyBhcHQta2V5IGFkZCAtIDI+JjEgPiAvZGV2L251bGwpCiAgU0lHTl9BVE9NX0dQR19LRVlfRVhJVF9DT0RFPSQ/CiAgaWYgWyAkU0lHTl9BVE9NX0dQR19LRVlfRVhJVF9DT0RFIC1uZSAwIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiXG4lc1xuIiAiJF9NU0dfRVJST1JfT0JUQUlOSU5HX0FUT01fUFVCTElDX0tFWSIgPiYyCiAgICBwcmludGYgIiVzXG4iICIkU0lHTl9BVE9NX0dQR19LRVlfU1RERVJSIiA+JjIKICAgIGV4aXQgJFNJR05fQVRPTV9HUEdfS0VZX0VYSVRfQ09ERQogIGZpOwogIEFSQ0g9ImFtZDY0IgogIGNhc2UgJCh1bmFtZSAtbSkgaW4KICAgICAgaTM4NikgICBBUkNIPSIzODYiIDs7CiAgICAgIGk2ODYpICAgQVJDSD0iMzg2IiA7OwogICAgICB4ODZfNjQpIEFSQ0g9ImFtZDY0IiA7OwogICAgICBhcm0pICAgIGRwa2cgLS1wcmludC1hcmNoaXRlY3R1cmUgfCBncmVwIC1xICJhcm02NCIgJiYgQVJDSD0iYXJtNjQiIHx8IEFSQ0g9ImFybSIgOzsKICBlc2FjCiAgZWNobyBcCiAgICAiZGViIFthcmNoPSR7QVJDSH1dIGh0dHBzOi8vcGFja2FnZWNsb3VkLmlvL0F0b21FZGl0b3IvYXRvbS9hbnkvIGFueSBtYWluIiBcCiAgICB8IHN1ZG8gdGVlIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2F0b20ubGlzdAogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzIiAiJF9NU0dfVVBEQVRJTkdfUEFDS0FHRVMiCiAgc3VkbyBwYWNtYW4gdXBkYXRlID4gL2Rldi9udWxsCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgQVRPTV9WRVJTSU9OPSIkKHBhY21hbiAtUWkgYXRvbSB8IGdyZXAgVmVyc2lvbiB8IGN1dCAtZCcgJyAtZjIpIgogIGlmIFsgIiRBVE9NX1ZFUlNJT04iICE9ICIiIF07IHRoZW4KICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiAgJXMgKHYlcykiICIkX01TR19BVE9NX0ZPVU5EIiAiJEFUT01fVkVSU0lPTiIKICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGZpOwogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzIiAiJF9NU0dfUlVOTklOR19JTlNUQUxMQVRJT05fU0NSSVBUIgogIElOU1RBTExfQVRPTV9TVERFUlI9IiQoc3VkbyBwYWNtYW4gLVMgYXRvbSA+IC9kZXYvbnVsbCkiCiAgSU5TVEFMTF9BVE9NX0VYSVRfQ09ERT0kPwogIGlmIFsgIiRJTlNUQUxMX0FUT01fRVhJVF9DT0RFIiAtbmUgMCBdOyB0aGVuCiAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICBwcmludGYgIlxuJXMiICIkX01TR19FUlJPUl9JTlNUQUxMSU5HX0FUT00iID4mMgogICAgaWYgWyAiJEFUT01fVkVSU0lPTiIgIT0gIiIgXTsgdGhlbgogICAgICBwcmludGYgIiAodiVzKSIgIiRBVE9NX1ZFUlNJT04iID4mMgogICAgZmk7CiAgICBwcmludGYgIjpcbiVzXG4iICIkSU5TVEFMTF9BVE9NX1NUREVSUiIgPiYyCiAgICBleGl0ICRJTlNUQUxMX0FUT01fRVhJVF9DT0RFCiAgZmk7CiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCmZpOwo=' | base64 -d)
