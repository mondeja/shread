#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVuLnNoCiMhL2Jpbi9iYXNoCl9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSPSJUaGlzIHNjcmlwdCBuZWVkcyB0byBiZSBleGVjdXRlZCBhcyBzdXBlcnVzZXIuIgpfTVNHX0FMUkVBRFlfSU5TVEFMTEVEPSJpcyBhbHJlYWR5IGluc3RhbGxlZCIKX01TR19DSEVDS0lOR19BVE9NPSJDaGVja2luZyBBdG9tLi4uIgpfTVNHX0VSUk9SX09CVEFJTklOR19BVE9NX1BVQkxJQ19LRVk9IkFuIGVycm9yIGhhcHBlbiByZXJpZXZpbmcgQXRvbSBwdWJsaWMga2V5OiIKX01TR19BRERJTkdfUkVQTz0iQWRkaW5nIHJlcG9zaXRvcnkuLi4iCl9NU0dfVVBEQVRJTkdfUEFDS0FHRVM9IlVwZGF0aW5nIHBhY2thZ2VzLi4uIgpfTVNHX0FUT01fRk9VTkQ9IkF0b20gZm91bmQiCl9NU0dfUlVOTklOR19JTlNUQUxMQVRJT05fU0NSSVBUPSJSdW5uaW5nIGluc3RhbGxhdGlvbiBzY3JpcHQuLi4iCl9NU0dfRVJST1JfSU5TVEFMTElOR19BVE9NPSJBbiBlcnJvciBoYXBwZW4gaW5zdGFsbGluZyBBdG9tIgpJTkRFTlRfU1RSSU5HPSIiCmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC0taW5kZW50KQogICAgc2hpZnQKICAgIElOREVOVF9TVFJJTkc9JDEKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KZnVuY3Rpb24gaW5zdGFsbFNjcmlwdERlcGVuZGVuY2llcygpIHsKICBpZiBbICIkKGNvbW1hbmQgLXYgcGFjbWFuKSIgPSAiIiBdOyB0aGVuCiAgICBpZiBbIC16ICIkX1NDUklQVF9GSUxFTkFNRSIgXTsgdGhlbgogICAgICBmaWxlcGF0aD0ic3JjL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvbWFpbi5zaCIKICAgICAgYmFzaCAiJGZpbGVwYXRoIiA+IC9kZXYvbnVsbAogICAgZWxzZQogICAgICB1cmw9Imh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvJF9TQ1JJUFRfRklMRU5BTUUiCiAgICAgIGN1cmwgLXNMICIkdXJsIiB8IHN1ZG8gYmFzaCAtID4gL2Rldi9udWxsCiAgICBmaTsKICBmaTsKICBJTlNUQUxMQVRJT05fREVQRU5ERU5DSUVTPSgKICAgICJ3Z2V0IgogICAgImpxIgogICAgImdudXBnMiIKICApCiAgZm9yIERFUCBpbiAiJHtJTlNUQUxMQVRJT05fREVQRU5ERU5DSUVTW0BdfSI7IGRvCiAgICBpZiBbWyAiJChzdWRvIHBhY21hbiAtUWkgIiRERVAiIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgICAgIHN1ZG8gcGFjbWFuIC1TIC0tIC15ICIkREVQIiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgICBmaTsKICBkb25lOwp9CmZ1bmN0aW9uIHNpZ25BdG9tR3BnS2V5KCkgewogIFNJR05fQVRPTV9HUEdfS0VZX1NUREVSUj0kKAogICAgd2dldCAtcU8gLSBodHRwczovL3BhY2thZ2VjbG91ZC5pby9BdG9tRWRpdG9yL2F0b20vZ3Bna2V5IHwgXAogICAgc3VkbyBhcHQta2V5IGFkZCAtIDI+JjEgPiAvZGV2L251bGwpCiAgU0lHTl9BVE9NX0dQR19LRVlfRVhJVF9DT0RFPSQ/CiAgaWYgWyAkU0lHTl9BVE9NX0dQR19LRVlfRVhJVF9DT0RFIC1uZSAwIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiXG4lc1xuIiAiJF9NU0dfRVJST1JfT0JUQUlOSU5HX0FUT01fUFVCTElDX0tFWSIgPiYyCiAgICBwcmludGYgIiVzXG4iICIkU0lHTl9BVE9NX0dQR19LRVlfU1RERVJSIiA+JjIKICAgIGV4aXQgJFNJR05fQVRPTV9HUEdfS0VZX0VYSVRfQ09ERQogIGZpOwp9CmZ1bmN0aW9uIGFkZEF0b21SZXBvc2l0b3J5VG9Tb3VyY2VzKCkgewogIGlmIFsgISAtZiAiL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvYXRvbS5saXN0IiBdOyB0aGVuCiAgICBBUkNIPSJhbWQ2NCIKICAgIGNhc2UgJCh1bmFtZSAtbSkgaW4KICAgICAgICBpMzg2KSAgIEFSQ0g9IjM4NiIgOzsKICAgICAgICBpNjg2KSAgIEFSQ0g9IjM4NiIgOzsKICAgICAgICB4ODZfNjQpIEFSQ0g9ImFtZDY0IiA7OwogICAgICAgIGFybSkgICAgZHBrZyAtLXByaW50LWFyY2hpdGVjdHVyZSB8IGdyZXAgLXEgImFybTY0IiAmJiBBUkNIPSJhcm02NCIgfHwgQVJDSD0iYXJtIiA7OwogICAgZXNhYwogICAgZWNobyBcCiAgICAgICJkZWIgW2FyY2g9JHtBUkNIfV0gaHR0cHM6Ly9wYWNrYWdlY2xvdWQuaW8vQXRvbUVkaXRvci9hdG9tL2FueS8gYW55IG1haW4iIFwKICAgICAgfCBzdWRvIHRlZSAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9hdG9tLmxpc3QKICBmaTsKfQpmdW5jdGlvbiB1cGRhdGVQYWNrYWdlcygpIHsKICBzdWRvIHBhY21hbiB1cGRhdGUgPiAvZGV2L251bGwKfQpBVE9NX1ZFUlNJT049IiIKZnVuY3Rpb24gZ2V0QXRvbVZlcnNpb24oKSB7CiAgQVRPTV9WRVJTSU9OPSIkKHBhY21hbiAtU2kgYXRvbSB8IGdyZXAgVmVyc2lvbjogfCBoZWFkIC1uIDEgfCBjdXQgLWQgJyAnIC1mMikiCn0KZnVuY3Rpb24gaW5zdGFsbEF0b20oKSB7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiVzXG4iICIkX01TR19DSEVDS0lOR19BVE9NIgogIGluc3RhbGxTY3JpcHREZXBlbmRlbmNpZXMKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcy4uLiIgIiRfTVNHX0FERElOR19SRVBPIgogIHNpZ25BdG9tR3BnS2V5CiAgYWRkQXRvbVJlcG9zaXRvcnlUb1NvdXJjZXMKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyIgIiRfTVNHX1VQREFUSU5HX1BBQ0tBR0VTIgogIHVwZGF0ZVBhY2thZ2VzCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZ2V0QXRvbVZlcnNpb24KICBpZiBbICIkQVRPTV9WRVJTSU9OIiAhPSAiIiBdOyB0aGVuCiAgICBwcmludEluZGVudAogICAgcHJpbnRmICIgICVzICh2JXMpIiAiJF9NU0dfQVRPTV9GT1VORCIgIiRBVE9NX1ZFUlNJT04iCiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBmaTsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyIgIiRfTVNHX1JVTk5JTkdfSU5TVEFMTEFUSU9OX1NDUklQVCIKICBJTlNUQUxMX0FUT01fU1RERVJSPSIkKHN1ZG8gcGFjbWFuIC1TIC0tIC15IGF0b20gPiAvZGV2L251bGwpIgogIElOU1RBTExfQVRPTV9FWElUX0NPREU9JD8KICBpZiBbICIkSU5TVEFMTF9BVE9NX0VYSVRfQ09ERSIgLW5lIDAgXTsgdGhlbgogICAgcHJpbnRmICIgXGVbOTFtXHhFMlx4OUNceDk1XGVbMzltXG4iID4mMgogICAgcHJpbnRmICJcbiVzIiAiJF9NU0dfRVJST1JfSU5TVEFMTElOR19BVE9NIiA+JjIKICAgIGlmIFsgIiRBVE9NX1ZFUlNJT04iICE9ICIiIF07IHRoZW4KICAgICAgcHJpbnRmICIgKHYlcykiICIkQVRPTV9WRVJTSU9OIiA+JjIKICAgIGZpOwogICAgcHJpbnRmICI6XG4lc1xuIiAiJElOU1RBTExfQVRPTV9TVERFUlIiID4mMgogICAgZXhpdCAkSU5TVEFMTF9BVE9NX0VYSVRfQ09ERQogIGZpOwogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgp9CmZ1bmN0aW9uIHByaW50QXRvbUluc3RhbGxlZE1zZygpIHsKICBwcmludEluZGVudAogIEFUT01fVkVSU0lPTj0kKAogICAgYXBtIC12IHwgXAogICAgc2VkIC1uIDRwIHwgXAogICAgY3V0IC1kJyAnIC1mMiB8IFwKICAgIHNlZCAtciAicy9ceDFCXFsoWzAtOV17MSwyfSg7WzAtOV17MSwyfSk/KT9bbUdLXS8vZyIpCiAgcHJpbnRmICJBdG9tIHYlcyAlcyIgIiRBVE9NX1ZFUlNJT04iICIkX01TR19BTFJFQURZX0lOU1RBTExFRCIKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBtYWluKCkgewogIEFUT01fQklOQVJZX1BBVEg9IiQoY29tbWFuZCAtdiBhdG9tKSIKICBpZiBbICIkQVRPTV9CSU5BUllfUEFUSCIgIT0gIiIgXTsgdGhlbgogICAgcHJpbnRBdG9tSW5zdGFsbGVkTXNnCiAgZWxzZQogICAgaW5zdGFsbEF0b20KICBmaTsKfQpmdW5jdGlvbiBleHBvcnRWYXJpYWJsZXMoKSB7CiAgc2lnbkF0b21HcGdLZXkKICBhZGRBdG9tUmVwb3NpdG9yeVRvU291cmNlcwogIHVwZGF0ZVBhY2thZ2VzCiAgZ2V0QXRvbVZlcnNpb24KICBleHBvcnQgQVRPTV9WRVJTSU9OCn0KaWYgKHJldHVybiAwIDI+L2Rldi9udWxsKTsgdGhlbgogIGV4cG9ydFZhcmlhYmxlcwplbHNlCiAgaWYgW1sgJCgvdXNyL2Jpbi9pZCAtdSkgLW5lIDAgXV07IHRoZW4KICAgIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUiIgPiYyCiAgICBleGl0IDEKICBmaTsKICBtYWluCmZpOw=='
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
