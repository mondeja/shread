#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVzLnNoCiMhL2Jpbi9iYXNoCl9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSPSJFc3RlIHNjcmlwdCBuZWNlc2l0YSBzZXIgZWplY3V0YWRvIGNvbW8gc3VwZXJ1c3VhcmlvLiIKX01TR19BTFJFQURZX0lOU1RBTExFRD0ieWEgc2UgZW5jdWVudHJhIGluc3RhbGFkbyIKX01TR19DSEVDS0lOR19BVE9NPSJDb21wcm9iYW5kbyBBdG9tIgpfTVNHX0VSUk9SX09CVEFJTklOR19BVE9NX1BVQkxJQ19LRVk9Ik9jdXJyacOzIHVuIGVycm9yIG9idGVuaWVuZG8gbGEgY2xhdmUgcMO6YmxpY2EgZGUgQXRvbSIKX01TR19BRERJTkdfUkVQTz0iQcOxYWRpZW5kbyByZXBvc2l0b3JpbyIKX01TR19VUERBVElOR19QQUNLQUdFUz0iQWN0dWFsaXphbmRvIHBhcXVldGVzLi4uIgpfTVNHX0FUT01fRk9VTkQ9IkF0b20gZW5jb250cmFkbyIKX01TR19SVU5OSU5HX0lOU1RBTExBVElPTl9TQ1JJUFQ9IkVqZWN1dGFuZG8gc2NyaXB0IGRlIGluc3RhbGFjacOzbi4uLiIKX01TR19FUlJPUl9JTlNUQUxMSU5HX0FUT009Ik9jdXJyacOzIHVuIGVycm9yIGluc3RhbGFuZG8gQXRvbSIKSU5ERU5UX1NUUklORz0iIgpmb3IgYXJnIGluICIkQCI7IGRvCiAgY2FzZSAkYXJnIGluCiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CmZ1bmN0aW9uIGluc3RhbGxTY3JpcHREZXBlbmRlbmNpZXMoKSB7CiAgaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXTsgdGhlbgogICAgaWYgWyAteiAiJF9TQ1JJUFRfRklMRU5BTUUiIF07IHRoZW4KICAgICAgZmlsZXBhdGg9InNyYy91bml4L18vZG93bmxvYWQvcGFjYXB0L21haW4uc2giCiAgICAgIGJhc2ggIiRmaWxlcGF0aCIgPiAvZGV2L251bGwKICAgIGVsc2UKICAgICAgdXJsPSJodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vZG93bmxvYWQvcGFjYXB0LyRfU0NSSVBUX0ZJTEVOQU1FIgogICAgICBjdXJsIC1zTCAiJHVybCIgfCBzdWRvIGJhc2ggLSA+IC9kZXYvbnVsbAogICAgZmk7CiAgZmk7CiAgSU5TVEFMTEFUSU9OX0RFUEVOREVOQ0lFUz0oCiAgICAid2dldCIKICAgICJqcSIKICAgICJnbnVwZzIiCiAgKQogIGZvciBERVAgaW4gIiR7SU5TVEFMTEFUSU9OX0RFUEVOREVOQ0lFU1tAXX0iOyBkbwogICAgaWYgW1sgIiQoc3VkbyBwYWNtYW4gLVFpICIkREVQIiAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogICAgICBzdWRvIHBhY21hbiAtUyAtLSAteSAiJERFUCIgPiAvZGV2L251bGwgfHwgZXhpdCAkPwogICAgZmk7CiAgZG9uZTsKfQpmdW5jdGlvbiBzaWduQXRvbUdwZ0tleSgpIHsKICBTSUdOX0FUT01fR1BHX0tFWV9TVERFUlI9JCgKICAgIHdnZXQgLXFPIC0gaHR0cHM6Ly9wYWNrYWdlY2xvdWQuaW8vQXRvbUVkaXRvci9hdG9tL2dwZ2tleSB8IFwKICAgIHN1ZG8gYXB0LWtleSBhZGQgLSAyPiYxID4gL2Rldi9udWxsKQogIFNJR05fQVRPTV9HUEdfS0VZX0VYSVRfQ09ERT0kPwogIGlmIFsgJFNJR05fQVRPTV9HUEdfS0VZX0VYSVRfQ09ERSAtbmUgMCBdOyB0aGVuCiAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICBwcmludGYgIlxuJXNcbiIgIiRfTVNHX0VSUk9SX09CVEFJTklOR19BVE9NX1BVQkxJQ19LRVkiID4mMgogICAgcHJpbnRmICIlc1xuIiAiJFNJR05fQVRPTV9HUEdfS0VZX1NUREVSUiIgPiYyCiAgICBleGl0ICRTSUdOX0FUT01fR1BHX0tFWV9FWElUX0NPREUKICBmaTsKfQpmdW5jdGlvbiBhZGRBdG9tUmVwb3NpdG9yeVRvU291cmNlcygpIHsKICBpZiBbICEgLWYgIi9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2F0b20ubGlzdCIgXTsgdGhlbgogICAgQVJDSD0iYW1kNjQiCiAgICBjYXNlICQodW5hbWUgLW0pIGluCiAgICAgICAgaTM4NikgICBBUkNIPSIzODYiIDs7CiAgICAgICAgaTY4NikgICBBUkNIPSIzODYiIDs7CiAgICAgICAgeDg2XzY0KSBBUkNIPSJhbWQ2NCIgOzsKICAgICAgICBhcm0pICAgIGRwa2cgLS1wcmludC1hcmNoaXRlY3R1cmUgfCBncmVwIC1xICJhcm02NCIgJiYgQVJDSD0iYXJtNjQiIHx8IEFSQ0g9ImFybSIgOzsKICAgIGVzYWMKICAgIGVjaG8gXAogICAgICAiZGViIFthcmNoPSR7QVJDSH1dIGh0dHBzOi8vcGFja2FnZWNsb3VkLmlvL0F0b21FZGl0b3IvYXRvbS9hbnkvIGFueSBtYWluIiBcCiAgICAgIHwgc3VkbyB0ZWUgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvYXRvbS5saXN0CiAgZmk7Cn0KZnVuY3Rpb24gdXBkYXRlUGFja2FnZXMoKSB7CiAgc3VkbyBwYWNtYW4gdXBkYXRlID4gL2Rldi9udWxsCn0KQVRPTV9WRVJTSU9OPSIiCmZ1bmN0aW9uIGdldEF0b21WZXJzaW9uKCkgewogIEFUT01fVkVSU0lPTj0iJChwYWNtYW4gLVNpIGF0b20gfCBncmVwIFZlcnNpb246IHwgaGVhZCAtbiAxIHwgY3V0IC1kICcgJyAtZjIpIgp9CmZ1bmN0aW9uIGluc3RhbGxBdG9tKCkgewogIHByaW50SW5kZW50CiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfQVRPTSIKICBpbnN0YWxsU2NyaXB0RGVwZW5kZW5jaWVzCiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMuLi4iICIkX01TR19BRERJTkdfUkVQTyIKICBzaWduQXRvbUdwZ0tleQogIGFkZEF0b21SZXBvc2l0b3J5VG9Tb3VyY2VzCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMiICIkX01TR19VUERBVElOR19QQUNLQUdFUyIKICB1cGRhdGVQYWNrYWdlcwogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGdldEF0b21WZXJzaW9uCiAgaWYgWyAiJEFUT01fVkVSU0lPTiIgIT0gIiIgXTsgdGhlbgogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAlcyAodiVzKSIgIiRfTVNHX0FUT01fRk9VTkQiICIkQVRPTV9WRVJTSU9OIgogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZmk7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMiICIkX01TR19SVU5OSU5HX0lOU1RBTExBVElPTl9TQ1JJUFQiCiAgSU5TVEFMTF9BVE9NX1NUREVSUj0iJChzdWRvIHBhY21hbiAtUyAtLSAteSBhdG9tID4gL2Rldi9udWxsKSIKICBJTlNUQUxMX0FUT01fRVhJVF9DT0RFPSQ/CiAgaWYgWyAiJElOU1RBTExfQVRPTV9FWElUX0NPREUiIC1uZSAwIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiXG4lcyIgIiRfTVNHX0VSUk9SX0lOU1RBTExJTkdfQVRPTSIgPiYyCiAgICBpZiBbICIkQVRPTV9WRVJTSU9OIiAhPSAiIiBdOyB0aGVuCiAgICAgIHByaW50ZiAiICh2JXMpIiAiJEFUT01fVkVSU0lPTiIgPiYyCiAgICBmaTsKICAgIHByaW50ZiAiOlxuJXNcbiIgIiRJTlNUQUxMX0FUT01fU1RERVJSIiA+JjIKICAgIGV4aXQgJElOU1RBTExfQVRPTV9FWElUX0NPREUKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBwcmludEF0b21JbnN0YWxsZWRNc2coKSB7CiAgcHJpbnRJbmRlbnQKICBBVE9NX1ZFUlNJT049JCgKICAgIGFwbSAtdiB8IFwKICAgIHNlZCAtbiA0cCB8IFwKICAgIGN1dCAtZCcgJyAtZjIgfCBcCiAgICBzZWQgLXIgInMvXHgxQlxbKFswLTldezEsMn0oO1swLTldezEsMn0pPyk/W21HS10vL2ciKQogIHByaW50ZiAiQXRvbSB2JXMgJXMiICIkQVRPTV9WRVJTSU9OIiAiJF9NU0dfQUxSRUFEWV9JTlNUQUxMRUQiCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gbWFpbigpIHsKICBBVE9NX0JJTkFSWV9QQVRIPSIkKGNvbW1hbmQgLXYgYXRvbSkiCiAgaWYgWyAiJEFUT01fQklOQVJZX1BBVEgiICE9ICIiIF07IHRoZW4KICAgIHByaW50QXRvbUluc3RhbGxlZE1zZwogIGVsc2UKICAgIGluc3RhbGxBdG9tCiAgZmk7Cn0KZnVuY3Rpb24gZXhwb3J0VmFyaWFibGVzKCkgewogIHNpZ25BdG9tR3BnS2V5CiAgYWRkQXRvbVJlcG9zaXRvcnlUb1NvdXJjZXMKICB1cGRhdGVQYWNrYWdlcwogIGdldEF0b21WZXJzaW9uCiAgZXhwb3J0IEFUT01fVkVSU0lPTgp9CmlmIChyZXR1cm4gMCAyPi9kZXYvbnVsbCk7IHRoZW4KICBleHBvcnRWYXJpYWJsZXMKZWxzZQogIGlmIFtbICQoL3Vzci9iaW4vaWQgLXUpIC1uZSAwIF1dOyB0aGVuCiAgICBwcmludGYgIiVzXG4iICIkX01TR19FWEVDVVRFRF9BU19TVVBFUlVTRVIiID4mMgogICAgZXhpdCAxCiAgZmk7CiAgbWFpbgpmaTs='
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
