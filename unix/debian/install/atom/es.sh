#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVzLnNoCl9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSPSJFc3RlIHNjcmlwdCBuZWNlc2l0YSBzZXIgZWplY3V0YWRvIGNvbW8gc3VwZXJ1c3VhcmlvLiIKX01TR19BTFJFQURZX0lOU1RBTExFRD0ieWEgc2UgZW5jdWVudHJhIGluc3RhbGFkbyIKX01TR19DSEVDS0lOR19BVE9NPSJDb21wcm9iYW5kbyBBdG9tIgpfTVNHX0VSUk9SX09CVEFJTklOR19BVE9NX1BVQkxJQ19LRVk9Ik9jdXJyacOzIHVuIGVycm9yIG9idGVuaWVuZG8gbGEgY2xhdmUgcMO6YmxpY2EgZGUgQXRvbSIKX01TR19BRERJTkdfUkVQTz0iQcOxYWRpZW5kbyByZXBvc2l0b3JpbyIKX01TR19VUERBVElOR19QQUNLQUdFUz0iQWN0dWFsaXphbmRvIHBhcXVldGVzLi4uIgpfTVNHX0FUT01fRk9VTkQ9IkF0b20gZW5jb250cmFkbyIKX01TR19SVU5OSU5HX0lOU1RBTExBVElPTl9TQ1JJUFQ9IkVqZWN1dGFuZG8gc2NyaXB0IGRlIGluc3RhbGFjacOzbiIKX01TR19FUlJPUl9JTlNUQUxMSU5HX0FUT009Ik9jdXJyacOzIHVuIGVycm9yIGluc3RhbGFuZG8gQXRvbSIKSU5ERU5UX1NUUklORz0iIgpmb3IgYXJnIGluICIkQCI7IGRvCiAgY2FzZSAkYXJnIGluCiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CmZ1bmN0aW9uIHNpZ25BdG9tR3BnS2V5KCkgewogIFNJR05fQVRPTV9HUEdfS0VZX1NUREVSUj0kKAogICAgd2dldCAtcU8gLSBodHRwczovL3BhY2thZ2VjbG91ZC5pby9BdG9tRWRpdG9yL2F0b20vZ3Bna2V5IHwgXAogICAgc3VkbyBhcHQta2V5IGFkZCAtIDI+JjEgPiAvZGV2L251bGwpCiAgU0lHTl9BVE9NX0dQR19LRVlfRVhJVF9DT0RFPSQ/CiAgaWYgWyAkU0lHTl9BVE9NX0dQR19LRVlfRVhJVF9DT0RFIC1uZSAwIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiXG4lc1xuIiAiJF9NU0dfRVJST1JfT0JUQUlOSU5HX0FUT01fUFVCTElDX0tFWSIgPiYyCiAgICBwcmludGYgIiVzXG4iICIkU0lHTl9BVE9NX0dQR19LRVlfU1RERVJSIiA+JjIKICAgIGV4aXQgJFNJR05fQVRPTV9HUEdfS0VZX0VYSVRfQ09ERQogIGZpOwp9CmZ1bmN0aW9uIGFkZEF0b21SZXBvc2l0b3J5VG9Tb3VyY2VzKCkgewogIGlmIFsgISAtZiAiL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvYXRvbS5saXN0IiBdOyB0aGVuCiAgICBBUkNIPSJhbWQ2NCIKICAgIGNhc2UgJCh1bmFtZSAtbSkgaW4KICAgICAgICBpMzg2KSAgIEFSQ0g9IjM4NiIgOzsKICAgICAgICBpNjg2KSAgIEFSQ0g9IjM4NiIgOzsKICAgICAgICB4ODZfNjQpIEFSQ0g9ImFtZDY0IiA7OwogICAgICAgIGFybSkgICAgZHBrZyAtLXByaW50LWFyY2hpdGVjdHVyZSB8IGdyZXAgLXEgImFybTY0IiAmJiBBUkNIPSJhcm02NCIgfHwgQVJDSD0iYXJtIiA7OwogICAgZXNhYwogICAgZWNobyBcCiAgICAgICJkZWIgW2FyY2g9JHtBUkNIfV0gaHR0cHM6Ly9wYWNrYWdlY2xvdWQuaW8vQXRvbUVkaXRvci9hdG9tL2FueS8gYW55IG1haW4iIFwKICAgICAgfCBzdWRvIHRlZSAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9hdG9tLmxpc3QKICBmaTsKfQpmdW5jdGlvbiB1cGRhdGVQYWNrYWdlcygpIHsKICBzdWRvIHBhY21hbiB1cGRhdGUgPiAvZGV2L251bGwKfQpBVE9NX1ZFUlNJT049IiIKZnVuY3Rpb24gZ2V0QXRvbVZlcnNpb24oKSB7CiAgQVRPTV9WRVJTSU9OPSIkKHBhY21hbiAtU2kgYXRvbSB8IGdyZXAgVmVyc2lvbjogfCBoZWFkIC1uIDEgfCBjdXQgLWQgJyAnIC1mMikiCn0KZnVuY3Rpb24gaW5zdGFsbEF0b20oKSB7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiVzXG4iICIkX01TR19DSEVDS0lOR19BVE9NIgogIGlmIFsgIiQoY29tbWFuZCAtdiBwYWNtYW4pIiA9ICIiIF07IHRoZW4KICAgIGlmIFsgLXogIiRfU0NSSVBUX0ZJTEVOQU1FIiBdOyB0aGVuCiAgICAgIGZpbGVwYXRoPSJzcmMvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC9tYWluLnNoIgogICAgICBiYXNoICIkZmlsZXBhdGgiID4gL2Rldi9udWxsCiAgICBlbHNlCiAgICAgIHVybD0iaHR0cHM6Ly9tb25kZWphLmdpdGh1Yi5pby9zaHJlYWQvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC8kX1NDUklQVF9GSUxFTkFNRSIKICAgICAgY3VybCAtc0wgIiR1cmwiIHwgc3VkbyBiYXNoIC0gPiAvZGV2L251bGwKICAgIGZpOwogIGZpOwogIElOU1RBTExBVElPTl9ERVBFTkRFTkNJRVM9KAogICAgIndnZXQiCiAgICAianEiCiAgICAiZ251cGcyIgogICkKICBmb3IgREVQIGluICIke0lOU1RBTExBVElPTl9ERVBFTkRFTkNJRVNbQF19IjsgZG8KICAgIGlmIFtbICIkKHN1ZG8gcGFjbWFuIC1RaSAiJERFUCIgMj4gL2Rldi9udWxsIHwgZ3JlcCBTdGF0dXMpIiAhPSAiU3RhdHVzOiBpbnN0YWxsIG9rIGluc3RhbGxlZCIgXV07IHRoZW4KICAgICAgc3VkbyBwYWNtYW4gLVMgLS0gLXkgIiRERVAiID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICAgIGZpOwogIGRvbmU7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMuLi4iICIkX01TR19BRERJTkdfUkVQTyIKICBzaWduQXRvbUdwZ0tleQogIGFkZEF0b21SZXBvc2l0b3J5VG9Tb3VyY2VzCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMiICIkX01TR19VUERBVElOR19QQUNLQUdFUyIKICB1cGRhdGVQYWNrYWdlcwogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGdldEF0b21WZXJzaW9uCiAgaWYgWyAiJEFUT01fVkVSU0lPTiIgIT0gIiIgXTsgdGhlbgogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAlcyAodiVzKSIgIiRfTVNHX0FUT01fRk9VTkQiICIkQVRPTV9WRVJTSU9OIgogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZmk7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXMiICIkX01TR19SVU5OSU5HX0lOU1RBTExBVElPTl9TQ1JJUFQiCiAgSU5TVEFMTF9BVE9NX1NUREVSUj0iJChzdWRvIHBhY21hbiAtUyAtLSAteSBhdG9tID4gL2Rldi9udWxsKSIKICBJTlNUQUxMX0FUT01fRVhJVF9DT0RFPSQ/CiAgaWYgWyAiJElOU1RBTExfQVRPTV9FWElUX0NPREUiIC1uZSAwIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiXG4lcyIgIiRfTVNHX0VSUk9SX0lOU1RBTExJTkdfQVRPTSIgPiYyCiAgICBpZiBbICIkQVRPTV9WRVJTSU9OIiAhPSAiIiBdOyB0aGVuCiAgICAgIHByaW50ZiAiICh2JXMpIiAiJEFUT01fVkVSU0lPTiIgPiYyCiAgICBmaTsKICAgIHByaW50ZiAiOlxuJXNcbiIgIiRJTlNUQUxMX0FUT01fU1RERVJSIiA+JjIKICAgIGV4aXQgJElOU1RBTExfQVRPTV9FWElUX0NPREUKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBwcmludEF0b21JbnN0YWxsZWRNc2coKSB7CiAgcHJpbnRJbmRlbnQKICBBVE9NX1ZFUlNJT049JCgKICAgIGFwbSAtdiB8IFwKICAgIHNlZCAtbiA0cCB8IFwKICAgIGN1dCAtZCcgJyAtZjIgfCBcCiAgICBzZWQgLXIgInMvXHgxQlxbKFswLTldezEsMn0oO1swLTldezEsMn0pPyk/W21HS10vL2ciKQogIHByaW50ZiAiQXRvbSB2JXMgJXMiICIkQVRPTV9WRVJTSU9OIiAiJF9NU0dfQUxSRUFEWV9JTlNUQUxMRUQiCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gbWFpbigpIHsKICBBVE9NX0JJTkFSWV9QQVRIPSIkKGNvbW1hbmQgLXYgYXRvbSkiCiAgaWYgWyAiJEFUT01fQklOQVJZX1BBVEgiICE9ICIiIF07IHRoZW4KICAgIHByaW50QXRvbUluc3RhbGxlZE1zZwogIGVsc2UKICAgIGluc3RhbGxBdG9tCiAgZmk7Cn0KZnVuY3Rpb24gZXhwb3J0VmFyaWFibGVzKCkgewogIHNpZ25BdG9tR3BnS2V5CiAgYWRkQXRvbVJlcG9zaXRvcnlUb1NvdXJjZXMKICB1cGRhdGVQYWNrYWdlcwogIGdldEF0b21WZXJzaW9uCiAgZXhwb3J0IEFUT01fVkVSU0lPTgp9CmlmIChyZXR1cm4gMCAyPi9kZXYvbnVsbCk7IHRoZW4KICBleHBvcnRWYXJpYWJsZXMKZWxzZQogIGlmIFtbICQoL3Vzci9iaW4vaWQgLXUpIC1uZSAwIF1dOyB0aGVuCiAgICBwcmludGYgIiVzXG4iICIkX01TR19FWEVDVVRFRF9BU19TVVBFUlVTRVIiID4mMgogICAgZXhpdCAxCiAgZmk7CiAgbWFpbgpmaTsK'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
