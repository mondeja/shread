#!/bin/bash
_SCRIPT_FILENAME="$(basename "$0")" source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iRXN0ZSBzY3JpcHQgbmVjZXNpdGEgc2VyIGVqZWN1dGFkbyBjb21vIHN1cGVydXN1YXJpby4iCl9NU0dfQ0hFQ0tJTkdfUEFORE9DPSJDb21wcm9iYW5kbyBQYW5kb2MuLi4iCl9NU0dfRVJST1JfUkVUUklFVklOR19QQU5ET0NfUkVMRUFTRVM9Ik9jdXJyacOzIHVuIGVycm9yIG9idGVuaWVuZG8gbGEgaW5mb3JtYWNpw7NuIGRlIGxhcyByZWxlYXNlcyBkZSBQYW5kb2MgZGUgbGEgQVBJIGRlIEdpdGh1Yi4iCl9NU0dfVVJMPSJVUkwiCl9NU0dfRVJST1I9IkVycm9yIgpfTVNHX0VSUk9SX0NPREU9IkPDs2RpZ28gZGUgZXJyb3IiCl9NU0dfUkVUUklFVklOR19MQVNURVNUX0FWQUlMQUJMRV9WRVJTSU9OPSJPYnRlbmllbmRvIGxhIMO6bHRpbWEgdmVyc2nDs24gZGlzcG9uaWJsZSBkZSBQYW5kb2MuLi4iCl9NU0dfRE9XTkxPQURJTkdfUEFDS0FHRT0iRGVzY2FyZ2FuZG8gcGFxdWV0ZS4uLiIKX01TR19FUlJPUl9SRVRSSUVWSU5HX0xBU1RFU1RfUEFORE9DX1ZFUlNJT049Ik9jdXJyacOzIHVuIGVycm9yIG9idGVuaWVuZG8gbGEgw7psdGltYSB2ZXJzacOzbiBkZSBQYW5kb2MuIgpfTVNHX0VSUk9SX0RPV05MT0FESU5HX1BBTkRPQz0iT2N1cnJpw7MgdW4gZXJyb3IgZGVzY2FyZ2FuZG8gUGFuZG9jIgpfTVNHX05PVF9GT1VORD0iTm8gZW5jb250cmFkbyIKX01TR19JTlNUQUxMSU5HPSJJbnN0YWxhbmRvLi4uIgpfTVNHX1BBTkRPQ19GT1VORF9JTlNUQUxMRUQ9IkhhIHNpZG8gZW5jb250cmFkbyBQYW5kb2MgaW5zdGFsYWRvIGVuIGVsIHNpc3RlbWEiCl9NU0dfVVBEQVRJTkdfUEFORE9DPSJBY3R1YWxpemFuZG8gUGFuZG9jIgppZiBbWyAkKC91c3IvYmluL2lkIC11KSAtbmUgMCBdXTsgdGhlbgogIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUiIgPiYyCiAgZXhpdCAxCmZpOwpJTkRFTlRfU1RSSU5HPSIiCkdJVEhVQl9BUElfQ1VSTF9BVVRIPSIiCmlmIFsgLW4gIiRHSVRIVUJfVVNFUk5BTUUiIF0gJiYgWyAtbiAiJEdJVEhVQl9UT0tFTiIgXTsgdGhlbgogIEdJVEhVQl9BUElfQ1VSTF9BVVRIPSIkR0lUSFVCX1VTRVJOQU1FOiRHSVRIVUJfVE9LRU4iCmZpOwpmb3IgYXJnIGluICIkQCI7IGRvCiAgY2FzZSAkYXJnIGluCiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CnByaW50SW5kZW50CnByaW50ZiAiJXNcbiIgIiRfTVNHX0NIRUNLSU5HX1BBTkRPQyIKaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXTsgdGhlbgogIGlmIFsgIiRfU0NSSVBUX0ZJTEVOQU1FIiA9ICJtYWluLnNoIiBdOyB0aGVuCiAgICBmaWxlcGF0aD0ic3JjL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvbWFpbi5zaCIKICAgIGJhc2ggIiRmaWxlcGF0aCIgPiAvZGV2L251bGwKICBlbHNlCiAgICB1cmw9Imh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvJF9TQ1JJUFRfRklMRU5BTUUiCiAgICBjdXJsIC1zTCAiJHVybCIgfCBzdWRvIGJhc2ggLSA+IC9kZXYvbnVsbAogIGZpOwpmaTsKSU5TVEFMTEFUSU9OX0RFUEVOREVOQ0lFUz0oCiAgImN1cmwiCiAgImpxIgopCmZvciBERVAgaW4gIiR7SU5TVEFMTEFUSU9OX0RFUEVOREVOQ0lFU1tAXX0iOyBkbwogIGlmIFtbICIkKHN1ZG8gcGFjbWFuIC1RaSAiJERFUCIgMj4gL2Rldi9udWxsIHwgZ3JlcCBTdGF0dXMpIiAhPSAiU3RhdHVzOiBpbnN0YWxsIG9rIGluc3RhbGxlZCIgXV07IHRoZW4KICAgIHN1ZG8gcGFjbWFuIC1TICIkREVQIiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgZmk7CmRvbmU7Cl9HRVRfUEFORE9DX1ZFUlNJT05fSU5ERVg9MApfR0VUX1BBTkRPQ19WRVJTSU9OXzQwNF9BVFRFTVBUUz0wCl9HRVRfUEFORE9DX1ZFUlNJT05fNDA0X01BWF9BVFRFTVBUUz0xMApmdW5jdGlvbiBjaGVja1BhbmRvY1ZlcnNpb25Ub0Rvd25sb2FkRXhpc3RzKCkgewogIF9ET1dOTE9BRF9QQU5ET0NfVVJMPSJodHRwczovL2dpdGh1Yi5jb20vamdtL3BhbmRvYy9yZWxlYXNlcy9kb3dubG9hZC8kX1BBTkRPQ19MQVNURVNUX1ZFUlNJT04vcGFuZG9jLSRfUEFORE9DX0xBU1RFU1RfVkVSU0lPTi0xLWFtZDY0LmRlYiIKICBfRE9XTkxPQURfUEFORE9DX1VSTF9FWElTVFM9MAogIGlmIGN1cmwgLS1vdXRwdXQgL2Rldi9udWxsIC0tc2lsZW50IC0taGVhZCAtLWZhaWwgIiRfRE9XTkxPQURfUEFORE9DX1VSTCI7IHRoZW4KICAgIF9ET1dOTE9BRF9QQU5ET0NfVVJMX0VYSVNUUz0xCiAgZmk7Cn0KX0dFVF9QQU5ET0NfTEFURVNUX1ZFUlNJT05fQVRURU1QVFM9MApfR0VUX1BBTkRPQ19MQVRFU1RfVkVSU0lPTl9NQVhfQVRURU1QVFM9NQpfR0VUX1BBTkRPQ19MQVRFU1RfVkVSU0lPTl9VUkw9Imh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvamdtL3BhbmRvYy9yZWxlYXNlcyIKZnVuY3Rpb24gZ2V0UGFuZG9jTGF0ZXN0VmVyc2lvbigpIHsKICBfUEFORE9DX1JFTEVBU0VTX0lORk89IiQoY3VybCAtc0wgIiRHSVRIVUJfQVBJX0NVUkxfQVVUSCIgIiRfR0VUX1BBTkRPQ19MQVRFU1RfVkVSU0lPTl9VUkwiIDI+JjEpIgogIF9QQU5ET0NfUkVMRUFTRVNfSU5GT19NRVNTQUdFPSIkKGVjaG8gIiRfUEFORE9DX1JFTEVBU0VTX0lORk8iIHwganEgLXIgJy5tZXNzYWdlJyAyPiYxKSIKICBfUEFORE9DX1JFTEVBU0VTX0lORk9fTUVTU0FHRV9FWElUX0NPREU9JD8KICBpZiBbICRfUEFORE9DX1JFTEVBU0VTX0lORk9fTUVTU0FHRV9FWElUX0NPREUgLWVxIDAgXTsgdGhlbgogICAgcHJpbnRmICJcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICBwcmludGYgIlxuJXNcbiIgIiRfTVNHX0VSUk9SX1JFVFJJRVZJTkdfUEFORE9DX1JFTEVBU0VTIiA+JjIKICAgIHByaW50ZiAiJXM6ICVzXG4iICIkX01TR19VUkwiICIkX0dFVF9QQU5ET0NfTEFURVNUX1ZFUlNJT05fVVJMIiA+JjIKICAgIHByaW50ZiAiJXM6ICVzXG4iICIkX01TR19FUlJPUiIgIiRfUEFORE9DX1JFTEVBU0VTX0lORk9fTUVTU0FHRSIgPiYyCiAgICBleGl0ICRfUEFORE9DX1JFTEVBU0VTX0lORk9fTUVTU0FHRV9FWElUX0NPREUKICBmaTsKICBfUEFORE9DX0xBU1RFU1RfVkVSU0lPTj0kKAogICAgZWNobyAiJF9QQU5ET0NfUkVMRUFTRVNfSU5GTyIgfCBcCiAgICBqcSAtciAiLlskX0dFVF9QQU5ET0NfVkVSU0lPTl9JTkRFWF0udGFnX25hbWUiIDI+JjEKICApCiAgX0dFVF9QQU5ET0NfTEFURVNUX1ZFUlNJT05fRVhJVF9DT0RFPSQ/CiAgaWYgWyAkX0dFVF9QQU5ET0NfTEFURVNUX1ZFUlNJT05fRVhJVF9DT0RFIC1uZSAwIF07IHRoZW4KICAgICgoIF9HRVRfUEFORE9DX0xBVEVTVF9WRVJTSU9OX0FUVEVNUFRTKysgKSkKICAgIGlmIFsgJF9HRVRfUEFORE9DX0xBVEVTVF9WRVJTSU9OX0FUVEVNUFRTIC1nZSAkX0dFVF9QQU5ET0NfTEFURVNUX1ZFUlNJT05fTUFYX0FUVEVNUFRTIF07IHRoZW4KICAgICAgcHJpbnRmICJcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICAgIHByaW50ICJcbiVzXG4iICIkX01TR19FUlJPUl9SRVRSSUVWSU5HX0xBU1RFU1RfUEFORE9DX1ZFUlNJT04iID4mMgogICAgICBwcmludGYgIiVzOiAlc1xuIiAiJF9NU0dfVVJMIiAiJF9HRVRfUEFORE9DX0xBVEVTVF9WRVJTSU9OX1VSTCIgPiYyCiAgICAgIHByaW50ZiAiJXM6ICVzXG4iICIkX01TR19FUlJPUl9DT0RFIiAiJF9HRVRfUEFORE9DX0xBVEVTVF9WRVJTSU9OX0VYSVRfQ09ERSIgPiYyCiAgICAgIHByaW50ZiAiJXM6ICVzIiAiJF9NU0dfRVJST1IiICIkX1BBTkRPQ19MQVNURVNUX1ZFUlNJT04iID4mMgogICAgICBleGl0ICRfR0VUX1BBTkRPQ19MQVRFU1RfVkVSU0lPTl9FWElUX0NPREUKICAgIGVsc2UKICAgICAgZ2V0UGFuZG9jTGF0ZXN0VmVyc2lvbgogICAgZmk7CiAgZmk7CiAgY2hlY2tQYW5kb2NWZXJzaW9uVG9Eb3dubG9hZEV4aXN0cwogIGlmIFsgJF9ET1dOTE9BRF9QQU5ET0NfVVJMX0VYSVNUUyAtbmUgMSBdOyB0aGVuCiAgICAoKCBfR0VUX1BBTkRPQ19WRVJTSU9OXzQwNF9BVFRFTVBUUysrICkpCiAgICAoKCBfR0VUX1BBTkRPQ19WRVJTSU9OX0lOREVYKysgKSkKICAgIGdldFBhbmRvY0xhdGVzdFZlcnNpb24KICBlbHNlCiAgICBwcmludGYgIiAodiVzKSBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIgIiRfUEFORE9DX0xBU1RFU1RfVkVSU0lPTiIKICBmaTsKfQpwcmludEluZGVudApwcmludGYgIiAgJXMiICIkX01TR19SRVRSSUVWSU5HX0xBU1RFU1RfQVZBSUxBQkxFX1ZFUlNJT04iCmdldFBhbmRvY0xhdGVzdFZlcnNpb24KX1BBTkRPQ19GSUxFUEFUSD0iJChjb21tYW5kIC12IHBhbmRvYykiCl9QQU5ET0NfRklMRVBBVEhfRVhJVF9DT0RFPSQ/CmlmIFsgJF9QQU5ET0NfRklMRVBBVEhfRVhJVF9DT0RFIC1uZSAwIF07IHRoZW4KICBfUEFORE9DX0ZJTEVQQVRIPSIiCmZpOwpmdW5jdGlvbiBkb3dubG9hZFBhbmRvYygpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyIgIiRfTVNHX0RPV05MT0FESU5HX1BBQ0tBR0UiCiAgX0RPV05MT0FEX1BBTkRPQ19VUkw9Imh0dHBzOi8vZ2l0aHViLmNvbS9qZ20vcGFuZG9jL3JlbGVhc2VzL2Rvd25sb2FkLyRfUEFORE9DX0xBU1RFU1RfVkVSU0lPTi9wYW5kb2MtJF9QQU5ET0NfTEFTVEVTVF9WRVJTSU9OLTEtYW1kNjQuZGViIgogIF9ET1dOTE9BRF9QQU5ET0NfT1VUUFVUPSIkKHN1ZG8gY3VybCAtc0wgIiRfRE9XTkxPQURfUEFORE9DX1VSTCIgLW8gIiQxIiAyPiYxKSIKICBfRE9XTkxPQURfUEFORE9DX0VYSVRfQ09ERT0kPwogIGlmICBbICRfRE9XTkxPQURfUEFORE9DX0VYSVRfQ09ERSAtbmUgMCBdOyB0aGVuCiAgICBwcmludGYgIlxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiXG4lcyAodiVzKVxuIiAiJF9NU0dfRVJST1JfRE9XTkxPQURJTkdfUEFORE9DIiAiJF9QQU5ET0NfTEFTVEVTVF9WRVJTSU9OIiA+JjIKICAgIHByaW50ZiAiJXM6ICVzXG4iICIkX01TR19VUkwiICIkX0RPV05MT0FEX1BBTkRPQ19VUkwiID4mMgogICAgcHJpbnRmICIlczogJXNcbiIgIiRfTVNHX0VSUk9SIiAiJF9ET1dOTE9BRF9QQU5ET0NfT1VUUFVUIiA+JjIKICAgIGV4aXQgJF9ET1dOTE9BRF9QQU5ET0NfRVhJVF9DT0RFCiAgZmk7CiAgX1BBTkRPQ19CSU5BUllfQ09OVEVOVD0iJChzdWRvIGNhdCAiJDEiIHwgdHIgLWQgJ1wwJykiCiAgaWYgWyAiJF9QQU5ET0NfQklOQVJZX0NPTlRFTlQiID0gIk5vdCBGb3VuZCIgXTsgdGhlbgogICAgaWYgWyAkX0dFVF9QQU5ET0NfVkVSU0lPTl80MDRfQVRURU1QVFMgLWdlICRfR0VUX1BBTkRPQ19WRVJTSU9OXzQwNF9NQVhfQVRURU1QVFMgXTsgdGhlbgogICAgICBzdWRvIHJtIC1mICIkMSIKICAgICAgcHJpbnRmICJcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICAgIHByaW50ZiAiXG4lcyAodiVzKVxuIiAiJF9NU0dfRVJST1JfRE9XTkxPQURJTkdfUEFORE9DIiAiJF9QQU5ET0NfTEFTVEVTVF9WRVJTSU9OIiA+JjIKICAgICAgcHJpbnRmICIlczogJXNcbiIgIiRfTVNHX1VSTCIgIiRfRE9XTkxPQURfUEFORE9DX1VSTCIgPiYyCiAgICAgIHByaW50ZiAiJXM6IDQwNFxuIiAiJF9NU0dfRVJST1JfQ09ERSIgPiYyCiAgICAgIHByaW50ZiAiJXM6ICVzXG4iICIkX01TR19FUlJPUiIgIiRfUEFORE9DX0JJTkFSWV9DT05URU5UIiA+JjIKICAgICAgZXhpdCAxCiAgICBlbHNlCiAgICAgIHByaW50ZiAiICglcykgXGVbOTFtXHhFMlx4OUNceDk1XGVbMzltXG4iICIkX01TR19OT1RfRk9VTkQiCiAgICAgICgoIF9HRVRfUEFORE9DX1ZFUlNJT05fNDA0X0FUVEVNUFRTKysgKSkKICAgICAgKCggX0dFVF9QQU5ET0NfVkVSU0lPTl9JTkRFWCsrICkpCiAgICAgIGdldFBhbmRvY0xhdGVzdFZlcnNpb24KICAgICAgZG93bmxvYWRQYW5kb2MgIiQxIgogICAgZmk7CiAgZmk7CiAgc3VkbyBjaG1vZCAreCAiJDEiCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gaW5zdGFsbFBhbmRvYygpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlcyIgIiRfTVNHX0lOU1RBTExJTkciCiAgc3VkbyBkcGtnIC1pICIkMSIgPiAvZGV2L251bGwgfHwgZXhpdCAkPwogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIHJtIC1mICIkMSIKfQppZiBbICIkX1BBTkRPQ19GSUxFUEFUSCIgPSAiIiBdOyB0aGVuCiAgZG93bmxvYWRQYW5kb2Mgfi9wYW5kb2MuZGViCiAgaW5zdGFsbFBhbmRvYyB+L3BhbmRvYy5kZWIKZWxzZQogIF9QQU5ET0NfVkVSU0lPTl9PVVRQVVQ9IiQocGFuZG9jIC0tdmVyc2lvbiB8IGhlYWQgLW4gMSB8IGN1dCAtZCcgJyAtZjIpIgogIF9QQU5ET0NfVkVSU0lPTl9PVVRQVVRfRVhJVF9DT0RFPSQ/CiAgaWYgWyAkX1BBTkRPQ19WRVJTSU9OX09VVFBVVF9FWElUX0NPREUgLW5lIDAgXTsgdGhlbgogICAgc3VkbyBybSAtZiAiJChjb21tYW5kIC12IHBhbmRvYykiCiAgICBkb3dubG9hZFBhbmRvYyB+L3BhbmRvYy5kZWIKICAgIGluc3RhbGxQYW5kb2Mgfi9wYW5kb2MuZGViCiAgZWxzZQogICAgcHJpbnRJbmRlbnQKICAJcHJpbnRmICIgICVzICh2JXMpIiAiJF9NU0dfUEFORE9DX0ZPVU5EX0lOU1RBTExFRCIgIiRfUEFORE9DX1ZFUlNJT05fT1VUUFVUIgogICAgaWYgWyAiJF9QQU5ET0NfVkVSU0lPTl9PVVRQVVQiICE9ICIkX1BBTkRPQ19MQVNURVNUX1ZFUlNJT04iIF07IHRoZW4KICAgICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgICAgIHByaW50SW5kZW50CiAgICAgIHByaW50ZiAiICAlcyAodiVzIiAiJF9NU0dfVVBEQVRJTkdfUEFORE9DIiAiJF9QQU5ET0NfVkVSU0lPTl9PVVRQVVQiCiAgICAgIHByaW50ZiAiIC0+IHYlcykuLi5cbiIgIiRfUEFORE9DX0xBU1RFU1RfVkVSU0lPTiIKICAgICAgSU5ERU5UX1NUUklORz0iICAkSU5ERU5UX1NUUklORyIKICAgICAgc3VkbyBybSAtZiAkX1BBTkRPQ19GSUxFUEFUSAogICAgICBkb3dubG9hZFBhbmRvYyB+L3BhbmRvYy5kZWIKICAgICAgaW5zdGFsbFBhbmRvYyB+L3BhbmRvYy5kZWIKICAgIGVsc2UKICAgICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgICBmaTsKICBmaTsKZmk7Cg==' | base64 -d)
