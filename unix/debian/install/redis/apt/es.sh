#!/bin/bash
_SCRIPT_FILENAME="$(basename "$0")" source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iRXN0ZSBzY3JpcHQgbmVjZXNpdGEgc2VyIGVqZWN1dGFkbyBjb21vIHN1cGVydXN1YXJpby4iCl9NU0dfU0VUVElOR19SRURJU19FQ09TWVNURU09IkNvbmZpZ3VyYW5kbyBlY29zaXN0ZW1hIFJlZGlzLi4uIgpfTVNHX0NIRUNLSU5HX1BBQ0tBR0VTPSJDb21wcm9iYW5kbyBwYXF1ZXRlcy4uLiIKX01TR19DSEVDS0lOR19TRVJWSUNFX0NPTkZJRz0iQ29tcHJvYmFuZG8gY29uZmlndXJhY2nDs24gZGVsIHNlcnZpY2lvLi4uIgpfTVNHX0lUU19FTkFCTEVEPSJFc3TDoSBoYWJpbGl0YWRvIgpfTVNHX0VSUk9SX0VOQUJMSU5HX1NFUlZJQ0U9Ik9jdXJyacOzIHVuIGVycm9yIGhhYmlsaXRhbmRvIGVsIHNlcnZpY2lvICdyZWRpcy1zZXJ2ZXInLiIKX01TR19FWElUX0NPREU9IkPDs2RpZ28gZGUgc2FsaWRhIgpfTVNHX0VSUk9SPSJFcnJvciIKX01TR19JVFNfUlVOTklORz0iRXN0YSBlbiBlamVjdWNpw7NuIgpfTVNHX1NFUlZJQ0VfQ09VTEROVF9CRV9TVEFSVEVEPSJFbCBzZXJ2aWNpbyAncmVkaXMtc2VydmVyJyBubyBwdWRvIHNlciBpbmljaWFkby4iCl9NU0dfSVRTX09OX1NUQVRFPSJTZSBlbmN1ZW50cmEgZW4gZXN0YWRvIgppZiBbWyAkKC91c3IvYmluL2lkIC11KSAtbmUgMCBdXTsgdGhlbgogIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUiIgPiYyCiAgZXhpdCAxCmZpOwpJTkRFTlRfU1RSSU5HPSIiCmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC0taW5kZW50KQogICAgc2hpZnQKICAgIElOREVOVF9TVFJJTkc9JDEKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KcHJpbnRJbmRlbnQKcHJpbnRmICIlc1xuIiAiJF9NU0dfU0VUVElOR19SRURJU19FQ09TWVNURU0iCnByaW50SW5kZW50CnByaW50ZiAiICAlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfUEFDS0FHRVMiCnByaW50SW5kZW50CnByaW50ZiAiICAgIHJlZGlzLXNlcnZlciIKaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXTsgdGhlbgogIGlmIFsgIiRfU0NSSVBUX0ZJTEVOQU1FIiA9ICJtYWluLnNoIiBdOyB0aGVuCiAgICBmaWxlcGF0aD0ic3JjL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvbWFpbi5zaCIKICAgIGJhc2ggIiRmaWxlcGF0aCIgPiAvZGV2L251bGwKICBlbHNlCiAgICB1cmw9Imh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvJF9TQ1JJUFRfRklMRU5BTUUiCiAgICBjdXJsIC1zTCAiJHVybCIgfCBzdWRvIGJhc2ggLSA+IC9kZXYvbnVsbAogIGZpOwpmaTsKaWYgW1sgIiQoc3VkbyBwYWNtYW4gLVFpIHJlZGlzLXNlcnZlciAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogIHN1ZG8gcGFjbWFuIC1TIHJlZGlzLXNlcnZlciA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CmZpOwpfUkVESVNfU0VSVkVSX1ZFUlNJT049JChyZWRpcy1zZXJ2ZXIgLS12ZXJzaW9uIHwgY3V0IC1kJz0nIC1mMiB8IGN1dCAtZCcgJyAtZjEpCnByaW50ZiAiICh2JXMpIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIiAiJF9SRURJU19TRVJWRVJfVkVSU0lPTiIKcHJpbnRJbmRlbnQKcHJpbnRmICIgICVzXG4iICIkX01TR19DSEVDS0lOR19TRVJWSUNFX0NPTkZJRyIKcHJpbnRJbmRlbnQKcHJpbnRmICIgICAgJXMiICIkX01TR19JVFNfRU5BQkxFRCIKX1JFRElTX1NFUlZJQ0VfRU5BQkxFRF9GT1VORD0kKHN5c3RlbWN0bCBsaXN0LXVuaXQtZmlsZXMgfCBncmVwIGVuYWJsZWQgfCBncmVwIHJlZGlzLXNlcnZlcikKaWYgWyAiJF9SRURJU19TRVJWSUNFX0VOQUJMRURfRk9VTkQiID0gIiIgXTsgdGhlbgogIF9FTkFCTEVfUkVESVNfU0VSVkVSX09VVFBVVD0kKAogICAgc3VkbyBzeXN0ZW1jdGwgZW5hYmxlIHJlZGlzLXNlcnZlci5zZXJ2aWNlIDI+JjEgPiAvZGV2L251bGwKICApCiAgX0VOQUJMRV9SRURJU19TRVJWRVJfRVhJVF9DT0RFPSQ/CiAgaWYgWyAkX0VOQUJMRV9SRURJU19TRVJWRVJfRVhJVF9DT0RFIC1uZSAwIF07IHRoZW4KICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VSUk9SX0VOQUJMSU5HX1NFUlZJQ0UiID4mMgogICAgcHJpbnRmICIlczogJXNcbiIgIiRfTVNHX0VYSVRfQ09ERSIgIiRfRU5BQkxFX1JFRElTX1NFUlZFUl9FWElUX0NPREUiID4mMgogICAgcHJpbnRmICIlczogJXNcbiIgIiRfTVNHX0VSUk9SIiAiJF9FTkFCTEVfUkVESVNfU0VSVkVSX09VVFBVVCIgPiYyCiAgICBleGl0ICRfRU5BQkxFX1JFRElTX1NFUlZFUl9FWElUX0NPREUKICBmaTsKZmk7CnByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgpwcmludEluZGVudApwcmludGYgIiAgICAlcyIgIiRfTVNHX0lUU19SVU5OSU5HIgpfUkVESVNfU0VSVklDRV9TVEFUVVM9JCgKICBzdWRvIHN5c3RlbWN0bCBzaG93IC1wIEFjdGl2ZVN0YXRlIHJlZGlzLXNlcnZlciB8IFwKICBjdXQgLWQnPScgLWYyIHwgXAogIHRyIC1kICdcbicpCmlmIFsgIiRfUkVESVNfU0VSVklDRV9TVEFUVVMiICE9ICJhY3RpdmUiIF07IHRoZW4KICBzdWRvIHN5c3RlbWN0bCBzdGFydCByZWRpcy1zZXJ2ZXIgPiAvZGV2L251bGwKICBfUkVESVNfU0VSVklDRV9TVEFSVEVEPSQ/CiAgaWYgWyAkX1JFRElTX1NFUlZJQ0VfU1RBUlRFRCAtbmUgMCBdOyB0aGVuCiAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICBwcmludGYgIiVzXG4iICIkX01TR19TRVJWSUNFX0NPVUxETlRfQkVfU1RBUlRFRCIgPiYyCiAgICBwcmludGYgIiVzICclcycuXG4iICIkX01TR19JVFNfT05fU1RBVEUiICIkX1JFRElTX1NFUlZJQ0VfU1RBVFVTIiA+JjIKICAgIGV4aXQgJF9SRURJU19TRVJWSUNFX1NUQVJURUQKICBmaTsKZmk7CnByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgo=' | base64 -d)
