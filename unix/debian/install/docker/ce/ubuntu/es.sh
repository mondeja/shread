#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVzLnNoCiMhL2Jpbi9iYXNoCl9NU0dfQ0hFQ0tJTkdfRE9DS0VSX0NFPSIiCl9NU0dfU0VUVElOR19VUF9QVUJMSUNfS0VZPSIiCl9NU0dfRVJST1JfUkVUUklFVklOR19QVUJMSUNfRE9DS0VSX1JFUE9TX0tFWT0iIgpfTVNHX0NPTkZJR1VSRURfUFVCTElDX0tFWV9GT1VORD0iIgpfTVNHX0FERElOR19ET0NLRVJfUkVQTz0iIgpfTVNHX0RPQ0tFUl9SRVBPX0ZPVU5EPSIiCl9NU0dfQ0hFQ0tJTkdfRE9DS0VSX0NFX1BBQ0tBR0VTPSIiCklOREVOVF9TVFJJTkc9IiIKZnVuY3Rpb24gdXNhZ2UgewogICAgY2F0IDw8SEVMUF9VU0FHRQpVc2FnZTogdW5peC9kZWJpYW4vaW5zdGFsbC9kb2NrZXIvY2UvdWJ1bnR1LyRfU0NSSVBUX0ZJTEVOQU1FIFstaF0gWy1pIFNUUklOR10gCgogICBJbnN0YWxscyBEb2NrZXIgQ29tbXVuaXR5IEVkaXRpb24gcGFja2FnZXMgZnJvbSBvZmljaWFsIHJlcG9zaXRvcmllcyBhcyBzb3VyY2UuCgpPcHRpb25zOgogIC1oLCAtLWhlbHAgICAgICAgICAgICAgICAgICAgICAgICBTaG93IHRoaXMgaGVscCBtZXNzYWdlIGFuZCBleGl0LgogIC1pIFNUUklORywgLS1pbmRlbnQgU1RSSU5HICAgICAgICBFYWNoIGxpbmUgb2YgdGhlIHNjcmlwdCBvdXRwdXQgd2lsbCBiZSBwcmVjZWRlZCB3aXRoIHRoZSBzdHJpbmcgZGVmaW5lZCBpbiB0aGlzIHBhcmFtZXRlci4KSEVMUF9VU0FHRQogICAgZXhpdCAxCn0KZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLWl8LS1pbmRlbnQpCiAgICBJTkRFTlRfU1RSSU5HPSIkMiIKICAgIHNoaWZ0IDIKICAgIDs7CiAgICAtaHwtLWhlbHApCiAgICBzaGlmdAogICAgdXNhZ2UKICAgIDs7ICAgICAgZXNhYwpkb25lCmZ1bmN0aW9uIHByaW50SW5kZW50KCkgewogIHByaW50ZiAiJXMiICIkSU5ERU5UX1NUUklORyIKfQpmdW5jdGlvbiBpbnN0YWxsUGFjbWFuSWZOb3RJbnN0YWxsZWQoKSB7CiAgaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXTsgdGhlbgogICAgdXJsPSJodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vZG93bmxvYWQvcGFjYXB0LyRfU0NSSVBUX0ZJTEVOQU1FIgogICAgY3VybCAtc0wgIiR1cmwiIHwgc3VkbyBiYXNoIC0gPiAvZGV2L251bGwKICBmaTsKfQpmdW5jdGlvbiBnZXRSZXBvc1B1YmxpY0tleSgpIHsKICBwcmludEluZGVudAogIF9BUFRfS0VZX0ZPVU5EPSQoYXB0LWtleSBsaXN0IHwgZ3JlcCAiRG9ja2VyIFJlbGVhc2UiKQogIGlmIFsgIiRfQVBUX0tFWV9GT1VORCIgPSAiIiBdOyB0aGVuCiAgICBwcmludGYgIiAgJXMiICIkX01TR19TRVRUSU5HX1VQX1BVQkxJQ19LRVkiCiAgICBfR0VUX1BVQkxJQ19HUEdfS0VZX1NUREVSUj0kKAogICAgICBjdXJsIC1mc1NMIGh0dHBzOi8vZG93bmxvYWQuZG9ja2VyLmNvbS9saW51eC91YnVudHUvZ3BnIHwgICAgICAgc3VkbyBhcHQta2V5IGFkZCAtIDI+JjEgPiAvZGV2L251bGwpCiAgICBfR0VUX1BVQkxJQ19HUEdfS0VZX0VYSVRfQ09ERT0kPwogICAgaWYgWyAkX0dFVF9QVUJMSUNfR1BHX0tFWV9FWElUX0NPREUgLW5lIDAgXTsgdGhlbgogICAgICBwcmludGYgIlxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgICAgcHJpbnRmICJcbiVzIiAiJF9NU0dfRVJST1JfUkVUUklFVklOR19QVUJMSUNfRE9DS0VSX1JFUE9TX0tFWSIgPiYyCiAgICAgIHByaW50ZiAiIChodHRwczovL2Rvd25sb2FkLmRvY2tlci5jb20vbGludXgvdWJ1bnR1L2dwZyk6XG4iID4mMgogICAgICBwcmludGYgIiVzXG4iICIkX0dFVF9QVUJMSUNfR1BHX0tFWV9TVERFUlIiID4mMgogICAgICBleGl0ICRfR0VUX1BVQkxJQ19HUEdfS0VZX0VYSVRfQ09ERQogICAgZmk7CiAgICBzdWRvIGFwdC1rZXkgZmluZ2VycHJpbnQgMEVCRkNEODgKICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGVsc2UKICAgIHByaW50ZiAiICAlcyIgIiRfTVNHX0NPTkZJR1VSRURfUFVCTElDX0tFWV9GT1VORCIKICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGZpOwp9ClVCVU5UVV9SRUxFQVNFPSIiCmZ1bmN0aW9uIGdldFVidW50dVJlbGVhc2UoKSB7CiAgVUJVTlRVX1JFTEVBU0U9IiQobHNiX3JlbGVhc2UgLWNzKSIKfQpBUkNIPSJhbWQ2NCIKZnVuY3Rpb24gZ2V0U3lzdGVtQXJjaCgpIHsKICBjYXNlICQodW5hbWUgLW0pIGluCiAgICAgIGkzODYpICAgQVJDSD0iMzg2IiA7OwogICAgICBpNjg2KSAgIEFSQ0g9IjM4NiIgOzsKICAgICAgeDg2XzY0KSBBUkNIPSJhbWQ2NCIgOzsKICAgICAgYXJtKSAgICBkcGtnIC0tcHJpbnQtYXJjaGl0ZWN0dXJlIHwgZ3JlcCAtcSAiYXJtNjQiICYmIEFSQ0g9ImFybTY0IiB8fCBBUkNIPSJhcm0iIDs7CiAgZXNhYwp9CmZ1bmN0aW9uIGFkZEFwdERvY2tlclJlcG9zaXRvcnkoKSB7CiAgX0FQVF9SRVBPPSJkZWIgW2FyY2g9JEFSQ0hdIGh0dHBzOi8vZG93bmxvYWQuZG9ja2VyLmNvbS9saW51eC91YnVudHUgJFVCVU5UVV9SRUxFQVNFIHN0YWJsZSIKICBfUkVQT19GT1VORF9PTl9TT1VSQ0VTPSQoCiAgICBmaW5kIC9ldGMvYXB0LyAtbmFtZSAiKi5saXN0IiAtcHJpbnQwIHwgICAgIHhhcmdzIC0wIGNhdCB8ICAgICBncmVwICdeW1s6c3BhY2U6XV0qZGViJyB8ICAgICBncmVwICJodHRwczovL2Rvd25sb2FkLmRvY2tlci5jb20vbGludXgvdWJ1bnR1IikKICBwcmludEluZGVudAogIGlmIFsgIiRfUkVQT19GT1VORF9PTl9TT1VSQ0VTIiA9ICIiIF07IHRoZW4KICAgIHByaW50ZiAiICAlcyIgIiRfTVNHX0FERElOR19ET0NLRVJfUkVQTyIKICAgIHN1ZG8gYWRkLWFwdC1yZXBvc2l0b3J5ICIkX0FQVF9SRVBPIiA+IC9kZXYvbnVsbAogICAgc3VkbyBwYWNtYW4gdXBkYXRlID4gL2Rldi9udWxsCiAgZWxzZQogICAgcHJpbnRmICIgICVzIiAiJF9NU0dfRE9DS0VSX1JFUE9fRk9VTkQiCiAgZmk7CiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gaW5zdGFsbERvY2tlclBhY2thZ2VzKCkgewogIElOU1RBTExBVElPTl9QQUNLQUdFUz0oCiAgICAiZG9ja2VyLWNlIgogICAgImRvY2tlci1jZS1jbGkiCiAgICAiY29udGFpbmVyZC5pbyIKICApCiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiAgJXNcbiIgIiRfTVNHX0NIRUNLSU5HX0RPQ0tFUl9DRV9QQUNLQUdFUyIKICBmb3IgREVQIGluICIke0lOU1RBTExBVElPTl9QQUNLQUdFU1tAXX0iOyBkbwogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAgICVzIiAiJERFUCIKICAgIGlmIFtbICIkKHN1ZG8gcGFjbWFuIC1RaSAiJERFUCIgMj4gL2Rldi9udWxsIHwgZ3JlcCBTdGF0dXMpIiAhPSAiU3RhdHVzOiBpbnN0YWxsIG9rIGluc3RhbGxlZCIgXV07IHRoZW4KICAgICAgc3VkbyBwYWNtYW4gLVMgLS0gLXkgIiRERVAiID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICAgIGZpOwogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZG9uZQp9CmZ1bmN0aW9uIG1haW4oKSB7CiAgZXhwb3J0IEFQVF9LRVlfRE9OVF9XQVJOX09OX0RBTkdFUk9VU19VU0FHRT1Eb250V2FybgogIHN1ZG8gcHJpbnRmICIiCiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiVzXG4iICIkX01TR19DSEVDS0lOR19ET0NLRVJfQ0UiCiAgZ2V0UmVwb3NQdWJsaWNLZXkKICBnZXRVYnVudHVSZWxlYXNlCiAgZ2V0U3lzdGVtQXJjaAogIGFkZEFwdERvY2tlclJlcG9zaXRvcnkKICBzdWRvIGNobW9kIDc3NyAvdmFyL3J1bi9kb2NrZXIuc29jawogIHVuc2V0IEFQVF9LRVlfRE9OVF9XQVJOX09OX0RBTkdFUk9VU19VU0FHRQp9CmlmIChyZXR1cm4gMCAyPi9kZXYvbnVsbCk7IHRoZW4KICBleHBvcnRWYXJpYWJsZXMKZWxzZQogIG1haW4KZmk7'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
