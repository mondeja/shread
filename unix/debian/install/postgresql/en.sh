#!/bin/bash
_SCRIPT_FILENAME="$(basename "$0")" source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iVGhpcyBzY3JpcHQgbmVlZHMgdG8gYmUgZXhlY3V0ZWQgYXMgc3VwZXJ1c2VyLiIKX01TR19BRERJTkdfUkVQTz0iQWRkaW5nIHJlcG9zaXRvcnkuLi4iCl9NU0dfRVJST1JfUkVUUklFVklOR19QT1NUR1JFU1FMX1BVQkxJQ19LRVk9IkFuIGVycm9yIGhhcHBlbiByZXRyaWV2aW5nIFBvc3RncmVTUUwgcHVibGljIGtleSIKX01TR19VUERBVElOR19QQUNLQUdFUz0iVXBkYXRpbmcgcGFja2FnZXMuLi4iCl9NU0dfUkVNT1ZJTkdfUFJFVklPVVNfUEFDS0FHRVM9IlJlbW92aW5nIHByZXZpb3VzIHBhY2thZ2VzLi4uIgpfTVNHX1JFVFJJRVZJTkdfTEFTVEVTVF9TVEFCTEVfVkVSU0lPTj0iUmV0cmlldmluZyBsYXN0ZXN0IHN0YWJsZSBhdmFpbGFibGUgdmVyc2lvbi4uLiIKX01TR19DSEVDS0lOR19BVkFJTEFCTEVfVkVSU0lPTj0iQ2hlY2tpbmcgdmVyc2lvbiBhdmFpbGFibGUiCl9NU0dfVkVSU0lPTl9OT1RfT0ZGSUNJQUxMWV9BVkFJTEFCTEU9IlZlcnNpb24gbm90IGF2YWlsYWJsZSBhdCBvZmZpY2lhbCBQb3N0Z3JlU1FMIHJlcG9zaXRvcmllcyIKX01TR19WRVJTSU9OX09GX1BPU1RHSVNfVFJZSU5HX1RPX0lOU1RBTEw9IlRoZSB2ZXJzaW9uIG9mIFBvc3RnaXMgdGhhdCB5b3UncmUgdHJ5aW5nIHRvIGluc3RhbGwiCl9NU0dfRE9FU05UX0VYSVNUU19BU19BUFRfUEdfUEFDS0FHRT0iZG9lc24ndCBleGlzdHMgYXMgQVBUIHBhY2thZ2UgZm9yIFBvc3RncmVTUUwiCl9NU0dfVEhFX1BBQ0tBR0U9InRoZSBwYWNrYWdlIgpfTVNHX0RPRVNOVF9FWElTVFNfSU5fUEdfT0ZGSUNJQUxfUkVQT1M9ImRvZXNuJ3QgZXhpc3RzIGluIFBvc3RncmVTUUwgb2ZmaWNpYWwgcmVwb3NpdG9yaWVzLiIKX01TR19TUEVDSUZZX0FOX0VYSVNURU5UX1ZFUlNJT049IlNwZWNpZnkgYW4gZXhpc3RlbnQgdmVyc2lvbiBiZXR3ZWVuIHRoZSBuZXh0IHVzaW5nIHRoZSBwYXJhbSAnLS1wb3N0Z2lzLXZlcnNpb24nOiIKX01TR19DSEVDS0lOR19QR19TRVJWSUNFX0NPTkZJRz0iQ2hlY2tpbmcgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIHNlcnZpY2UgJ3Bvc3RncmVzcWwnLi4uIgpfTVNHX0VOQUJMSU5HPSJFbmFibGluZy4uLiIKX01TR19JVFNfRU5BQkxFRD0iSXQncyBlbmFibGVkIgpfTVNHX0VSUk9SX0VOQUJMSU5HX1BHX1NFUlZJQ0U9IkFuIGVycm9yIGhhcHBlbiBlbmFibGluZyAncG9zdGdyZXNxbCcgc2VydmljZS4iCl9NU0dfRVJST1I9IkVycm9yIgpfTVNHX0VYSVRfQ09ERT0iRXhpdCBjb2RlIgpfTVNHX0xBVU5DSElORz0iTGF1bmNoaW5nLi4uIgpfTVNHX1BHX1NFUlZJQ0VfQ09VTEROVF9CRV9TVEFSVEVEPSJUaGUgJ3Bvc3RncmVzcWwnIHNlcnZpY2UgY291bGRuJ3QgYmUgc3RhcnRlZC4iCl9NU0dfSVRTX0lOX1NUQVRFPSJJdCdzIG9uIHN0YXRlIgpfTVNHX0lUU19SVU5OSU5HPSJJdCdzIHJ1bm5pbmciCl9NU0dfSU5TVEFMTElOR19QRz0iSW5zdGFsbGluZyBQb3N0Z3JlU1FMLi4uIgpfTVNHX0lOU1RBTExJTkdfUEFDS0FHRVM9Ikluc3RhbGxpbmcgcGFja2FnZXMuLi4iCl9NU0dfQ0hFS0lOR19QR19FTlY9IkNoZWNraW5nIFBvc3RncmVTUUwgZW52aXJvbm1lbnQuLi4iCl9NU0dfQ0hFQ0tJTkdfUEFDS0FHRVM9IkNoZWNraW5nIHBhY2thZ2VzLi4uIgpfTVNHX0RJU1RST19WRVJTSU9OX05PVF9TVVBQT1JURUQ9IllvdXIgdmVyc2lvbiBvZiBEZWJpYW4vVWJ1bnR1IGlzIG5vdCBzdXBwb3J0ZWQgYnkgb2ZmaWNpYWwgUG9zdGdyZVNRTCByZXBvc2l0b3JpZXMiCmlmIFtbICQoL3Vzci9iaW4vaWQgLXUpIC1uZSAwIF1dOyB0aGVuCiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSIiA+JjIKICBleGl0IDEKZmk7CklOREVOVF9TVFJJTkc9IiIKX1ZFUlNJT049IiIKX0lOQ0xVREVfUE9TVEdJUz0wCl9QT1NUR0lTX1ZFUlNJT049IiIKX0lOQ0xVREVfUEdBRE1JTj0wCl9JTkNMVURFX1BMUFlUSE9OMz0wCmZvciBhcmcgaW4gIiRAIjsgZG8KICBjYXNlICRhcmcgaW4KICAgIC0tdmVyc2lvbikKICAgIHNoaWZ0CiAgICBfVkVSU0lPTj0kMQogICAgc2hpZnQKICAgIDs7CiAgICAtLWluc3RhbGwtcG9zdGdpcykKICAgIF9JTkNMVURFX1BPU1RHSVM9MQogICAgc2hpZnQKICAgIDs7CiAgICAtLXBvc3RnaXMtdmVyc2lvbikKICAgIHNoaWZ0CiAgICBfUE9TVEdJU19WRVJTSU9OPSQxCiAgICBzaGlmdAogICAgOzsKICAgIC0taW5zdGFsbC1wZ2FkbWluKQogICAgX0lOQ0xVREVfUEdBRE1JTj0xCiAgICBzaGlmdAogICAgOzsKICAgIC0taW5zdGFsbC1wbHB5dGhvbjMpCiAgICBfSU5DTFVERV9QTFBZVEhPTjM9MQogICAgc2hpZnQKICAgIDs7CiAgICAtLWluZGVudCkKICAgIHNoaWZ0CiAgICBJTkRFTlRfU1RSSU5HPSQxCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CmlmIFsgIiQoY29tbWFuZCAtdiBwYWNtYW4pIiA9ICIiIF07IHRoZW4KICBpZiBbICIkX1NDUklQVF9GSUxFTkFNRSIgPSAibWFpbi5zaCIgXTsgdGhlbgogICAgZmlsZXBhdGg9InNyYy91bml4L18vZG93bmxvYWQvcGFjYXB0L21haW4uc2giCiAgICBiYXNoICIkZmlsZXBhdGgiID4gL2Rldi9udWxsCiAgZWxzZQogICAgdXJsPSJodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vZG93bmxvYWQvcGFjYXB0LyRfU0NSSVBUX0ZJTEVOQU1FIgogICAgY3VybCAtc0wgIiR1cmwiIHwgc3VkbyBiYXNoIC0gPiAvZGV2L251bGwKICBmaTsKZmk7CklOU1RBTExBVElPTl9ERVBFTkRFTkNJRVM9KAogICJ3Z2V0IgogICJhcHRpdHVkZSIKKQpmb3IgREVQIGluICIke0lOU1RBTExBVElPTl9ERVBFTkRFTkNJRVNbQF19IjsgZG8KICBpZiBbWyAiJChzdWRvIHBhY21hbiAtUWkgIiRERVAiIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgICBzdWRvIHBhY21hbiAtUyAiJERFUCIgPiAvZGV2L251bGwgfHwgZXhpdCAkPwogIGZpOwpkb25lOwpfUEdER19TT1VSQ0VTX0xJU1RfRklMRVBBVEg9Ii9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL3BnZGciCkRFQklBTl9WRVJTSU9OPSIkKGxzYl9yZWxlYXNlIC1jIC1zKSIKZnVuY3Rpb24gY2hlY2tEZWJpYW5WZXJzaW9uU3VwcG9ydGVkKCkgewogIERFQklBTl9WRVJTSU9OX1NVUFBPUlRFRD0wCiAgX0dFVF9ERUJJQU5fVkVSU0lPTl9TVVBQT1JURUQ9JCgKICAgIGN1cmwgLXNMIGh0dHA6Ly9hcHQucG9zdGdyZXNxbC5vcmcvcHViL3JlcG9zL2FwdC9kaXN0cy8gfCBcCiAgICBncmVwIC1vICIkREVCSUFOX1ZFUlNJT04tcGdkZyIKICApCiAgaWYgWyAiJF9HRVRfREVCSUFOX1ZFUlNJT05fU1VQUE9SVEVEIiAhPSAiIiBdOyB0aGVuCiAgICBERUJJQU5fVkVSU0lPTl9TVVBQT1JURUQ9MQogIGZpOwp9CmZ1bmN0aW9uIHNpZ25Tb3VyY2VzKCkgewogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICAgJXMiICIkX01TR19BRERJTkdfUkVQTyIKICBTSUdOX1BHREdfR1BHX0tFWV9TVERFUlI9JCgKICAgIHdnZXQgLXFPIC0gaHR0cHM6Ly93d3cucG9zdGdyZXNxbC5vcmcvbWVkaWEva2V5cy9BQ0NDNENGOC5hc2MgfCBcCiAgICBzdWRvIGFwdC1rZXkgYWRkIC0gMj4mMSA+IC9kZXYvbnVsbCkKICBTSUdOX1BHREdfR1BHX0tFWV9FWElUX0NPREU9JD8KICBpZiBbICRTSUdOX1BHREdfR1BHX0tFWV9FWElUX0NPREUgLW5lIDAgXTsgdGhlbgogICAgcHJpbnRmICIgXGVbOTFtXHhFMlx4OUNceDk1XGVbMzltXG4iID4mMgogICAgcHJpbnRmICJcbiVzOlxuIiAiJF9NU0dfRVJST1JfUkVUUklFVklOR19QT1NUR1JFU1FMX1BVQkxJQ19LRVkiID4mMgogICAgcHJpbnRmICIlc1xuIiAiJFNJR05fUEdER19HUEdfS0VZX1NUREVSUiIgPiYyCiAgICBleGl0ICRTSUdOX1BHREdfR1BHX0tFWV9FWElUX0NPREUKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBwcmludEluZGVudAogIHByaW50ZiAiICAgICVzIiAiJF9NU0dfVVBEQVRJTkdfUEFDS0FHRVMiCiAgc3VkbyBwYWNtYW4gdXBkYXRlID4gL2Rldi9udWxsCiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gcHVyZ2VQcmV2aW91c1BhY2thZ2VzKCkgewogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICAgJXMiICIkX01TR19SRU1PVklOR19QUkVWSU9VU19QQUNLQUdFUyIKICBzdWRvIHBhY21hbiAtUm5zIHBvc3RncmVzcWwgPiAvZGV2L251bGwgfHwgZXhpdCAkPwogIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgp9CmZ1bmN0aW9uIGNsZWFuUHJldmlvdXNTb3VyY2VzKCkgewogIF9QR0RHX1NPVVJDRVNfRVhUUz0oCiAgICAibGlzdCIKICAgICJkaXN0VXBncmFkZSIKICAgICJzYXZlIgogICkKICBmb3IgRVhUIGluICIke19QR0RHX1NPVVJDRVNfRVhUU1tAXX0iOyBkbwogICAgaWYgWyAtZiAiJHtfUEdER19TT1VSQ0VTX0xJU1RfRklMRVBBVEh9LiR7RVhUfSIgXTsgdGhlbgogICAgICBzdWRvIHJtIC1mICIke19QR0RHX1NPVVJDRVNfTElTVF9GSUxFUEFUSH0uJHtFWFR9IiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgICBmaTsKICBkb25lCn0KZnVuY3Rpb24gY3JlYXRlU291cmNlc0xpc3QoKSB7CiAgdG91Y2ggIiRfUEdER19TT1VSQ0VTX0xJU1RfRklMRVBBVEgubGlzdCIKICBlY2hvICJkZWIgaHR0cDovL2FwdC5wb3N0Z3Jlc3FsLm9yZy9wdWIvcmVwb3MvYXB0LyAkREVCSUFOX1ZFUlNJT04tcGdkZyBtYWluIiA+IFwKICAgICIkX1BHREdfU09VUkNFU19MSVNUX0ZJTEVQQVRILmxpc3QiCn0KZnVuY3Rpb24gY2hlY2tQb3N0Z3Jlc3FsU2VydmljZUV4aXN0cygpIHsKICBfUE9TVEdSRVNRTF9TRVJWSUNFX0VYSVNUUz0xCiAgaWYgISBzdWRvIHN5c3RlbWN0bCBzdGF0dXMgcG9zdGdyZXNxbCA+IC9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICBfUE9TVEdSRVNRTF9TRVJWSUNFX0VYSVNUUz0wCiAgZmk7Cn0KX0xBU1RFU1RfU1RBQkxFX1BPU1RHUkVTX1ZFUlNJT049IiIKZnVuY3Rpb24gZ2V0TGFzdGVzdFN0YWJsZVBvc3RncmVzVmVyc2lvbigpIHsKICBfTEFTVEVTVF9TVEFCTEVfUE9TVEdSRVNfVkVSU0lPTj0kKAogICAgc3VkbyBhcHRpdHVkZSBzZWFyY2ggIn5uIF5wb3N0Z3Jlc3FsIiB8IFwKICAgIGdyZXAgLUVvICIgcG9zdGdyZXNxbC1bMC05XXsxLDN9LnswLDF9WzAtOV17MSwzfSAiIHwgXAogICAgYXdrICd7IHByaW50ICQxIH0nIHwgXAogICAgc29ydCAtLXZlcnNpb24tc29ydCB8IFwKICAgIHRhaWwgLW4gMSB8IFwKICAgIGN1dCAtZCctJyAtZjIKICApCn0KX1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTD0iIgpmdW5jdGlvbiBnZXRQb3N0Z3Jlc1ZlcnNpb25Ub0luc3RhbGwoKSB7CiAgaWYgWyAiJF9WRVJTSU9OIiA9ICIiIF07IHRoZW4KICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiAgJXMiICIkX01TR19SRVRSSUVWSU5HX0xBU1RFU1RfU1RBQkxFX1ZFUlNJT04iCiAgICBnZXRMYXN0ZXN0U3RhYmxlUG9zdGdyZXNWZXJzaW9uCiAgICBfUE9TVEdSRVNfVkVSU0lPTl9UT19JTlNUQUxMPSIkX0xBU1RFU1RfU1RBQkxFX1BPU1RHUkVTX1ZFUlNJT04iCiAgICBwcmludGYgIiAodiVzKSIgIiRfUE9TVEdSRVNfVkVSU0lPTl9UT19JTlNUQUxMIgogIGVsc2UKICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiAgJXMgKCVzKS4uLiIgIiRfTVNHX0NIRUNLSU5HX0FWQUlMQUJMRV9WRVJTSU9OIiAiJF9WRVJTSU9OIgogICAgX1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTD0kKAogICAgICBzdWRvIGFwdGl0dWRlIHNlYXJjaCAifm4gXnBvc3RncmVzcWwiIHwgXAogICAgICBncmVwIC1FbyAiIHBvc3RncmVzcWwtWzAtOV17MSwzfS57MCwxfVswLTldezEsM30gIiB8IFwKICAgICAgYXdrICd7IHByaW50ICQxIH0nIHwgXAogICAgICBncmVwIC1vICIkX1ZFUlNJT04iIHwgXAogICAgICB0ciAtZCAnXG4nCiAgICApCiAgICBpZiBbICIkX1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTCIgPSAiIiBdOyB0aGVuCiAgICAgIHByaW50ZiAiIFxlWzkxbVx4RTJceDlDXHg5NVxlWzM5bVxuIiA+JjIKICAgICAgcHJpbnRmICIgICAgJXMgKCVzKS5cbiIgIiRfTVNHX1ZFUlNJT05fTk9UX09GRklDSUFMTFlfQVZBSUxBQkxFIiAiJF9WRVJTSU9OIiA+JjIKICAgICAgZXhpdCAxCiAgICBmaTsKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpfUE9TVEdSRVNfVkVSU0lPTl9JTlNUQUxMRUQ9IiIKZnVuY3Rpb24gZ2V0SW5zdGFsbGVkUG9zdGdyZXNWZXJzaW9uKCkgewogIF9QT1NUR1JFU19WRVJTSU9OX0lOU1RBTExFRD0kKAogICAgcHNxbCAtLXZlcnNpb24gfCBcCiAgICBjdXQgLWQnICcgLWYzIHwgXAogICAgY3V0IC1kJy4nIC1mMSB8fCBleGl0ICQ/CiAgKQp9CmZ1bmN0aW9uIGluc3RhbGxQb3N0Z3Jlc1BhY2thZ2VzKCkgewogIFBPU1RHUkVTX1BBQ0tBR0VTPSgKICAgICJwb3N0Z3Jlc3FsLSRfUE9TVEdSRVNfVkVSU0lPTl9UT19JTlNUQUxMIgogICAgInBvc3RncmVzcWwtY2xpZW50LSRfUE9TVEdSRVNfVkVSU0lPTl9UT19JTlNUQUxMIgogICAgInBvc3RncmVzcWwtY29udHJpYi0kX1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTCIKICAgICJwb3N0Z3Jlc3FsLXNlcnZlci1kZXYtJF9QT1NUR1JFU19WRVJTSU9OX1RPX0lOU1RBTEwiCiAgICAibGlicHEtZGV2IgogICkKICBpZiBbICRfSU5DTFVERV9QT1NUR0lTIC1lcSAxIF07IHRoZW4KICAgIGlmIFsgIiRfUE9TVEdJU19WRVJTSU9OIiA9ICIiIF07IHRoZW4KICAgICAgX1BPU1RHSVNfUEFDS0FHRT0kKAogICAgICAgIHN1ZG8gYXB0aXR1ZGUgc2VhcmNoICJ+biBecG9zdGdyZXNxbC0ke19QT1NUR1JFU19WRVJTSU9OX1RPX0lOU1RBTEx9LXBvc3RnaXMiIHwgXAogICAgICAgIGdyZXAgLUVvICIgcG9zdGdyZXNxbC0ke19QT1NUR1JFU19WRVJTSU9OX1RPX0lOU1RBTEx9LXBvc3RnaXMtWzAtOV17MSwzfS57MCwxfVswLTldezAsM30gIiB8IFwKICAgICAgICBhd2sgJ3sgcHJpbnQgJDEgfScgfCBcCiAgICAgICAgc29ydCAtLXZlcnNpb24tc29ydCB8IFwKICAgICAgICB0YWlsIC1uIDEKICAgICAgKQogICAgZWxzZQogICAgICBfUE9TVEdJU19QQUNLQUdFX0VYSVNUUz0kKAogICAgICAgIHN1ZG8gYXB0aXR1ZGUgc2VhcmNoICJ+biBecG9zdGdyZXNxbC0ke19QT1NUR1JFU19WRVJTSU9OX1RPX0lOU1RBTEx9LXBvc3RnaXMtJHtfUE9TVEdJU19WRVJTSU9OfSIKICAgICAgKQogICAgICBpZiBbICIkX1BPU1RHSVNfUEFDS0FHRV9FWElTVFMiID0gIiIgXTsgdGhlbgogICAgICAgIHByaW50ZiAiXG4lcyAodiVzKSIgIiRfTVNHX1ZFUlNJT05fT0ZfUE9TVEdJU19UUllJTkdfVE9fSU5TVEFMTCIgIiRfUE9TVEdJU19WRVJTSU9OIiA+JjIKICAgICAgICBwcmludGYgIiAlcyB2JXMiICIkX01TR19ET0VTTlRfRVhJU1RTX0FTX0FQVF9QR19QQUNLQUdFIiAiJF9QT1NUR1JFU19WRVJTSU9OX1RPX0lOU1RBTEwiID4mMgogICAgICAgIHByaW50ZiAiICglcyAncG9zdGdyZXNxbC0lcy1wb3N0Z2lzJXMnKSIgIiRfTVNHX1RIRV9QQUNLQUdFIiAiJF9QT1NUR1JFU19WRVJTSU9OX1RPX0lOU1RBTEwiICIkX1BPU1RHSVNfVkVSU0lPTiIgPiYyCiAgICAgICAgcHJpbnRmICIgJXNcbiIgIiRfTVNHX0RPRVNOVF9FWElTVFNfSU5fUEdfT0ZGSUNJQUxfUkVQT1MiID4mMgogICAgICAgIHByaW50ZiAiJXNcbiIgIiRfTVNHX1NQRUNJRllfQU5fRVhJU1RFTlRfVkVSU0lPTiIgPiYyCiAgICAgICAgc3VkbyBhcHRpdHVkZSBzZWFyY2ggIn5uIF5wb3N0Z3Jlc3FsLSR7X1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTH0tcG9zdGdpcyIgPiYyCiAgICAgICAgZXhpdCAxCiAgICAgIGZpOwogICAgICBfUE9TVEdJU19QQUNLQUdFPSJwb3N0Z3Jlc3FsLSR7X1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTH0tcG9zdGdpcy0ke19QT1NUR0lTX1ZFUlNJT059IgogICAgZmk7CiAgICBQT1NUR1JFU19QQUNLQUdFUys9KAogICAgICAiJF9QT1NUR0lTX1BBQ0tBR0UiCiAgICApCiAgZmk7CiAgaWYgWyAkX0lOQ0xVREVfUEdBRE1JTiAtZXEgMSBdOyB0aGVuCiAgICBfTEFTVEVTVF9TVEFCTEVfUEdBRE1JTl9QQUNLQUdFPSQoCiAgICAgIHN1ZG8gYXB0aXR1ZGUgc2VhcmNoICJ+biBecGdhZG1pbiIgfCBcCiAgICAgIGdyZXAgLUVvICIgcGdhZG1pblswLTldezEsM30uezAsMX1bMC05XXswLDN9ICIgfCBcCiAgICAgIGF3ayAneyBwcmludCAkMSB9JyB8IFwKICAgICAgc29ydCAtLXZlcnNpb24tc29ydCB8IFwKICAgICAgdGFpbCAtbiAxCiAgICApCiAgICBQT1NUR1JFU19QQUNLQUdFUys9KAogICAgICAiJF9MQVNURVNUX1NUQUJMRV9QR0FETUlOX1BBQ0tBR0UiCiAgICApCiAgZmk7CiAgaWYgWyAkX0lOQ0xVREVfUExQWVRIT04zIC1lcSAxIF07IHRoZW4KICAgIF9MQVNURVNUX1NUQUJMRV9QTFBZVEhPTjNfQ09NUEFUSUJMRV9QQUNLQUdFPSQoCiAgICAgIHN1ZG8gYXB0aXR1ZGUgc2VhcmNoICJ+biBecG9zdGdyZXNxbC1wbHB5dGhvbjMtJHtfUE9TVEdSRVNfVkVSU0lPTl9UT19JTlNUQUxMfSIgfCBcCiAgICAgIGhlYWQgLW4gMSB8IFwKICAgICAgZ3JlcCAtbyAiIHBvc3RncmVzcWwtcGxweXRob24zLTEyIiB8IFwKICAgICAgYXdrICd7IHByaW50ICQxIH0nCiAgICApCiAgICBpZiBbICIkX0xBU1RFU1RfU1RBQkxFX1BMUFlUSE9OM19DT01QQVRJQkxFX1BBQ0tBR0UiICE9ICIiIF07IHRoZW4KICAgICAgUE9TVEdSRVNfUEFDS0FHRVMrPSgKICAgICAgICAiJF9MQVNURVNUX1NUQUJMRV9QTFBZVEhPTjNfQ09NUEFUSUJMRV9QQUNLQUdFIgogICAgICApCiAgICBmaTsKICBmaTsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlc1xuIiAiJDEiCiAgZm9yIFBBQ0tBR0UgaW4gIiR7UE9TVEdSRVNfUEFDS0FHRVNbQF19IjsgZG8KICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiAgICAlcyIgIiRQQUNLQUdFIgogICAgaWYgW1sgIiQoZHBrZyAtcyAiJFBBQ0tBR0UiIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgICAgIF9BUFRfSU5TVEFMTF9TVERFUlI9JCgKICAgICAgICBzdWRvIGFwdC1nZXQgaW5zdGFsbCAteSAtcXFxICIkUEFDS0FHRSIgMj4mMQogICAgICApCiAgICAgIF9BUFRfSU5TVEFMTF9FWElUX0NPREU9JD8KICAgICAgaWYgWyAkX0FQVF9JTlNUQUxMX0VYSVRfQ09ERSAtbmUgMCBdOyB0aGVuCiAgICAgICAgcHJpbnRmICIlcyIgIiRfQVBUX0lOU1RBTExfU1RERVJSIiA+JjIKICAgICAgICBleGl0ICRfQVBUX0lOU1RBTExfRVhJVF9DT0RFCiAgICAgIGZpOwogICAgZmk7CiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBkb25lCn0KZnVuY3Rpb24gY2hlY2tQb3N0Z3Jlc3FsU2VydmljZUNvbmZpZygpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfUEdfU0VSVklDRV9DT05GSUciCiAgcHJpbnRJbmRlbnQKICBfUE9TVEdSRVNRTF9TRVJWSUNFX0VOQUJMRURfRk9VTkQ9JCgKICAgIHN5c3RlbWN0bCBsaXN0LXVuaXQtZmlsZXMgfCBcCiAgICBncmVwIGVuYWJsZWQgfCBcCiAgICBncmVwIHBvc3RncmVzcWwpCiAgaWYgWyAiJF9QT1NUR1JFU1FMX1NFUlZJQ0VfRU5BQkxFRF9GT1VORCIgPSAiIiBdOyB0aGVuCiAgICBwcmludGYgIiAgICAlcyIgIiRfTVNHX0VOQUJMSU5HIgogICAgX0VOQUJMRV9QT1NUR1JFU1FMX1NFUlZFUl9PVVRQVVQ9JCgKICAgICAgc3VkbyBzeXN0ZW1jdGwgZW5hYmxlIHBvc3RncmVzcWwuc2VydmljZSAyPiYxID4gL2Rldi9udWxsCiAgICApCiAgICBfRU5BQkxFX1BPU1RHUkVTUUxfU0VSVkVSX0VYSVRfQ09ERT0kPwogICAgaWYgWyAkX0VOQUJMRV9QT1NUR1JFU1FMX1NFUlZFUl9FWElUX0NPREUgLW5lIDAgXTsgdGhlbgogICAgICBwcmludGYgIiBcZVs5MW1ceEUyXHg5Q1x4OTVcZVszOW1cbiIgPiYyCiAgICAgIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VSUk9SX0VOQUJMSU5HX1BHX1NFUlZJQ0UiID4mMgogICAgICBwcmludGYgIiVzOiAlZFxuIiAiJF9NU0dfRVhJVF9DT0RFIiAiJF9FTkFCTEVfUE9TVEdSRVNRTF9TRVJWRVJfRVhJVF9DT0RFIiA+JjIKICAgICAgcHJpbnRmICIlczogJXNcbiIgIiRfTVNHX0VSUk9SIiAiJF9FTkFCTEVfUE9TVEdSRVNRTF9TRVJWRVJfT1VUUFVUIiA+JjIKICAgICAgZXhpdCAkX0VOQUJMRV9QT1NUR1JFU1FMX1NFUlZFUl9FWElUX0NPREUKICAgIGZpOwogIGVsc2UKICAgIHByaW50ZiAiICAgICVzIiAiJF9NU0dfSVRTX0VOQUJMRUQiCiAgZmk7CiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgcHJpbnRJbmRlbnQKICBfUE9TVEdSRVNRTF9TRVJWSUNFX1NUQVRVUz0kKAogICAgc3VkbyBzeXN0ZW1jdGwgc2hvdyAtcCBBY3RpdmVTdGF0ZSBwb3N0Z3Jlc3FsIHwgXAogICAgY3V0IC1kJz0nIC1mMiB8IFwKICAgIHRyIC1kICdcbicpCiAgaWYgWyAiJF9QT1NUR1JFU1FMX1NFUlZJQ0VfU1RBVFVTIiAhPSAiYWN0aXZlIiBdOyB0aGVuCiAgICBwcmludGYgIiAgICAlcyIgIiRfTVNHX0xBVU5DSElORyIKICAgIHN1ZG8gc3lzdGVtY3RsIHN0YXJ0IHBvc3RncmVzcWwgPiAvZGV2L251bGwKICAgIF9QT1NUR1JFU1FMX1NFUlZJQ0VfU1RBUlRFRD0kPwogICAgaWYgWyAkX1BPU1RHUkVTUUxfU0VSVklDRV9TVEFSVEVEIC1uZSAwIF07IHRoZW4KICAgICAgcHJpbnRmICIgXGVbOTFtXHhFMlx4OUNceDk1XGVbMzltXG4iID4mMgogICAgICBwcmludGYgIiVzXG4iICIkX01TR19QR19TRVJWSUNFX0NPVUxETlRfQkVfU1RBUlRFRCIgPiYyCiAgICAgIHByaW50ZiAiJXMgJyVzJy5cbiIgIiRfTVNHX0lUU19JTl9TVEFURSIgIiRfUE9TVEdSRVNRTF9TRVJWSUNFX1NUQVRVUyIgPiYyCiAgICAgIGV4aXQgJF9QT1NUR1JFU1FMX1NFUlZJQ0VfU1RBUlRFRAogICAgZmk7CiAgZWxzZQogICAgcHJpbnRmICIgICAgJXMiICIkX01TR19JVFNfUlVOTklORyIKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBpbnN0YWxsUG9zdGdyZVNRTCgpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlc1xuIiAiJF9NU0dfSU5TVEFMTElOR19QRyIKICBjaGVja0RlYmlhblZlcnNpb25TdXBwb3J0ZWQKICBpZiBbICRERUJJQU5fVkVSU0lPTl9TVVBQT1JURUQgLWVxIDAgXTsgdGhlbgogICAgcHJpbnRmICIlcyAoJXMpLiIgIiRfTVNHX0RJU1RST19WRVJTSU9OX05PVF9TVVBQT1JURUQiICIkREVCSUFOX1ZFUlNJT04iID4mMgogICAgZXhpdCAxCiAgZmk7CiAgY2xlYW5QcmV2aW91c1NvdXJjZXMKICBwdXJnZVByZXZpb3VzUGFja2FnZXMKICBjcmVhdGVTb3VyY2VzTGlzdAogIHNpZ25Tb3VyY2VzCiAgZ2V0UG9zdGdyZXNWZXJzaW9uVG9JbnN0YWxsCiAgaW5zdGFsbFBvc3RncmVzUGFja2FnZXMgIiRfTVNHX0lOU1RBTExJTkdfUEFDS0FHRVMiCn0KZnVuY3Rpb24gbWFpbigpIHsKICBwcmludEluZGVudAogIHByaW50ZiAiJXNcbiIgIiRfTVNHX0NIRUtJTkdfUEdfRU5WIgogIGNoZWNrUG9zdGdyZXNxbFNlcnZpY2VFeGlzdHMKICBpZiBbICRfUE9TVEdSRVNRTF9TRVJWSUNFX0VYSVNUUyAtZXEgMCBdOyB0aGVuCiAgICBpbnN0YWxsUG9zdGdyZVNRTAogIGVsc2UKICAgIGdldEluc3RhbGxlZFBvc3RncmVzVmVyc2lvbgogICAgX1BPU1RHUkVTX1ZFUlNJT05fVE9fSU5TVEFMTD0kX1BPU1RHUkVTX1ZFUlNJT05fSU5TVEFMTEVECiAgICBpbnN0YWxsUG9zdGdyZXNQYWNrYWdlcyAiJF9NU0dfQ0hFQ0tJTkdfUEFDS0FHRVMiCiAgZmk7CiAgY2hlY2tQb3N0Z3Jlc3FsU2VydmljZUNvbmZpZwp9Cm1haW4K' | base64 -d)
