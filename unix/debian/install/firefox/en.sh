#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVuLnNoCiMhL2Jpbi9iYXNoCl9NU0dfQ0hFQ0tJTkdfTU9aSUxMQV9FQ09TWVNURU09IkNoZWNraW5nIE1vemlsbGEgZWNvc3lzdGVtLi4uIgpfTVNHX0ZPVU5EX01PWklMTEFfRklSRUZPWF9JTlNUQUxMRUQ9Ik1vemlsbGEgRmlyZWZveCBmb3VuZCBpbnN0YWxsZWQgaW4gdGhlIHN5c3RlbSIKX01TR19JTlNUQUxMSU5HX01PWklMTEFfRklSRUZPWF9QQUNLQUdFUz0iSW5zdGFsbGluZyBNb3ppbGxhIEZpcmVmb3ggcGFja2FnZXMiCl9NU0dfRk9VTkRfQ0hFQ0tPRFJJVkVSX0lOU1RBTExFRD0iR2Vja29kcml2ZXIgZm91bmQgaW5zdGFsbGVkIGluIHRoZSBzeXN0ZW0iCl9NU0dfSU5TVEFMTElOR19HRUNLT0RSSVZFUj0iSW5zdGFsbGluZyBnZWNrb2RyaXZlci4uLiIKSU5ERU5UX1NUUklORz0iIgpTRVRYPTAKX0lOU1RBTExfR0VDS09EUklWRVI9MQpmdW5jdGlvbiB1c2FnZSB7CiAgICBjYXQgPDxIRUxQX1VTQUdFClVzYWdlOiB1bml4L2RlYmlhbi9pbnN0YWxsL2ZpcmVmb3gvJF9TQ1JJUFRfRklMRU5BTUUgWy1oXSBbLWkgU1RSSU5HXSBbLW5dCgogIEluc3RhbGxzIE1vemlsbGEgRmlyZWZveCBhbmQgZ2Vja29kcml2ZXIuCgpPcHRpb25zOgogIC1oLCAtLWhlbHAgICAgICAgICAgICAgICAgICAgICAgICBTaG93IHRoaXMgaGVscCBtZXNzYWdlIGFuZCBleGl0LgogIC1pIFNUUklORywgLS1pbmRlbnQgU1RSSU5HICAgICAgICBFYWNoIGxpbmUgb2YgdGhlIHNjcmlwdCBvdXRwdXQgd2lsbCBiZSBwcmVjZWRlZCB3aXRoIHRoZSBzdHJpbmcgZGVmaW5lZCBpbiB0aGlzIHBhcmFtZXRlci4KICAtLXNldC14ICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0cyB0aGUgLXggb3B0aW9uIGluIEJhc2ggdG8gcHJpbnQgb3V0IHRoZSBzdGF0ZW1lbnRzIGFzIHRoZXkgYXJlIGJlaW5nIGV4ZWN1dGVkLiBVc2VmdWwgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy4KICAtbiwgLS1uby1nZWNrb2RyaXZlciAgICAgICAgICAgICAgSWYgcGFzc2VkLCBkb2Vzbid0IGluc3RhbGxzIGdlY2tvZHJpdmVyLgoKSEVMUF9VU0FHRQogICAgZXhpdCAxCn0KZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLWl8LS1pbmRlbnQpCiAgICBJTkRFTlRfU1RSSU5HPSIkMiIKICAgIHNoaWZ0IDIKICAgIDs7CiAgICAtaHwtLWhlbHApCiAgICBzaGlmdAogICAgdXNhZ2UKICAgIDs7ICAgIC0tc2V0LXgpCiAgICBTRVRYPTEKICAgIHNoaWZ0CiAgICA7OyAgICAKICAgIC1ufC0tbm8tZ2Vja29kcml2ZXIpCiAgICBfSU5TVEFMTF9HRUNLT0RSSVZFUj0wCiAgICBzaGlmdAogICAgOzsKICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRJbmRlbnQoKSB7CiAgcHJpbnRmICIlcyIgIiRJTkRFTlRfU1RSSU5HIgp9CmlmIFsgIiRTRVRYIiAtZXEgMSBdOyB0aGVuIHNldCAteDsgZmkKZnVuY3Rpb24gaW5zdGFsbFBhY21hbklmTm90SW5zdGFsbGVkKCkgewogIGlmIFsgIiQoY29tbWFuZCAtdiBwYWNtYW4pIiA9ICIiIF07IHRoZW4KICAgIHVybD0iaHR0cHM6Ly9tb25kZWphLmdpdGh1Yi5pby9zaHJlYWQvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC8kX1NDUklQVF9GSUxFTkFNRSIKICAgIGN1cmwgLXNMICIkdXJsIiB8IHN1ZG8gYmFzaCAtID4gL2Rldi9udWxsCiAgZmk7Cn0KZnVuY3Rpb24gZ2V0VW5peERpc3RybygpIHsKICBpZiBbIC16ICIkVU5JWF9ESVNUUk8iIF07IHRoZW4KICAgIHNvdXJjZSA8KGN1cmwgLXNMIGh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy91dGlsL2dldC1kaXN0cm8vZW4uc2gpCiAgZmk7Cn0KZnVuY3Rpb24gaW5zdGFsbE1vemlsbGFGaXJlZm94KCkgewogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzIiAiJF9NU0dfSU5TVEFMTElOR19NT1pJTExBX0ZJUkVGT1hfUEFDS0FHRVMiCiAgX01PWklMTEFfRklSRUZPWF9QQUNLQUdFX05BTUU9ImZpcmVmb3giCiAgaWYgWyAiJFVOSVhfRElTVFJPIiA9ICJkZWJpYW4iIF07IHRoZW4KICAgIF9NT1pJTExBX0ZJUkVGT1hfUEFDS0FHRV9OQU1FPSJmaXJlZm94LWVzciIKICBmaTsKICBfRklSRUZPWF9MQVRFU1RfVkVSU0lPTj0kKHBhY21hbiAtUWkgIiRfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VfTkFNRSIgICAgIHwgZ3JlcCBWZXJzaW9uOiB8IGN1dCAtZCcgJyAtZjIgfCBjdXQgLWQnKycgLWYxKQogIHByaW50ZiAiICh2JXMpLi4uXG4iICIkX0ZJUkVGT1hfTEFURVNUX1ZFUlNJT04iCiAgX01PWklMTEFfRklSRUZPWF9QQUNLQUdFUz0oIiRfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VfTkFNRSIpCiAgaWYgWyAiJFVOSVhfRElTVFJPIiA9ICJkZWJpYW4iIF07IHRoZW4KICAgIF9NT1pJTExBX0ZJUkVGT1hfUEFDS0FHRVMrPSgiZmlyZWZveC1lc3ItbDEwbi1lcy1lcyIpCiAgZmk7CiAgZm9yIFBBQ0tBR0UgaW4gIiR7X01PWklMTEFfRklSRUZPWF9QQUNLQUdFU1tAXX0iOyBkbwogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAgICVzIiAiJFBBQ0tBR0UiCiAgICBpZiBbWyAiJChzdWRvIHBhY21hbiAtUWkgIiRQQUNLQUdFIiAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogICAgICBzdWRvIHBhY21hbiAtUyAtLSAteSAiJFBBQ0tBR0UiID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICAgIGZpOwogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZG9uZQp9CmZ1bmN0aW9uIGluc3RhbGxHZWNrb2RyaXZlcigpIHsKICBwcmludGYgIiAgJXMiICIkX01TR19JTlNUQUxMSU5HX0dFQ0tPRFJJVkVSIgogIHN1ZG8gcGFjbWFuIC1TIC0tIC15IGZpcmVmb3gtZ2Vja29kcml2ZXIgPiAvZGV2L251bGwKfQpmdW5jdGlvbiBtYWluKCkgewogIHByaW50SW5kZW50CiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfTU9aSUxMQV9FQ09TWVNURU0iCiAgaW5zdGFsbFBhY21hbklmTm90SW5zdGFsbGVkCiAgZ2V0VW5peERpc3RybwogIGlmIGNvbW1hbmQgLXYgZmlyZWZveCAmPiAvZGV2L251bGw7IHRoZW4KICAgIF9NT1pJTExBX0ZJUkVGT1hfVkVSU0lPTj0kKAogICAgICBzdWRvIC11ICIkU1VET19VU0VSIiBmaXJlZm94IC0tdmVyc2lvbiB8IGN1dCAtZCcgJyAtZjMpCiAgICBwcmludEluZGVudAogICAgcHJpbnRmICIgICVzICh2JXMpIiAiJF9NU0dfRk9VTkRfTU9aSUxMQV9GSVJFRk9YX0lOU1RBTExFRCIgIiRfTU9aSUxMQV9GSVJFRk9YX1ZFUlNJT04iCiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBlbHNlCiAgICBpbnN0YWxsTW96aWxsYUZpcmVmb3gKICBmaTsKICBpZiBbICRfSU5TVEFMTF9HRUNLT0RSSVZFUiAtZXEgMSBdICYmIFsgIiRVTklYX0RJU1RSTyIgIT0gImRlYmlhbiIgXTsgdGhlbgogICAgX0dFQ0tPRFJJVkVSX1BBVEg9IiQoY29tbWFuZCAtdiBnZWNrb2RyaXZlcikiCiAgICBpZiBbICIkX0dFQ0tPRFJJVkVSX1BBVEgiICE9ICIiIF07IHRoZW4KICAgICAgcHJpbnRJbmRlbnQKICAgICAgcHJpbnRmICIgICVzIiAiJF9NU0dfRk9VTkRfQ0hFQ0tPRFJJVkVSX0lOU1RBTExFRCIKICAgICAgcHJpbnRmICIgKHYlcykiICIkKGdlY2tvZHJpdmVyIC0tdmVyc2lvbiB8IGhlYWQgLW4xIHwgY3V0IC1kJyAnIC1mMikiCiAgICBlbHNlCiAgICAgIGluc3RhbGxHZWNrb2RyaXZlcgogICAgZmk7CiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBmaTsKfQppZiAocmV0dXJuIDAgMj4vZGV2L251bGwpOyB0aGVuCiAgZXhwb3J0VmFyaWFibGVzCmVsc2UKICBtYWluCmZpOwppZiBbICIkU0VUWCIgLWVxIDEgXTsgdGhlbiBzZXQgK3g7IGZp'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
