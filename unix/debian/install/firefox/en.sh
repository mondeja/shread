#!/bin/bash
source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iVGhpcyBzY3JpcHQgbmVlZHMgdG8gYmUgZXhlY3V0ZWQgYXMgc3VwZXJ1c2VyLiIKX01TR19DSEVDS0lOR19NT1pJTExBX0VDT1NZU1RFTT0iQ2hlY2tpbmcgTW96aWxsYSBlY29zeXN0ZW0uLi4iCl9NU0dfRk9VTkRfTU9aSUxMQV9GSVJFRk9YX0lOU1RBTExFRD0iTW96aWxsYSBGaXJlZm94IGZvdW5kIGluc3RhbGxlZCBpbiB0aGUgc3lzdGVtIgpfTVNHX0lOU1RBTExJTkdfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VTPSJJbnN0YWxsaW5nIE1vemlsbGEgRmlyZWZveCBwYWNrYWdlcy4uLiIKX01TR19GT1VORF9DSEVDS09EUklWRVJfSU5TVEFMTEVEPSJHZWNrb2RyaXZlciBmb3VuZCBpbnN0YWxsZWQgaW4gdGhlIHN5c3RlbSIKX01TR19JTlNUQUxMSU5HX0dFQ0tPRFJJVkVSPSJJbnN0YWxsaW5nIGdlY2tvZHJpdmVyLi4uIgppZiBbWyAkKC91c3IvYmluL2lkIC11KSAtbmUgMCBdXTsgdGhlbgogIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUiIgPiYyCiAgZXhpdCAxCmZpOwpfUFJFUEVORF9TVERPVVRfU1RSSU5HPSIiCmZvciBhcmcgaW4gIiRAIgpkbwogICAgY2FzZSAkYXJnIGluCiAgICAgICAgLS1wcmVwZW5kLXN0ZG91dCkKICAgICAgICBzaGlmdAogICAgICAgIF9QUkVQRU5EX1NURE9VVF9TVFJJTkc9JDEKICAgICAgICBzaGlmdAogICAgICAgIDs7CiAgICBlc2FjCmRvbmUKZnVuY3Rpb24gcHJpbnRQcmVwZW5kZWRTdGRvdXQoKSB7CiAgcHJpbnRmICIlcyIgIiRfUFJFUEVORF9TVERPVVRfU1RSSU5HIgp9CmlmIFsgLXogIiRVTklYX0RJU1RSTyIgXTsgdGhlbgogIGlmIFtbICIkKHN1ZG8gZHBrZyAtcyBjdXJsIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgICBzdWRvIGFwdC1nZXQgaW5zdGFsbCAteSAtcXFxIGN1cmwgPiAvZGV2L251bGwKICBmaTsKICBzb3VyY2UgPChjdXJsIC1zTCBodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vdXRpbC9nZXQtZGlzdHJvLnNoKQpmaTsKcHJpbnRQcmVwZW5kZWRTdGRvdXQKcHJpbnRmICIlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfTU9aSUxMQV9FQ09TWVNURU0iCnByaW50UHJlcGVuZGVkU3Rkb3V0CmlmIGNvbW1hbmQgLXYgZmlyZWZveCAmPiAvZGV2L251bGw7IHRoZW4KICBfTU9aSUxMQV9GSVJFRk9YX1ZFUlNJT049JCgKICAgIHN1ZG8gLXUgIiRTVURPX1VTRVIiIGZpcmVmb3ggLS12ZXJzaW9uIHwgY3V0IC1kJyAnIC1mMykKICBwcmludGYgIiAgJXMgKHYlcykiICIkX01TR19GT1VORF9NT1pJTExBX0ZJUkVGT1hfSU5TVEFMTEVEIiAiJF9NT1pJTExBX0ZJUkVGT1hfVkVSU0lPTiIKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKZWxzZQogIHByaW50ZiAiICAlc1xuIiAiJF9NU0dfSU5TVEFMTElOR19NT1pJTExBX0ZJUkVGT1hfUEFDS0FHRVMiCiAgaWYgWyAiJFVOSVhfRElTVFJPIiA9ICJkZWJpYW4iIF07IHRoZW4KICAgIF9GSVJFRk9YX0xBVEVTVF9WRVJTSU9OPSQoCiAgICAgIHN1ZG8gYXB0LWNhY2hlIHBvbGljeSBmaXJlZm94LWVzciB8IGdyZXAgLVBvICcoXGQrXC4pK1xkKycgfCBoZWFkIC1uIDEpCiAgZWxzZQogICAgX0ZJUkVGT1hfTEFURVNUX1ZFUlNJT049JCgKICAgICAgc3VkbyBhcHQtY2FjaGUgcG9saWN5IGZpcmVmb3ggfCBncmVwIC1QbyAnKFxkK1wuKStcZCsnIHwgaGVhZCAtbiAxKQogIGZpOwogIHByaW50ZiAiICh2JXMpLi4uIiAiJF9GSVJFRk9YX0xBVEVTVF9WRVJTSU9OIgogIGlmIFsgIiRVTklYX0RJU1RSTyIgPSAiZGViaWFuIiBdOyB0aGVuCiAgICBfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VTPSgKICAgICAgImZpcmVmb3gtZXNyIgogICAgICAiZmlyZWZveC1lc3ItbDEwbi1lcy1lcyIKICAgICkKICBlbHNlCiAgICBfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VTPSgKICAgICAgImZpcmVmb3giCiAgICApCiAgZmk7CiAgZm9yIFBBQ0tBR0UgaW4gIiR7X01PWklMTEFfRklSRUZPWF9QQUNLQUdFU1tAXX0iOyBkbwogICAgcHJpbnRQcmVwZW5kZWRTdGRvdXQKICAgIHByaW50ZiAiICAgICVzIiAiJFBBQ0tBR0UiCiAgICBpZiBbWyAiJChzdWRvIGRwa2cgLXMgIiRQQUNLQUdFIiAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogICAgICBzdWRvIGFwdC1nZXQgaW5zdGFsbCAteSAtcXFxICIkUEFDS0FHRSIgPiAvZGV2L251bGwgfHwgZXhpdCAkPwogICAgZmk7CiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBkb25lCmZpOwpwcmludFByZXBlbmRlZFN0ZG91dApfR0VDS09EUklWRVJfUEFUSD0iJChjb21tYW5kIC12IGdlY2tvZHJpdmVyKSIKaWYgWyAiJF9HRUNLT0RSSVZFUl9QQVRIIiAhPSAiIiBdOyB0aGVuCiAgcHJpbnRmICIgICVzIiAiJF9NU0dfRk9VTkRfQ0hFQ0tPRFJJVkVSX0lOU1RBTExFRCIKICBwcmludGYgIiAodiVzKSIgIiQoZ2Vja29kcml2ZXIgLS12ZXJzaW9uIHwgaGVhZCAtbjEgfCBjdXQgLWQnICcgLWYyKSIKZWxzZQogIHByaW50ZiAiICAlcyIgIiRfTVNHX0lOU1RBTExJTkdfR0VDS09EUklWRVIiCiAgc3VkbyBhcHQtZ2V0IGluc3RhbGwgLXkgLXFxcSBmaXJlZm94LWdlY2tvZHJpdmVyID4gL2Rldi9udWxsCmZpOwpwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIK' | base64 -d)
