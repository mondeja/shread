#!/bin/bash
source <(printf 'IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUj0iRXN0ZSBzY3JpcHQgbmVjZXNpdGEgc2VyIGVqZWN1dGFkbyBjb21vIHN1cGVydXN1YXJpby4iCl9NU0dfQ0hFQ0tJTkdfTU9aSUxMQV9FQ09TWVNURU09IkNvbXByb2JhbmRvIGVjb3Npc3RlbWEgTW96aWxsYS4uLiIKX01TR19GT1VORF9NT1pJTExBX0ZJUkVGT1hfSU5TVEFMTEVEPSJFY29udHJhZG8gTW96aWxsYSBGaXJlZm94IGluc3RhbGFkbyBlbiBlbCBzaXN0ZW1hIgpfTVNHX0lOU1RBTExJTkdfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VTPSJJbnN0YWxhbmRvIHBhcXVldGVzIGRlIE1vemlsbGEgRmlyZWZveC4uLiIKX01TR19GT1VORF9DSEVDS09EUklWRVJfSU5TVEFMTEVEPSJFbmNvbnRyYWRvIEdlY2tvZHJpdmVyIGluc3RhbGFkbyBlbiBlbCBzaXN0ZW1hIgpfTVNHX0lOU1RBTExJTkdfR0VDS09EUklWRVI9Ikluc3RhbGFuZG8gZ2Vja29kcml2ZXIuLi4iCmlmIFtbICQoL3Vzci9iaW4vaWQgLXUpIC1uZSAwIF1dOyB0aGVuCiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSIiA+JjIKICBleGl0IDEKZmk7CklOREVOVF9TVFJJTkc9IiIKZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLS1pbmRlbnQpCiAgICBzaGlmdAogICAgSU5ERU5UX1NUUklORz0kMQogICAgc2hpZnQKICAgIDs7CiAgZXNhYwpkb25lCmZ1bmN0aW9uIHByaW50SW5kZW50KCkgewogIHByaW50ZiAiJXMiICIkSU5ERU5UX1NUUklORyIKfQppZiBbICIkKGNvbW1hbmQgLXYgcGFjbWFuKSIgPSAiIiBdOyB0aGVuCiAgU0NSSVBUX0ZJTEVOQU1FPSIkKGJhc2VuYW1lICIkMCIpIgogIGlmIFsgIiRTQ1JJUFRfRklMRU5BTUUiID0gIm1haW4uc2giIF07IHRoZW4KICAgIGZpbGVwYXRoPSJzcmMvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC9tYWluLnNoIgogICAgYmFzaCAiJGZpbGVwYXRoIiA+IC9kZXYvbnVsbAogIGVsc2UKICAgIHVybD0iaHR0cHM6Ly9tb25kZWphLmdpdGh1Yi5pby9zaHJlYWQvdW5peC9fL2Rvd25sb2FkL3BhY2FwdC8kU0NSSVBUX0ZJTEVOQU1FIgogICAgY3VybCAtc0wgIiR1cmwiIHwgc3VkbyBiYXNoIC0gPiAvZGV2L251bGwKICBmaTsKZmk7CmlmIFsgLXogIiRVTklYX0RJU1RSTyIgXTsgdGhlbgogIGlmIFtbICIkKHN1ZG8gcGFjbWFuIC1RaSBjdXJsIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgICBzdWRvIHBhY21hbiAtUyBjdXJsID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICBmaTsKICBzb3VyY2UgPChjdXJsIC1zTCBodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vdXRpbC9nZXQtZGlzdHJvL2VuLnNoKQpmaTsKcHJpbnRJbmRlbnQKcHJpbnRmICIlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfTU9aSUxMQV9FQ09TWVNURU0iCnByaW50SW5kZW50CmlmIGNvbW1hbmQgLXYgZmlyZWZveCAmPiAvZGV2L251bGw7IHRoZW4KICBfTU9aSUxMQV9GSVJFRk9YX1ZFUlNJT049JCgKICAgIHN1ZG8gLXUgIiRTVURPX1VTRVIiIGZpcmVmb3ggLS12ZXJzaW9uIHwgY3V0IC1kJyAnIC1mMykKICBwcmludGYgIiAgJXMgKHYlcykiICIkX01TR19GT1VORF9NT1pJTExBX0ZJUkVGT1hfSU5TVEFMTEVEIiAiJF9NT1pJTExBX0ZJUkVGT1hfVkVSU0lPTiIKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKZWxzZQogIHByaW50ZiAiICAlc1xuIiAiJF9NU0dfSU5TVEFMTElOR19NT1pJTExBX0ZJUkVGT1hfUEFDS0FHRVMiCiAgaWYgWyAiJFVOSVhfRElTVFJPIiA9ICJkZWJpYW4iIF07IHRoZW4KICAgIF9GSVJFRk9YX0xBVEVTVF9WRVJTSU9OPSQoCiAgICAgIHN1ZG8gYXB0LWNhY2hlIHBvbGljeSBmaXJlZm94LWVzciB8IGdyZXAgLVBvICcoXGQrXC4pK1xkKycgfCBoZWFkIC1uIDEpCiAgZWxzZQogICAgX0ZJUkVGT1hfTEFURVNUX1ZFUlNJT049JCgKICAgICAgc3VkbyBhcHQtY2FjaGUgcG9saWN5IGZpcmVmb3ggfCBncmVwIC1QbyAnKFxkK1wuKStcZCsnIHwgaGVhZCAtbiAxKQogIGZpOwogIHByaW50ZiAiICh2JXMpLi4uIiAiJF9GSVJFRk9YX0xBVEVTVF9WRVJTSU9OIgogIGlmIFsgIiRVTklYX0RJU1RSTyIgPSAiZGViaWFuIiBdOyB0aGVuCiAgICBfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VTPSgKICAgICAgImZpcmVmb3gtZXNyIgogICAgICAiZmlyZWZveC1lc3ItbDEwbi1lcy1lcyIKICAgICkKICBlbHNlCiAgICBfTU9aSUxMQV9GSVJFRk9YX1BBQ0tBR0VTPSgKICAgICAgImZpcmVmb3giCiAgICApCiAgZmk7CiAgZm9yIFBBQ0tBR0UgaW4gIiR7X01PWklMTEFfRklSRUZPWF9QQUNLQUdFU1tAXX0iOyBkbwogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAgICVzIiAiJFBBQ0tBR0UiCiAgICBpZiBbWyAiJChzdWRvIHBhY21hbiAtUWkgIiRQQUNLQUdFIiAyPiAvZGV2L251bGwgfCBncmVwIFN0YXR1cykiICE9ICJTdGF0dXM6IGluc3RhbGwgb2sgaW5zdGFsbGVkIiBdXTsgdGhlbgogICAgICBzdWRvIHBhY21hbiAtUyAiJFBBQ0tBR0UiID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICAgIGZpOwogICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgZG9uZQpmaTsKcHJpbnRJbmRlbnQKX0dFQ0tPRFJJVkVSX1BBVEg9IiQoY29tbWFuZCAtdiBnZWNrb2RyaXZlcikiCmlmIFsgIiRfR0VDS09EUklWRVJfUEFUSCIgIT0gIiIgXTsgdGhlbgogIHByaW50ZiAiICAlcyIgIiRfTVNHX0ZPVU5EX0NIRUNLT0RSSVZFUl9JTlNUQUxMRUQiCiAgcHJpbnRmICIgKHYlcykiICIkKGdlY2tvZHJpdmVyIC0tdmVyc2lvbiB8IGhlYWQgLW4xIHwgY3V0IC1kJyAnIC1mMikiCmVsc2UKICBwcmludGYgIiAgJXMiICIkX01TR19JTlNUQUxMSU5HX0dFQ0tPRFJJVkVSIgogIHN1ZG8gcGFjbWFuIC1TIGZpcmVmb3gtZ2Vja29kcml2ZXIgPiAvZGV2L251bGwKZmk7CnByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgo=' | base64 -d)
