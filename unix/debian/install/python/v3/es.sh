#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVzLnNoCiMhL2Jpbi9iYXNoCl9NU0dfU0VUVElOR19VUF9QWTNfRUNPU1lTVEVNPSJDb25maWd1cmFuZG8gZWNvc2lzdGVtYSBQeXRob24zLi4uIgpfTVNHX0lOU1RBTExJTkdfQkFTRV9QQUNLQUdFPSJJbnN0YWxhbmRvIHBhcXVldGUgYmFzZSIKX01TR19GT1VORF9QWTNfSU5TVEFMTEVEPSJFbmNvbnRyYWRvIFB5dGhvbjMgaW5zdGFsYWRvIGVuIGVsIHNpc3RlbWEiCl9NU0dfQ0hFQ0tJTkdfQURESVRJT05BTF9QWTNfUEFDS0FHRVM9IkNvbXByb2JhbmRvIHBhcXVldGVzIGRlIFB5dGhvbiBhZGljaW9uYWxlcy4uLiIKX01TR19VUERBVElOR19HTE9CQUxfUFkzX0xJQlJBUklFUz0iQWN0dWFsaXphbmRvIGJpYmxpb3RlY2FzIGRlIFB5dGhvbjMgZ2xvYmFsZXMuLi4iCklOREVOVF9TVFJJTkc9IiIKX1VQR1JBREVfUFkzX0dMT0JBTF9MSUJTPTEKZnVuY3Rpb24gdXNhZ2UgewogICAgY2F0IDw8SEVMUF9VU0FHRQpVc2FnZTogc3JjL3VuaXgvZGViaWFuL2luc3RhbGwvcHl0aG9uL3YzIFstaF0gWy1pXSBbLS1uby11cGdyYWRlLXB5My1nbG9iYWwtbGlic10KCiAgSW5zdGFsbHMgc29tZSBQeXRob24yIGFuZCBQeXRob24zIEFQVCBwYWNrYWdlcyBpZiBhcmUgbm90IGluc3RhbGxlZDoKCiAgLSBjdXJsCiAgLSBweXRob24zLWRldgogIC0gcHl0aG9uMy1waXAKICAtIHB5dGhvbjMtc2V0dXB0b29scwogIC0gcHl0aG9uMy10ZXN0cmVzb3VyY2VzCiAgLSBsaWJ4bWwyLXV0aWxzCiAgLSBweXRob24tbHhtbAogIC0gcHl0aG9uMy1seG1sCiAgLSBweXRob24tbnVtcHkKICAtIHB5dGhvbjMtbnVtcHkKCiAgKyBJbiBVYnVudHUgPj0gMTggaW5zdGFsbHMgYWxzbzoKICAgIC0gcHl0aG9uMy1kaXN0dXRpbHMKICArIEluIFVidW50dSA8IDIwIGluc3RhbGxzIGFsc286CiAgICAtIHB5dGhvbi1waXAKICAgIC0gcHl0aG9uLWRldgogICsgSW4gVWJ1bnR1ID49IDIwIGluc3RhbGxzIGFsc286CiAgICAtIHB5dGhvbi1kZXYtaXMtcHl0aG9uMgoKICBBbHNvLCBpbnN0YWxscyBvciB1cGdyYWRlIHVzaW5nIFBJUCBzb21lIFB5dGhvbjMgcGFja2FnZXMgZ2xvYmFsbHkgKHRoaXMgc3RlcAogIGNhbiBiZSBpZ25vcmVkIHVzaW5nICctLW5vLXVwZ3JhZGUtcHkzLWdsb2JhbC1saWJzJyBvcHRpb24pOgoKICAtIHBpcAogIC0gdmlydHVhbGVudgogIC0gc2V0dXB0b29scwogIC0gdGVzdHJlc291cmNlcwoKT3B0aW9uczoKICAtaCwgLS1oZWxwICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyB0aGlzIGhlbHAgbWVzc2FnZSBhbmQgZXhpdC4KICAtaSwgLS1pbmRlbnQgU1RSSU5HICAgICAgICAgICAgICAgRWFjaCBsaW5lIG9mIHRoZSBzY3JpcHQgb3V0cHV0IHdpbGwgYmUgcHJlY2VkZWQgd2l0aCB0aGUgc3RyaW5nIGRlZmluZWQgaW4gdGhpcyBwYXJhbWV0ZXIuCiAgLS1uby11cGdyYWRlLXB5My1nbG9iYWwtbGlicyAgICAgIElnbm9yZXMgdGhlIGluc3RhbGxhdGlvbiBvciB1cGdyYWRlIG9mIFB5dGhvbjMgcGFja2FnZXMgZ2xvYmFsbHkgdXNpbmcgUElQLgoKSEVMUF9VU0FHRQogICAgZXhpdCAxCn0KZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLWl8LS1pbmRlbnQpCiAgICBzaGlmdAogICAgSU5ERU5UX1NUUklORz0kMQogICAgc2hpZnQKICAgIDs7CiAgICAtaHwtLWhlbHApCiAgICBzaGlmdAogICAgdXNhZ2UKICAgIDs7CiAgICAtLW5vLXVwZ3JhZGUtcHkzLWdsb2JhbC1saWJzKQogICAgX1VQR1JBREVfUFkzX0dMT0JBTF9MSUJTPTAKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXTsgdGhlbgogIGlmIFsgLXogIiRfU0NSSVBUX0ZJTEVOQU1FIiBdOyB0aGVuCiAgICBmaWxlcGF0aD0ic3JjL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvbWFpbi5zaCIKICAgIGJhc2ggIiRmaWxlcGF0aCIKICBlbHNlCiAgICB1cmw9Imh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvJF9TQ1JJUFRfRklMRU5BTUUiCiAgICBjdXJsIC1zTCAiJHVybCIgfCBzdWRvIGJhc2ggLSA+IC9kZXYvbnVsbAogIGZpOwpmaTsKaWYgWyAteiAiJFVOSVhfRElTVFJPIiBdIHx8IFsgLXogIiRVTklYX0RJU1RST19WRVJTSU9OX05VTUJFUl9NQUpPUiIgXTsgdGhlbgogIHNvdXJjZSA8KGN1cmwgLXNMIGh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy91dGlsL2dldC1kaXN0cm8vZW4uc2gpCmZpOwpmdW5jdGlvbiBpbnN0YWxsTWFpblB5dGhvbjNBcHRQYWNrYWdlIHsKICBwcmludEluZGVudAogIFBZM19CSU5BUllfRklMRVBBVEg9IiQoY29tbWFuZCAtdiBweXRob24zKSIKICBpZiBbICIkUFkzX0JJTkFSWV9GSUxFUEFUSCIgPSAiIiBdOyB0aGVuCiAgICBfUFlUSE9OX1NUQUJMRV9QQUNLQUdFX1ZFUlNJT049JCgKICAgICAgcGFjbWFuIC1RaSBweXRob24zLWRldiB8IGdyZXAgVmVyc2lvbjogfCBjdXQgLWQnICcgLWYyKQogICAgcHJpbnRmICIgICVzIiAiJF9NU0dfSU5TVEFMTElOR19CQVNFX1BBQ0tBR0UiCiAgICBpZiBbICIkX1BZVEhPTl9TVEFCTEVfUEFDS0FHRV9WRVJTSU9OIiAhPSAiIiBdOyB0aGVuCiAgCSAgcHJpbnRmICIgKHYlcykiICIkX1BZVEhPTl9TVEFCTEVfUEFDS0FHRV9WRVJTSU9OIgogICAgZmk7CiAgICBwcmludGYgIi4uLiIKICAgIHN1ZG8gcGFjbWFuIC1TIC0tIC15IHB5dGhvbjMtZGV2ID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICAgIF9QWVRIT05fVkVSU0lPTj0iJCgiJFBZM19CSU5BUllfRklMRVBBVEgiIC0tdmVyc2lvbiB8IGN1dCAtYzctMTIgfCB0ciAtZCAnICcpIgogIGVsc2UKICAgIF9QWVRIT05fVkVSU0lPTj0iJCgiJFBZM19CSU5BUllfRklMRVBBVEgiIC0tdmVyc2lvbiB8IGN1dCAtYzctMTIgfCB0ciAtZCAnICcpIgogIAlwcmludGYgIiAgJXMgKHYlcykiICIkX01TR19GT1VORF9QWTNfSU5TVEFMTEVEIiAiJF9QWVRIT05fVkVSU0lPTiIKICBmaTsKICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKfQpmdW5jdGlvbiBkaXNjb3Zlckluc3RhbGxhdGlvbkFwdFBhY2thZ2VzIHsKICBJTlNUQUxMQVRJT05fUEFDS0FHRVM9KAogICAgInB5dGhvbjMtZGV2IgogICAgInB5dGhvbjMtcGlwIgogICAgInB5dGhvbjMtc2V0dXB0b29scyIKICAgICJweXRob24zLXRlc3RyZXNvdXJjZXMiCiAgICAibGlieG1sMi11dGlscyIKICAgICJweXRob24tbHhtbCIKICAgICJweXRob24zLWx4bWwiCiAgICAicHl0aG9uLW51bXB5IgogICAgInB5dGhvbjMtbnVtcHkiCiAgKQogIGlmIFsgIiRVTklYX0RJU1RSTyIgPSAidWJ1bnR1IiBdOyB0aGVuCiAgICBpZiBbICIkVU5JWF9ESVNUUk9fVkVSU0lPTl9OVU1CRVJfTUFKT1IiIC1nZSAxOCBdOyB0aGVuCiAgICAgIElOU1RBTExBVElPTl9QQUNLQUdFUys9KAogICAgICAgICJweXRob24zLWRpc3R1dGlscyIKICAgICAgKQogICAgZmk7CiAgICBpZiBbICIkVU5JWF9ESVNUUk9fVkVSU0lPTl9OVU1CRVJfTUFKT1IiIC1sdCAyMCBdOyB0aGVuCiAgICAgIElOU1RBTExBVElPTl9QQUNLQUdFUys9KAogICAgICAgICJweXRob24tcGlwIgogICAgICAgICJweXRob24tZGV2IgogICAgICApCiAgICBlbHNlCiAgICAgIElOU1RBTExBVElPTl9QQUNLQUdFUys9KAogICAgICAgICJweXRob24tZGV2LWlzLXB5dGhvbjIiCiAgICAgICkKICAgIGZpOwogIGZpOwp9CmZ1bmN0aW9uIGluc3RhbGxQeXRob25BZGRpdGlvbmFsQXB0UGFja2FnZXMgewogIHByaW50SW5kZW50CiAgcHJpbnRmICIgICVzXG4iICIkX01TR19DSEVDS0lOR19BRERJVElPTkFMX1BZM19QQUNLQUdFUyIKICBmb3IgREVQIGluICIke0lOU1RBTExBVElPTl9QQUNLQUdFU1tAXX0iOyBkbwogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAgICVzIiAiJERFUCIKICAgIGlmIFtbICIkKHN1ZG8gcGFjbWFuIC1RaSAiJERFUCIgMj4gL2Rldi9udWxsIHwgZ3JlcCBTdGF0dXMpIiAhPSAiU3RhdHVzOiBpbnN0YWxsIG9rIGluc3RhbGxlZCIgXV07IHRoZW4KICAgICAgc3VkbyBwYWNtYW4gLVMgLS0gLXkgIiRERVAiID4gL2Rldi9udWxsIHx8IGV4aXQgJD8KICAgIGZpOwogICAgX0RFUF9WRVJTSU9OPSQoYXB0LWNhY2hlIHBvbGljeSAiJERFUCIgfCBncmVwIC1QbyAiKFxkK1wuKStcZCsiIHwgaGVhZCAtbiAxKQogICAgaWYgWyAiJF9ERVBfVkVSU0lPTiIgIT0gIiIgXTsgdGhlbgogICAgICBwcmludGYgIiAodiVzKSIgIiRfREVQX1ZFUlNJT04iCiAgICBmaTsKICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogIGRvbmUKfQpmdW5jdGlvbiBjb25maWd1cmVQSVAgewogIFVTRVJfSE9NRT0iJChnZXRlbnQgcGFzc3dkICIkU1VET19VU0VSIiB8IGN1dCAtZDogLWY2KSIKICBpZiBbIC1kICIkSE9NRS8uY2FjaGUvcGlwLyIgXTsgdGhlbgogICAgX1BJUF9DQUNIRV9GSUxFUEFUSD0iJFVTRVJfSE9NRS8uY2FjaGUvcGlwLyIKICAgIGlmIFsgLWYgIiRfUElQX0NBQ0hFX0ZJTEVQQVRIIiBdOyB0aGVuCiAgICAgIHN1ZG8gY2hvd24gLVIgIiRTVURPX1VTRVIiICIkX1BJUF9DQUNIRV9GSUxFUEFUSCIKICAgIGZpOwogIGZpOwogIGlmIFsgIiQoY29tbWFuZCAtdiBweXRob24yKSIgIT0gIiIgXTsgdGhlbgogICAgc3VkbyBweXRob24yIC1tIHBpcCBpbnN0YWxsIC1xcSBwaXA9PTIwLjAuMgogIGZpOwp9CmZ1bmN0aW9uIHVwZ3JhZGVHbG9iYWxMaWJyYXJpZXMgewogIGlmIFsgJF9VUEdSQURFX1BZM19HTE9CQUxfTElCUyAtZXEgMSBdOyB0aGVuCiAgICBwcmludEluZGVudAogICAgcHJpbnRmICIgICVzXG4iICIkX01TR19VUERBVElOR19HTE9CQUxfUFkzX0xJQlJBUklFUyIKICAgIEdMT0JBTF9SRUNPTU1FTkRFRF9MSUJSQVJJRVM9KAogICAgICAicGlwIgogICAgICAidmlydHVhbGVudiIKICAgICAgInNldHVwdG9vbHMiCiAgICAgICJ0ZXN0cmVzb3VyY2VzIgogICAgKQogICAgZm9yIExJQiBpbiAiJHtHTE9CQUxfUkVDT01NRU5ERURfTElCUkFSSUVTW0BdfSI7IGRvCiAgICAgIHByaW50SW5kZW50CiAgICAgIHByaW50ZiAiICAgICVzIiAiJExJQiIKICAgICAgX0dFVF9WRVJTSU9OX0VYRUNfU1RSPSIKaW1wb3J0IHN5czsKdHJ5OiBpbXBvcnQgJExJQiBhcyBsOwpleGNlcHQgSW1wb3J0RXJyb3IgYXMgZXJyOiBzeXMuZXhpdCg3NzcpOwpwcmludChsLl9fdmVyc2lvbl9fIGlmIGlzaW5zdGFuY2UobC5fX3ZlcnNpb25fXywgc3RyKSBlbHNlICAgJy4nLmpvaW4oW3N0cih2KSBmb3IgdiBpbiBsLl9fdmVyc2lvbl9fXVs6M10pLCBlbmQ9JycpOwogICIKICAgICAgX0xJQl9MT0NBTF9WRVJTSU9OPSIkKCIkUFkzX0JJTkFSWV9GSUxFUEFUSCIgLWMgIiRfR0VUX1ZFUlNJT05fRVhFQ19TVFIiKSIKICAgICAgX0xJQl9MT0NBTF9WRVJTSU9OX0VYSVRfQ09ERT0kPwogICAgICBpZiBbICRfTElCX0xPQ0FMX1ZFUlNJT05fRVhJVF9DT0RFIC1lcSA3NzcgXTsgdGhlbgogICAgICAJc3VkbyAtSCAiJFBZM19CSU5BUllfRklMRVBBVEgiIC1tIHBpcCBpbnN0YWxsIC1VIC0tcXVpZXQgIiRMSUIiCiAgICAgIGVsc2UKICAgICAgICBwcmludGYgIiAoIgogICAgICAgIGlmIFsgIiRfTElCX0xPQ0FMX1ZFUlNJT04iICE9ICIiIF07IHRoZW4KICAgICAgICAgIHByaW50ZiAidiVzIiAiJF9MSUJfTE9DQUxfVkVSU0lPTiIKICAgICAgICBmaTsKICAgICAgICBfTElCX0xBU1RfUFlQSV9WRVJTSU9OPSQoCiAgICAgICAgICB4bWxsaW50IC0taHRtbCAtLXhwYXRoICIvL2FbbGFzdCgpXS90ZXh0KCkgIiAgICAgICAgICAgICA8KGN1cmwgLXNMICJodHRwczovL3B5cGkub3JnL3NpbXBsZS8kTElCLyIpIHwgICAgICAgICAgICAgZ3JlcCAtUG8gIihcZCtcLikrXGQrXHcqIikKICAgICAgICAgIGlmIFsgIiRfTElCX0xBU1RfUFlQSV9WRVJTSU9OIiAhPSAiJF9MSUJfTE9DQUxfVkVSU0lPTiIgXTsgdGhlbgogICAgICAgICAgICBpZiBbICIkX0xJQl9MT0NBTF9WRVJTSU9OIiAhPSAiIiBdOyB0aGVuCiAgICAgICAgICAgICAgcHJpbnRmICIgLT4gIgogICAgICAgICAgICBmaTsKICAgICAgICAgICAgcHJpbnRmICJ2JXMpLi4uIiAiJF9MSUJfTEFTVF9QWVBJX1ZFUlNJT04iCiAgICAgICAgICAgIF9saWJfZXF1YWxfdmVyc2lvbj0iJExJQj09JF9MSUJfTEFTVF9QWVBJX1ZFUlNJT04iCiAgICAgICAgICAgIHN1ZG8gLUggIiRQWTNfQklOQVJZX0ZJTEVQQVRIIiAtbSBwaXAgaW5zdGFsbCAtVSAtcXEgIiRfbGliX2VxdWFsX3ZlcnNpb24iCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50ZiAiKSIKICAgICAgICAgIGZpOwogICAgICBmaTsKICAgICAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCiAgICBkb25lCiAgZmk7Cn0KZnVuY3Rpb24gbWFpbiB7CiAgcHJpbnRJbmRlbnQKICBwcmludGYgIiVzXG4iICIkX01TR19TRVRUSU5HX1VQX1BZM19FQ09TWVNURU0iCiAgaW5zdGFsbE1haW5QeXRob24zQXB0UGFja2FnZQogIGRpc2NvdmVySW5zdGFsbGF0aW9uQXB0UGFja2FnZXMKICBpbnN0YWxsUHl0aG9uQWRkaXRpb25hbEFwdFBhY2thZ2VzCiAgY29uZmlndXJlUElQCiAgdXBncmFkZUdsb2JhbExpYnJhcmllcwp9CmlmIChyZXR1cm4gMCAyPi9kZXYvbnVsbCk7IHRoZW4KICBleHBvcnRWYXJpYWJsZXMKZWxzZQogIG1haW4KZmk7'
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
