#!/bin/bash
H='IyEvYmluL2Jhc2gKIyAtKi0gRU5DT0RJTkc6IFVURi04IC0qLQpfU0NSSVBUX0ZJTEVOQU1FPWVuLnNoCl9NU0dfRVhFQ1VURURfQVNfU1VQRVJVU0VSPSJUaGlzIHNjcmlwdCBuZWVkcyB0byBiZSBleGVjdXRlZCBhcyBzdXBlcnVzZXIuIgpfTVNHX1NFVFRJTkdfVVBfUFkzX0VDT1NZU1RFTT0iU2V0dGluZyB1cCBQeXRob24zIGVjb3N5c3RlbS4uLiIKX01TR19JTlNUQUxMSU5HX0JBU0VfUEFDS0FHRT0iSW5zdGFsbGluZyBiYXNlIHBhY2thZ2UiCl9NU0dfRk9VTkRfUFkzX0lOU1RBTExFRD0iRm91bmQgUHl0aG9uMyBpbnN0YWxsZWQgaW4gdGhlIHN5c3RlbSIKX01TR19DSEVDS0lOR19BRERJVElPTkFMX1BZM19QQUNLQUdFUz0iQ2hlY2tpbmcgYWRkaXRpb25hbCBQeXRob24gcGFja2FnZXMuLi4iCl9NU0dfVVBEQVRJTkdfR0xPQkFMX1BZM19MSUJSQVJJRVM9IlVwZGF0aW5nIGdsb2JhbCBQeXRob24zIGxpYnJhcmllcy4uLiIKaWYgISAocmV0dXJuIDAgMj4vZGV2L251bGwpOyB0aGVuCiAgaWYgW1sgJCgvdXNyL2Jpbi9pZCAtdSkgLW5lIDAgXV07IHRoZW4KICAgIHByaW50ZiAiJXNcbiIgIiRfTVNHX0VYRUNVVEVEX0FTX1NVUEVSVVNFUiIgPiYyCiAgICBleGl0IDEKICBmaTsKZmk7Cl9VUEdSQURFX1BZM19HTE9CQUxfTElCUz0xCklOREVOVF9TVFJJTkc9IiIKZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLS1uby11cGdyYWRlLXB5My1nbG9iYWwtbGlicykKICAgIF9VUEdSQURFX1BZM19HTE9CQUxfTElCUz0wCiAgICBzaGlmdAogICAgOzsKICAgIC0taW5kZW50KQogICAgc2hpZnQKICAgIElOREVOVF9TVFJJTkc9JDEKICAgIHNoaWZ0CiAgICA7OwogIGVzYWMKZG9uZQpmdW5jdGlvbiBwcmludEluZGVudCgpIHsKICBwcmludGYgIiVzIiAiJElOREVOVF9TVFJJTkciCn0KaWYgWyAiJChjb21tYW5kIC12IHBhY21hbikiID0gIiIgXTsgdGhlbgogIGlmIFsgLXogIiRfU0NSSVBUX0ZJTEVOQU1FIiBdOyB0aGVuCiAgICBmaWxlcGF0aD0ic3JjL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvbWFpbi5zaCIKICAgIGJhc2ggIiRmaWxlcGF0aCIKICBlbHNlCiAgICB1cmw9Imh0dHBzOi8vbW9uZGVqYS5naXRodWIuaW8vc2hyZWFkL3VuaXgvXy9kb3dubG9hZC9wYWNhcHQvJF9TQ1JJUFRfRklMRU5BTUUiCiAgICBjdXJsIC1zTCAiJHVybCIgfCBzdWRvIGJhc2ggLSA+IC9kZXYvbnVsbAogIGZpOwpmaTsKSU5TVEFMTEFUSU9OX0RFUEVOREVOQ0lFUz0oCiAgImRlYmNvbmYtdXRpbHMiCikKZm9yIERFUCBpbiAiJHtJTlNUQUxMQVRJT05fREVQRU5ERU5DSUVTW0BdfSI7IGRvCiAgaWYgW1sgIiQocGFjbWFuIC1RaSAiJERFUCIgMj4gL2Rldi9udWxsIHwgZ3JlcCBTdGF0dXMpIiAhPSAiU3RhdHVzOiBpbnN0YWxsIG9rIGluc3RhbGxlZCIgXV07IHRoZW4KICAgIHN1ZG8gcGFjbWFuIC1TIC0tIC15ICIkREVQIiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgZmk7CmRvbmU7CmlmIFsgIiQoY29tbWFuZCAtdiBkZWJjb25mLWdldC1zZWxlY3Rpb25zKSIgIT0gIiIgXTsgdGhlbgogIF9PUklHSU5BTF9ERUJDT05GX0ZST05URU5EPSQoCiAgICBzdWRvIGRlYmNvbmYtZ2V0LXNlbGVjdGlvbnMgfCBcCiAgICBncmVwIGRlYmNvbmYvZnJvbnRlbmQgfCBcCiAgICBhd2sgJ3twcmludCAkNH0nKQogIHN1ZG8gc2ggLWMgImVjaG8gJ2RlYmNvbmYgZGViY29uZi9mcm9udGVuZCBzZWxlY3QgTm9uaW50ZXJhY3RpdmUnIHwgZGViY29uZi1zZXQtc2VsZWN0aW9ucyIKZmk7CmlmIFsgLXogIiRVTklYX0RJU1RSTyIgXSB8fCBbIC16ICIkVU5JWF9ESVNUUk9fVkVSU0lPTl9OVU1CRVJfTUFKT1IiIF07IHRoZW4KICBzb3VyY2UgPChjdXJsIC1zTCBodHRwczovL21vbmRlamEuZ2l0aHViLmlvL3NocmVhZC91bml4L18vdXRpbC9nZXQtZGlzdHJvL2VuLnNoKQpmaTsKZnVuY3Rpb24gaW5zdGFsbE1haW5QeXRob24zQXB0UGFja2FnZSB7CiAgcHJpbnRJbmRlbnQKICBQWTNfQklOQVJZX0ZJTEVQQVRIPSIkKGNvbW1hbmQgLXYgcHl0aG9uMykiCiAgaWYgWyAiJFBZM19CSU5BUllfRklMRVBBVEgiID0gIiIgXTsgdGhlbgogICAgX1BZVEhPTl9TVEFCTEVfUEFDS0FHRV9WRVJTSU9OPSQoCiAgICAgIHBhY21hbiAtUWkgcHl0aG9uMy1kZXYgfCBncmVwIFZlcnNpb246IHwgY3V0IC1kJyAnIC1mMikKICAgIHByaW50ZiAiICAlcyIgIiRfTVNHX0lOU1RBTExJTkdfQkFTRV9QQUNLQUdFIgogICAgaWYgWyAiJF9QWVRIT05fU1RBQkxFX1BBQ0tBR0VfVkVSU0lPTiIgIT0gIiIgXTsgdGhlbgogIAkgIHByaW50ZiAiICh2JXMpIiAiJF9QWVRIT05fU1RBQkxFX1BBQ0tBR0VfVkVSU0lPTiIKICAgIGZpOwogICAgcHJpbnRmICIuLi4iCiAgICBzdWRvIHBhY21hbiAtUyAtLSAteSBweXRob24zLWRldiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgICBfUFlUSE9OX1ZFUlNJT049IiQoIiRQWTNfQklOQVJZX0ZJTEVQQVRIIiAtLXZlcnNpb24gfCBjdXQgLWM3LTEyIHwgdHIgLWQgJyAnKSIKICBlbHNlCiAgICBfUFlUSE9OX1ZFUlNJT049IiQoIiRQWTNfQklOQVJZX0ZJTEVQQVRIIiAtLXZlcnNpb24gfCBjdXQgLWM3LTEyIHwgdHIgLWQgJyAnKSIKICAJcHJpbnRmICIgICVzICh2JXMpIiAiJF9NU0dfRk9VTkRfUFkzX0lOU1RBTExFRCIgIiRfUFlUSE9OX1ZFUlNJT04iCiAgZmk7CiAgcHJpbnRmICIgXGVbOTJtXHhFMlx4OUNceDk0XGVbMzltXG4iCn0KZnVuY3Rpb24gZGlzY292ZXJJbnN0YWxsYXRpb25BcHRQYWNrYWdlcyB7CiAgSU5TVEFMTEFUSU9OX1BBQ0tBR0VTPSgKICAgICJweXRob24zLWRldiIKICAgICJweXRob24zLXBpcCIKICAgICJweXRob24zLXNldHVwdG9vbHMiCiAgICAicHl0aG9uMy10ZXN0cmVzb3VyY2VzIgogICAgImxpYnhtbDItdXRpbHMiCiAgICAicHl0aG9uLWx4bWwiCiAgICAicHl0aG9uMy1seG1sIgogICAgInB5dGhvbi1udW1weSIKICAgICJweXRob24zLW51bXB5IgogICkKICBpZiBbICIkVU5JWF9ESVNUUk8iID0gInVidW50dSIgXTsgdGhlbgogICAgaWYgWyAiJFVOSVhfRElTVFJPX1ZFUlNJT05fTlVNQkVSX01BSk9SIiAtZ2UgMTggXTsgdGhlbgogICAgICBJTlNUQUxMQVRJT05fUEFDS0FHRVMrPSgKICAgICAgICAicHl0aG9uMy1kaXN0dXRpbHMiCiAgICAgICkKICAgIGZpOwogICAgaWYgWyAiJFVOSVhfRElTVFJPX1ZFUlNJT05fTlVNQkVSX01BSk9SIiAtbHQgMjAgXTsgdGhlbgogICAgICBJTlNUQUxMQVRJT05fUEFDS0FHRVMrPSgKICAgICAgICAicHl0aG9uLXBpcCIKICAgICAgICAicHl0aG9uLWRldiIKICAgICAgKQogICAgZWxzZQogICAgICBJTlNUQUxMQVRJT05fUEFDS0FHRVMrPSgKICAgICAgICAicHl0aG9uLWRldi1pcy1weXRob24yIgogICAgICApCiAgICBmaTsKICBmaTsKfQpmdW5jdGlvbiBpbnN0YWxsUHl0aG9uQWRkaXRpb25hbEFwdFBhY2thZ2VzIHsKICBwcmludEluZGVudAogIHByaW50ZiAiICAlc1xuIiAiJF9NU0dfQ0hFQ0tJTkdfQURESVRJT05BTF9QWTNfUEFDS0FHRVMiCiAgZm9yIERFUCBpbiAiJHtJTlNUQUxMQVRJT05fUEFDS0FHRVNbQF19IjsgZG8KICAgIHByaW50SW5kZW50CiAgICBwcmludGYgIiAgICAlcyIgIiRERVAiCiAgICBpZiBbWyAiJChzdWRvIHBhY21hbiAtUWkgIiRERVAiIDI+IC9kZXYvbnVsbCB8IGdyZXAgU3RhdHVzKSIgIT0gIlN0YXR1czogaW5zdGFsbCBvayBpbnN0YWxsZWQiIF1dOyB0aGVuCiAgICAgIHN1ZG8gcGFjbWFuIC1TIC0tIC15ICIkREVQIiA+IC9kZXYvbnVsbCB8fCBleGl0ICQ/CiAgICBmaTsKICAgIF9ERVBfVkVSU0lPTj0kKGFwdC1jYWNoZSBwb2xpY3kgIiRERVAiIHwgZ3JlcCAtUG8gIihcZCtcLikrXGQrIiB8IGhlYWQgLW4gMSkKICAgIGlmIFsgIiRfREVQX1ZFUlNJT04iICE9ICIiIF07IHRoZW4KICAgICAgcHJpbnRmICIgKHYlcykiICIkX0RFUF9WRVJTSU9OIgogICAgZmk7CiAgICBwcmludGYgIiBcZVs5Mm1ceEUyXHg5Q1x4OTRcZVszOW1cbiIKICBkb25lCn0KZnVuY3Rpb24gY29uZmlndXJlUElQIHsKICBVU0VSX0hPTUU9IiQoZ2V0ZW50IHBhc3N3ZCAiJFNVRE9fVVNFUiIgfCBjdXQgLWQ6IC1mNikiCiAgaWYgWyAtZCAiJEhPTUUvLmNhY2hlL3BpcC8iIF07IHRoZW4KICAgIF9QSVBfQ0FDSEVfRklMRVBBVEg9IiRVU0VSX0hPTUUvLmNhY2hlL3BpcC8iCiAgICBpZiBbIC1mICIkX1BJUF9DQUNIRV9GSUxFUEFUSCIgXTsgdGhlbgogICAgICBzdWRvIGNob3duIC1SICIkU1VET19VU0VSIiAiJF9QSVBfQ0FDSEVfRklMRVBBVEgiCiAgICBmaTsKICBmaTsKICBpZiBbICIkKGNvbW1hbmQgLXYgcHl0aG9uMikiICE9ICIiIF07IHRoZW4KICAgIHN1ZG8gcHl0aG9uMiAtbSBwaXAgaW5zdGFsbCAtcXEgcGlwPT0yMC4wLjIKICBmaTsKfQpmdW5jdGlvbiB1cGdyYWRlR2xvYmFsTGlicmFyaWVzIHsKICBpZiBbICRfVVBHUkFERV9QWTNfR0xPQkFMX0xJQlMgLWVxIDEgXTsgdGhlbgogICAgcHJpbnRJbmRlbnQKICAgIHByaW50ZiAiICAlc1xuIiAiJF9NU0dfVVBEQVRJTkdfR0xPQkFMX1BZM19MSUJSQVJJRVMiCiAgICBHTE9CQUxfUkVDT01NRU5ERURfTElCUkFSSUVTPSgKICAgICAgInBpcCIKICAgICAgInZpcnR1YWxlbnYiCiAgICAgICJzZXR1cHRvb2xzIgogICAgICAidGVzdHJlc291cmNlcyIKICAgICkKICAgIGZvciBMSUIgaW4gIiR7R0xPQkFMX1JFQ09NTUVOREVEX0xJQlJBUklFU1tAXX0iOyBkbwogICAgICBwcmludEluZGVudAogICAgICBwcmludGYgIiAgICAlcyIgIiRMSUIiCiAgICAgIF9HRVRfVkVSU0lPTl9FWEVDX1NUUj0iCmltcG9ydCBzeXM7CnRyeTogaW1wb3J0ICRMSUIgYXMgbDsKZXhjZXB0IEltcG9ydEVycm9yIGFzIGVycjogc3lzLmV4aXQoNzc3KTsKcHJpbnQobC5fX3ZlcnNpb25fXyBpZiBpc2luc3RhbmNlKGwuX192ZXJzaW9uX18sIHN0cikgZWxzZSBcCiAgJy4nLmpvaW4oW3N0cih2KSBmb3IgdiBpbiBsLl9fdmVyc2lvbl9fXVs6M10pLCBlbmQ9JycpOwogICIKICAgICAgX0xJQl9MT0NBTF9WRVJTSU9OPSIkKCIkUFkzX0JJTkFSWV9GSUxFUEFUSCIgLWMgIiRfR0VUX1ZFUlNJT05fRVhFQ19TVFIiKSIKICAgICAgX0xJQl9MT0NBTF9WRVJTSU9OX0VYSVRfQ09ERT0kPwogICAgICBpZiBbICRfTElCX0xPQ0FMX1ZFUlNJT05fRVhJVF9DT0RFIC1lcSA3NzcgXTsgdGhlbgogICAgICAJc3VkbyAtSCAiJFBZM19CSU5BUllfRklMRVBBVEgiIC1tIHBpcCBpbnN0YWxsIC1VIC0tcXVpZXQgIiRMSUIiCiAgICAgIGVsc2UKICAgICAgICBwcmludGYgIiAoIgogICAgICAgIGlmIFsgIiRfTElCX0xPQ0FMX1ZFUlNJT04iICE9ICIiIF07IHRoZW4KICAgICAgICAgIHByaW50ZiAidiVzIiAiJF9MSUJfTE9DQUxfVkVSU0lPTiIKICAgICAgICBmaTsKICAgICAgICBfTElCX0xBU1RfUFlQSV9WRVJTSU9OPSQoCiAgICAgICAgICB4bWxsaW50IC0taHRtbCAtLXhwYXRoICIvL2FbbGFzdCgpXS90ZXh0KCkgIiBcCiAgICAgICAgICAgIDwoY3VybCAtc0wgImh0dHBzOi8vcHlwaS5vcmcvc2ltcGxlLyRMSUIvIikgfCBcCiAgICAgICAgICAgIGdyZXAgLVBvICIoXGQrXC4pK1xkK1x3KiIpCiAgICAgICAgICBpZiBbICIkX0xJQl9MQVNUX1BZUElfVkVSU0lPTiIgIT0gIiRfTElCX0xPQ0FMX1ZFUlNJT04iIF07IHRoZW4KICAgICAgICAgICAgaWYgWyAiJF9MSUJfTE9DQUxfVkVSU0lPTiIgIT0gIiIgXTsgdGhlbgogICAgICAgICAgICAgIHByaW50ZiAiIC0+ICIKICAgICAgICAgICAgZmk7CiAgICAgICAgICAgIHByaW50ZiAidiVzKS4uLiIgIiRfTElCX0xBU1RfUFlQSV9WRVJTSU9OIgogICAgICAgICAgICBfbGliX2VxdWFsX3ZlcnNpb249IiRMSUI9PSRfTElCX0xBU1RfUFlQSV9WRVJTSU9OIgogICAgICAgICAgICBzdWRvIC1IICIkUFkzX0JJTkFSWV9GSUxFUEFUSCIgLW0gcGlwIGluc3RhbGwgLVUgLXFxICIkX2xpYl9lcXVhbF92ZXJzaW9uIgogICAgICAgICAgZWxzZQogICAgICAgICAgICBwcmludGYgIikiCiAgICAgICAgICBmaTsKICAgICAgZmk7CiAgICAgIHByaW50ZiAiIFxlWzkybVx4RTJceDlDXHg5NFxlWzM5bVxuIgogICAgZG9uZQogIGZpOwp9CmZ1bmN0aW9uIG1haW4gewogIHByaW50SW5kZW50CiAgcHJpbnRmICIlc1xuIiAiJF9NU0dfU0VUVElOR19VUF9QWTNfRUNPU1lTVEVNIgogIGluc3RhbGxNYWluUHl0aG9uM0FwdFBhY2thZ2UKICBkaXNjb3Zlckluc3RhbGxhdGlvbkFwdFBhY2thZ2VzCiAgaW5zdGFsbFB5dGhvbkFkZGl0aW9uYWxBcHRQYWNrYWdlcwogIGNvbmZpZ3VyZVBJUAogIHVwZ3JhZGVHbG9iYWxMaWJyYXJpZXMKfQpmdW5jdGlvbiBleHBvcnRWYXJpYWJsZXMgewogIGRpc2NvdmVySW5zdGFsbGF0aW9uQXB0UGFja2FnZXMKICBleHBvcnQgSU5TVEFMTEFUSU9OX1BBQ0tBR0VTCn0KaWYgKHJldHVybiAwIDI+L2Rldi9udWxsKTsgdGhlbgogIGV4cG9ydFZhcmlhYmxlcwplbHNlCiAgbWFpbgpmaTsKaWYgWyAiJChjb21tYW5kIC12IGRlYmNvbmYtZ2V0LXNlbGVjdGlvbnMpIiAhPSAiIiBdOyB0aGVuCiAgc3VkbyBzaCAtYyAiZWNobyAnZGViY29uZiBkZWJjb25mL2Zyb250ZW5kIHNlbGVjdCAkX09SSUdJTkFMX0RFQkNPTkZfRlJPTlRFTkQnIHwgZGViY29uZi1zZXQtc2VsZWN0aW9ucyIKZmk7Cg=='
if (return 0 2>/dev/null); then
  source <(printf "%s" "$H" | base64 -d)
else
  echo "$(echo "$H" | base64 -d)" | bash -s -- "$@"
fi;
